(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{335:function(e,t,n){!function(t,n){"use strict";function i(e,t,n){this.root=this.currentNode=e,this.nodeType=t,this.filter=n||se}function r(e){return e.nodeType===B&&!!ce[e.nodeName]}function o(e){switch(e.nodeType){case R:return fe;case B:case H:if(re&&ge.has(e))return ge.get(e);break;default:return de}var t;return t=function(e,t){for(var n=e.length;n--;)if(!t(e[n]))return!1;return!0}(e.childNodes,a)?ue.test(e.nodeName)?fe:he:pe,re&&ge.set(e,t),t}function a(e){return o(e)===fe}function l(e){return o(e)===he}function s(e){return o(e)===pe}function u(e,t){var n=new i(t,F,l);return n.currentNode=e,n}function c(e,t){return(e=u(e,t).previousNode())!==t?e:null}function d(e,t){return(e=u(e,t).nextNode())!==t?e:null}function f(e,t){return!r(e)&&e.nodeType===t.nodeType&&e.nodeName===t.nodeName&&"A"!==e.nodeName&&e.className===t.className&&(!e.style&&!t.style||e.style.cssText===t.style.cssText)}function h(e,t,n){if(e.nodeName!==t)return!1;for(var i in n)if(e.getAttribute(i)!==n[i])return!1;return!0}function p(e,t,n,i){for(;e&&e!==t;){if(h(e,n,i))return e;e=e.parentNode}return null}function g(e,t){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function v(e){var t=e.nodeType;return t===B||t===H?e.childNodes.length:e.length||0}function m(e){var t=e.parentNode;return t&&t.removeChild(e),e}function y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function b(e){for(var t=e.ownerDocument.createDocumentFragment(),n=e.childNodes,i=n?n.length:0;i--;)t.appendChild(e.firstChild);return t}function _(e,t,i,r){var o,a,l,s=e.createElement(t);if(i instanceof Array&&(r=i,i=null),i)for(o in i)i[o]!==n&&s.setAttribute(o,i[o]);if(r)for(a=0,l=r.length;a<l;a+=1)s.appendChild(r[a]);return s}function k(e,t){var n,i,o=t.__squire__,l=e.ownerDocument,s=e;if(e===t&&((i=e.firstChild)&&"BR"!==i.nodeName||(n=o.createDefaultBlock(),i?e.replaceChild(n,i):e.appendChild(n),e=n,n=null)),e.nodeType===R)return s;if(a(e)){for(i=e.firstChild;te&&i&&i.nodeType===R&&!i.data;)e.removeChild(i),i=e.firstChild;i||(te?(n=l.createTextNode(W),o._didAddZWS()):n=l.createTextNode(""))}else if(ee){for(;e.nodeType!==R&&!r(e);){if(!(i=e.firstChild)){n=l.createTextNode("");break}e=i}e.nodeType===R?/^ +$/.test(e.data)&&(e.data=""):r(e)&&e.parentNode.insertBefore(l.createTextNode(""),e)}else if("HR"!==e.nodeName&&!e.querySelector("BR"))for(n=_(l,"BR");(i=e.lastElementChild)&&!a(i);)e=i;if(n)try{e.appendChild(n)}catch(t){o.didError({name:"Squire: fixCursor \u2013\xa0"+t,message:"Parent: "+e.nodeName+"/"+e.innerHTML+" appendChild: "+n.nodeName})}return s}function w(e,t){var n,i,r,o,l=e.childNodes,u=e.ownerDocument,c=null,d=t.__squire__._config;for(n=0,i=l.length;n<i;n+=1)!(o="BR"===(r=l[n]).nodeName)&&a(r)?(c||(c=_(u,d.blockTag,d.blockAttributes)),c.appendChild(r),n-=1,i-=1):(o||c)&&(c||(c=_(u,d.blockTag,d.blockAttributes)),k(c,t),o?e.replaceChild(c,r):(e.insertBefore(c,r),n+=1,i+=1),c=null),s(r)&&w(r,t);return c&&e.appendChild(k(c,t)),e}function C(e,t,n,i){var r,o,a,l=e.nodeType;if(l===R&&e!==n)return C(e.parentNode,e.splitText(t),n,i);if(l===B){if("number"==typeof t&&(t=t<e.childNodes.length?e.childNodes[t]:null),e===n)return t;for(r=e.parentNode,o=e.cloneNode(!1);t;)a=t.nextSibling,o.appendChild(t),t=a;return"OL"===e.nodeName&&p(e,i,"BLOCKQUOTE")&&(o.start=(+e.start||1)+e.childNodes.length-1),k(e,i),k(o,i),(a=e.nextSibling)?r.insertBefore(o,a):r.appendChild(o),C(r,o,n,i)}return t}function S(e,t){if(e.nodeType===R&&(e=e.parentNode),e.nodeType===B){var n={startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset};(function e(t,n){for(var i,r,o,l=t.childNodes,s=l.length,u=[];s--;)if(i=l[s],r=s&&l[s-1],s&&a(i)&&f(i,r)&&!ce[i.nodeName])n.startContainer===i&&(n.startContainer=r,n.startOffset+=v(r)),n.endContainer===i&&(n.endContainer=r,n.endOffset+=v(r)),n.startContainer===t&&(n.startOffset>s?n.startOffset-=1:n.startOffset===s&&(n.startContainer=r,n.startOffset=v(r))),n.endContainer===t&&(n.endOffset>s?n.endOffset-=1:n.endOffset===s&&(n.endContainer=r,n.endOffset=v(r))),m(i),i.nodeType===R?r.appendData(i.data):u.push(b(i));else if(i.nodeType===B){for(o=u.length;o--;)i.appendChild(u.pop());e(i,n)}})(e,n),t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset)}}function T(e){var t=e.nodeName;return"TD"===t||"TH"===t||"TR"===t||"TBODY"===t||"THEAD"===t}function E(e,t,n,i){var r,o,a,l=t;if(!T(e)||!T(t)){for(;(r=l.parentNode)&&r!==i&&r.nodeType===B&&1===r.childNodes.length;)l=r;m(l),a=e.childNodes.length,(o=e.lastChild)&&"BR"===o.nodeName&&(e.removeChild(o),a-=1),e.appendChild(b(t)),n.setStart(e,a),n.collapse(!0),S(e,n),Y&&(o=e.lastChild)&&"BR"===o.nodeName&&e.removeChild(o)}}function x(e,t){var n,i,r=e.previousSibling,o=e.firstChild,a=e.ownerDocument,l="LI"===e.nodeName;if((!l||o&&/^[OU]L$/.test(o.nodeName))&&!T(e))if(r&&f(r,e)&&r.isContentEditable&&e.isContentEditable){if(!s(r)){if(!l)return;(i=_(a,"DIV")).appendChild(b(r)),r.appendChild(i)}m(e),n=!s(e),r.appendChild(b(e)),n&&w(r,t),o&&x(o,t)}else l&&(r=_(a,"DIV"),e.insertBefore(r,o),k(r,t))}function M(e){this.isShiftDown=e.shiftKey}function L(e,t,n){var i,r;if(e||(e={}),t)for(i in t)!n&&i in e||(r=t[i],e[i]=r&&r.constructor===Object?L(e[i],r,n):r);return e}function O(e,t){e.nodeType===D&&(e=e.body);var n,i=e.ownerDocument,r=i.defaultView;this._win=r,this._doc=i,this._root=e,this._events={},this._isFocused=!1,this._lastSelection=null,ne&&this.addEventListener("beforedeactivate",this.getSelection),this._hasZWS=!1,this._lastAnchorNode=null,this._lastFocusNode=null,this._path="",this._willUpdatePath=!1,"onselectionchange"in i?this.addEventListener("selectionchange",this._updatePathOnEvent):(this.addEventListener("keyup",this._updatePathOnEvent),this.addEventListener("mouseup",this._updatePathOnEvent)),this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0,this._isInUndoState=!1,this._ignoreChange=!1,this._ignoreAllChanges=!1,ie?((n=new MutationObserver(this._docWasChanged.bind(this))).observe(e,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._mutation=n):this.addEventListener("keyup",this._keyUpDetectChange),this._restoreSelection=!1,this.addEventListener("blur",N),this.addEventListener("mousedown",A),this.addEventListener("touchstart",A),this.addEventListener("focus",P),this._awaitingPaste=!1,this.addEventListener(G?"beforecut":"cut",Ze),this.addEventListener("copy",Qe),this.addEventListener("keydown",M),this.addEventListener("keyup",M),this.addEventListener(G?"beforepaste":"paste",Je),this.addEventListener("drop",et),this.addEventListener(Y?"keypress":"keydown",Ae),this._keyHandlers=Object.create(Re),this.setConfig(t),G&&(r.Text.prototype.splitText=function(e){var t=this.ownerDocument.createTextNode(this.data.slice(e)),n=this.nextSibling,i=this.parentNode,r=this.length-e;return n?i.insertBefore(t,n):i.appendChild(t),r&&this.deleteData(e,r),t}),e.setAttribute("contenteditable","true");try{i.execCommand("enableObjectResizing",!1,"false"),i.execCommand("enableInlineTableEditing",!1,"false")}catch(e){}e.__squire__=this,this.setHTML("")}function N(){this._restoreSelection=!0}function A(){this._restoreSelection=!1}function P(){this._restoreSelection&&this.setSelection(this._lastSelection)}function I(e,t,n){var i,r;for(i=t.firstChild;i;i=r){if(r=i.nextSibling,a(i)){if(i.nodeType===R||"BR"===i.nodeName||"IMG"===i.nodeName){n.appendChild(i);continue}}else if(l(i)){n.appendChild(e.createDefaultBlock([I(e,i,e._doc.createDocumentFragment())]));continue}I(e,i,n)}return n}var B=1,R=3,D=9,H=11,F=1,W="\u200b",j=t.defaultView,U=navigator.userAgent,$=/Android/.test(U),z=/iP(?:ad|hone|od)/.test(U),V=/Mac OS X/.test(U),K=/Windows NT/.test(U),q=/Gecko\//.test(U),G=/Trident\/[456]\./.test(U),Y=!!j.opera,X=/Edge\//.test(U),Z=!X&&/WebKit\//.test(U),Q=/Trident\/[4567]\./.test(U),J=V?"meta-":"ctrl-",ee=G||Y,te=G||Z,ne=G,ie="undefined"!=typeof MutationObserver,re="undefined"!=typeof WeakMap,oe=/[^ \t\r\n]/,ae=Array.prototype.indexOf;Object.create||(Object.create=function(e){var t=function(){};return t.prototype=e,new t});var le={1:1,2:2,3:4,8:128,9:256,11:1024},se=function(){return!0};i.prototype.nextNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){for(e=t.firstChild;!e&&t&&t!==n;)(e=t.nextSibling)||(t=t.parentNode);if(!e)return null;if(le[e.nodeType]&i&&r(e))return this.currentNode=e,e;t=e}},i.prototype.previousNode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){if(t===n)return null;if(e=t.previousSibling)for(;t=e.lastChild;)e=t;else e=t.parentNode;if(!e)return null;if(le[e.nodeType]&i&&r(e))return this.currentNode=e,e;t=e}},i.prototype.previousPONode=function(){for(var e,t=this.currentNode,n=this.root,i=this.nodeType,r=this.filter;;){for(e=t.lastChild;!e&&t&&t!==n;)(e=t.previousSibling)||(t=t.parentNode);if(!e)return null;if(le[e.nodeType]&i&&r(e))return this.currentNode=e,e;t=e}};var ue=/^(?:#text|A(?:BBR|CRONYM)?|B(?:R|D[IO])?|C(?:ITE|ODE)|D(?:ATA|EL|FN)|EM|FONT|I(?:FRAME|MG|NPUT|NS)?|KBD|Q|R(?:P|T|UBY)|S(?:AMP|MALL|PAN|TR(?:IKE|ONG)|U[BP])?|TIME|U|VAR|WBR)$/,ce={BR:1,HR:1,IFRAME:1,IMG:1,INPUT:1},de=0,fe=1,he=2,pe=3,ge=re?new WeakMap:null,ve=function(e,t){for(var n=e.childNodes;t&&e.nodeType===B;)t=(n=(e=n[t-1]).childNodes).length;return e},me=function(e,t){if(e.nodeType===B){var n=e.childNodes;if(t<n.length)e=n[t];else{for(;e&&!e.nextSibling;)e=e.parentNode;e&&(e=e.nextSibling)}}return e},ye=function(e,t){var n,i,r,o,a=e.startContainer,l=e.startOffset,s=e.endContainer,u=e.endOffset;a.nodeType===R?(i=(n=a.parentNode).childNodes,l===a.length?(l=ae.call(i,a)+1,e.collapsed&&(s=n,u=l)):(l&&(o=a.splitText(l),s===a?(u-=l,s=o):s===n&&(u+=1),a=o),l=ae.call(i,a)),a=n):i=a.childNodes,l===(r=i.length)?a.appendChild(t):a.insertBefore(t,i[l]),a===s&&(u+=i.length-r),e.setStart(a,l),e.setEnd(s,u)},be=function(e,t,n){var i=e.startContainer,r=e.startOffset,o=e.endContainer,a=e.endOffset;t||(t=e.commonAncestorContainer),t.nodeType===R&&(t=t.parentNode);for(var l,s,u,c,d,f=C(o,a,t,n),h=C(i,r,t,n),p=t.ownerDocument.createDocumentFragment();h!==f;)l=h.nextSibling,p.appendChild(h),h=l;return i=t,r=f?ae.call(t.childNodes,f):t.childNodes.length,(s=(u=t.childNodes[r])&&u.previousSibling)&&s.nodeType===R&&u.nodeType===R&&(i=s,r=s.length,c=s.data,d=u.data," "===c.charAt(c.length-1)&&" "===d.charAt(0)&&(d="\xa0"+d.slice(1)),s.appendData(d),m(u)),e.setStart(i,r),e.collapse(!0),k(t,n),p},_e=function(e,t){var n,i,r=Te(e,t),o=Ee(e,t),a=r!==o;return Ce(e),Se(e,r,o,t),n=be(e,null,t),Ce(e),a&&(o=Ee(e,t),r&&o&&r!==o&&E(r,o,e,t)),r&&k(r,t),(i=t.firstChild)&&"BR"!==i.nodeName?e.collapse(!0):(k(t,t),e.selectNodeContents(t.firstChild)),n},ke=function(e,t,n){var i,r,o,l,u,f,h,g,m,y;for(w(t,n),i=t;i=d(i,n);)k(i,n);if(e.collapsed||_e(e,n),Ce(e),e.collapse(!1),l=p(e.endContainer,n,"BLOCKQUOTE")||n,r=Te(e,n),h=d(t,t),r&&h&&!function(e,t,n){for(;e&&e!==t;){if(n.test(e.nodeName))return e;e=e.parentNode}return null}(h,t,/PRE|TABLE|H[1-6]|OL|UL|BLOCKQUOTE/)){if(Se(e,r,r,n),e.collapse(!0),u=e.endContainer,f=e.endOffset,Ye(r,n,!1),a(u)&&(u=(g=C(u,f,c(u,n),n)).parentNode,f=ae.call(u.childNodes,g)),f!==v(u))for(o=n.ownerDocument.createDocumentFragment();i=u.childNodes[f];)o.appendChild(i);E(u,h,e,n),f=ae.call(u.parentNode.childNodes,u)+1,u=u.parentNode,e.setEnd(u,f)}v(t)&&(Se(e,l,l,n),m=(g=C(e.endContainer,e.endOffset,l,n))?g.previousSibling:l.lastChild,l.insertBefore(t,g),g?e.setEndBefore(g):e.setEnd(l,v(l)),r=Ee(e,n),Ce(e),u=e.endContainer,f=e.endOffset,g&&s(g)&&x(g,n),(g=m&&m.nextSibling)&&s(g)&&x(g,n),e.setEnd(u,f)),o&&(E(r,o,y=e.cloneRange(),n),e.setEnd(y.endContainer,y.endOffset)),Ce(e)},we=function(e,t,n){var i=t.ownerDocument.createRange();if(i.selectNode(t),n){var r=e.compareBoundaryPoints(3,i)>-1,o=e.compareBoundaryPoints(1,i)<1;return!r&&!o}var a=e.compareBoundaryPoints(0,i)<1,l=e.compareBoundaryPoints(2,i)>-1;return a&&l},Ce=function(e){for(var t,n=e.startContainer,i=e.startOffset,o=e.endContainer,a=e.endOffset,l=!0;n.nodeType!==R&&(t=n.childNodes[i])&&!r(t);)n=t,i=0;if(a)for(;o.nodeType!==R;){if(!(t=o.childNodes[a-1])||r(t)){if(l&&t&&"BR"===t.nodeName){a-=1,l=!1;continue}break}a=v(o=t)}else for(;o.nodeType!==R&&(t=o.firstChild)&&!r(t);)o=t;e.collapsed?(e.setStart(o,a),e.setEnd(n,i)):(e.setStart(n,i),e.setEnd(o,a))},Se=function(e,t,n,i){var r,o=e.startContainer,a=e.startOffset,l=e.endContainer,s=e.endOffset,u=!0;for(t||(t=e.commonAncestorContainer),n||(n=t);!a&&o!==t&&o!==i;)r=o.parentNode,a=ae.call(r.childNodes,o),o=r;for(;u&&l.nodeType!==R&&l.childNodes[s]&&"BR"===l.childNodes[s].nodeName&&(s+=1,u=!1),l!==n&&l!==i&&s===v(l);)r=l.parentNode,s=ae.call(r.childNodes,l)+1,l=r;e.setStart(o,a),e.setEnd(l,s)},Te=function(e,t){var n,i=e.startContainer;return a(i)?n=c(i,t):i!==t&&l(i)?n=i:n=d(n=ve(i,e.startOffset),t),n&&we(e,n,!0)?n:null},Ee=function(e,t){var n,i,r=e.endContainer;if(a(r))n=c(r,t);else if(r!==t&&l(r))n=r;else{if(!(n=me(r,e.endOffset))||!g(t,n))for(n=t;i=n.lastChild;)n=i;n=c(n,t)}return n&&we(e,n,!0)?n:null},xe=new i(null,4|F,function(e){return e.nodeType===R?oe.test(e.data):"IMG"===e.nodeName}),Me=function(e,t){var n,i=e.startContainer,r=e.startOffset;if(xe.root=null,i.nodeType===R){if(r)return!1;n=i}else if((n=me(i,r))&&!g(t,n)&&(n=null),!n&&((n=ve(i,r)).nodeType===R&&n.length))return!1;return xe.currentNode=n,xe.root=Te(e,t),!xe.previousNode()},Le=function(e,t){var n,i=e.endContainer,r=e.endOffset;if(xe.root=null,i.nodeType===R){if((n=i.data.length)&&r<n)return!1;xe.currentNode=i}else xe.currentNode=ve(i,r);return xe.root=Ee(e,t),!xe.nextNode()},Oe=function(e,t){var n,i=Te(e,t),r=Ee(e,t);i&&r&&(n=i.parentNode,e.setStart(n,ae.call(n.childNodes,i)),n=r.parentNode,e.setEnd(n,ae.call(n.childNodes,r)+1))},Ne={8:"backspace",9:"tab",13:"enter",32:"space",33:"pageup",34:"pagedown",37:"left",39:"right",46:"delete",219:"[",221:"]"},Ae=function(e){var t=e.keyCode,n=Ne[t],i="",r=this.getSelection();e.defaultPrevented||(n||(n=String.fromCharCode(t).toLowerCase(),/^[A-Za-z0-9]$/.test(n)||(n="")),Y&&46===e.which&&(n="."),111<t&&t<124&&(n="f"+(t-111)),"backspace"!==n&&"delete"!==n&&(e.altKey&&(i+="alt-"),e.ctrlKey&&(i+="ctrl-"),e.metaKey&&(i+="meta-")),e.shiftKey&&(i+="shift-"),n=i+n,this._keyHandlers[n]?this._keyHandlers[n](this,e,r):r.collapsed||e.isComposing||e.ctrlKey||e.metaKey||1!==(Q?n:e.key||n).length||(this.saveUndoState(r),_e(r,this._root),this._ensureBottomLine(),this.setSelection(r),this._updatePath(r,!0)))},Pe=function(e){return function(t,n){n.preventDefault(),t[e]()}},Ie=function(e,t){return t=t||null,function(n,i){i.preventDefault();var r=n.getSelection();n.hasFormat(e,null,r)?n.changeFormat(null,{tag:e},r):n.changeFormat({tag:e},t,r)}},Be=function(e,t){try{t||(t=e.getSelection());var n,i=t.startContainer;for(i.nodeType===R&&(i=i.parentNode),n=i;a(n)&&(!n.textContent||n.textContent===W);)n=(i=n).parentNode;i!==n&&(t.setStart(n,ae.call(n.childNodes,i)),t.collapse(!0),n.removeChild(i),l(n)||(n=c(n,e._root)),k(n,e._root),Ce(t)),i===e._root&&(i=i.firstChild)&&"BR"===i.nodeName&&m(i),e._ensureBottomLine(),e.setSelection(t),e._updatePath(t,!0)}catch(t){e.didError(t)}},Re={enter:function(e,t,n){var i,r,o,a,l,s=e._root;if(t.preventDefault(),e._recordUndoState(n),ht(n.startContainer,s,e),e._removeZWS(),e._getRangeAndRemoveBookmark(n),n.collapsed||_e(n,s),(i=Te(n,s))&&(r=p(i,s,"PRE")))return Ce(n),o=n.startContainer,a=n.startOffset,o.nodeType!==R&&(o=e._doc.createTextNode(""),r.insertBefore(o,r.firstChild)),t.shiftKey||"\n"!==o.data.charAt(a-1)&&!Me(n,s)||"\n"!==o.data.charAt(a)&&!Le(n,s)?(o.insertData(a,"\n"),k(r,s),o.length===a+1?n.setStartAfter(o):n.setStart(o,a+1)):(o.deleteData(a&&a-1,a?2:1),(o=(l=C(o,a&&a-1,s,s)).previousSibling).textContent||m(o),o=e.createDefaultBlock(),l.parentNode.insertBefore(o,l),l.textContent||m(l),n.setStart(o,0)),n.collapse(!0),e.setSelection(n),e._updatePath(n,!0),void e._docWasChanged();if(!i||t.shiftKey||/^T[HD]$/.test(i.nodeName))return(r=p(n.endContainer,s,"A"))&&(r=r.parentNode,Se(n,r,r,s),n.collapse(!1)),ye(n,e.createElement("BR")),n.collapse(!1),e.setSelection(n),void e._updatePath(n,!0);if((r=p(i,s,"LI"))&&(i=r),function(e){return!e.textContent&&!e.querySelector("IMG")}(i)){if(p(i,s,"UL")||p(i,s,"OL"))return e.decreaseListLevel(n);if(p(i,s,"BLOCKQUOTE"))return e.modifyBlocks(ct,n)}for(l=st(e,i,n.startContainer,n.startOffset),ot(i),Ke(i),k(i,s);l.nodeType===B;){var u,c=l.firstChild;if("A"===l.nodeName&&(!l.textContent||l.textContent===W)){y(l,c=e._doc.createTextNode("")),l=c;break}for(;c&&c.nodeType===R&&!c.data&&(u=c.nextSibling)&&"BR"!==u.nodeName;)m(c),c=u;if(!c||"BR"===c.nodeName||c.nodeType===R&&!Y)break;l=c}n=e.createRange(l,0),e.setSelection(n),e._updatePath(n,!0)},"shift-enter":function(e,t,n){return e._keyHandlers.enter(e,t,n)},backspace:function(e,t,n){var i=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(Me(n,i)){t.preventDefault();var r,o=Te(n,i);if(!o)return;if(w(o.parentNode,i),r=c(o,i)){if(!r.isContentEditable){for(;!r.parentNode.isContentEditable;)r=r.parentNode;return void m(r)}for(E(r,o,n,i),o=r.parentNode;o!==i&&!o.nextSibling;)o=o.parentNode;o!==i&&(o=o.nextSibling)&&x(o,i),e.setSelection(n)}else if(o){if(p(o,i,"UL")||p(o,i,"OL"))return e.decreaseListLevel(n);if(p(o,i,"BLOCKQUOTE"))return e.modifyBlocks(ut,n);e.setSelection(n),e._updatePath(n,!0)}}else e.setSelection(n),setTimeout(function(){Be(e)},0);else t.preventDefault(),_e(n,i),Be(e,n)},delete:function(e,t,n){var i,r,o,a,l,s,u=e._root;if(e._removeZWS(),e.saveUndoState(n),n.collapsed)if(Le(n,u)){if(t.preventDefault(),!(i=Te(n,u)))return;if(w(i.parentNode,u),r=d(i,u)){if(!r.isContentEditable){for(;!r.parentNode.isContentEditable;)r=r.parentNode;return void m(r)}for(E(i,r,n,u),r=i.parentNode;r!==u&&!r.nextSibling;)r=r.parentNode;r!==u&&(r=r.nextSibling)&&x(r,u),e.setSelection(n),e._updatePath(n,!0)}}else{if(o=n.cloneRange(),Se(n,u,u,u),a=n.endContainer,l=n.endOffset,a.nodeType===B&&(s=a.childNodes[l])&&"IMG"===s.nodeName)return t.preventDefault(),m(s),Ce(n),void Be(e,n);e.setSelection(o),setTimeout(function(){Be(e)},0)}else t.preventDefault(),_e(n,u),Be(e,n)},tab:function(e,t,n){var i,r,o=e._root;if(e._removeZWS(),n.collapsed&&Me(n,o))for(i=Te(n,o);r=i.parentNode;){if("UL"===r.nodeName||"OL"===r.nodeName){t.preventDefault(),e.increaseListLevel(n);break}i=r}},"shift-tab":function(e,t,n){var i,r=e._root;e._removeZWS(),n.collapsed&&Me(n,r)&&((p(i=n.startContainer,r,"UL")||p(i,r,"OL"))&&(t.preventDefault(),e.decreaseListLevel(n)))},space:function(e,t,n){var i,r=e._root;if(e._recordUndoState(n),ht(n.startContainer,r,e),e._getRangeAndRemoveBookmark(n),i=n.endContainer,n.collapsed&&n.endOffset===v(i))do{if("A"===i.nodeName){n.setStartAfter(i);break}}while(!i.nextSibling&&(i=i.parentNode)&&i!==r);n.collapsed||(_e(n,r),e._ensureBottomLine(),e.setSelection(n),e._updatePath(n,!0)),e.setSelection(n)},left:function(e){e._removeZWS()},right:function(e){e._removeZWS()}};V&&q&&(Re["meta-left"]=function(e,t){t.preventDefault();var n=rt(e);n&&n.modify&&n.modify("move","backward","lineboundary")},Re["meta-right"]=function(e,t){t.preventDefault();var n=rt(e);n&&n.modify&&n.modify("move","forward","lineboundary")}),V||(Re.pageup=function(e){e.moveCursorToStart()},Re.pagedown=function(e){e.moveCursorToEnd()}),Re[J+"b"]=Ie("B"),Re[J+"i"]=Ie("I"),Re[J+"u"]=Ie("U"),Re[J+"shift-7"]=Ie("S"),Re[J+"shift-5"]=Ie("SUB",{tag:"SUP"}),Re[J+"shift-6"]=Ie("SUP",{tag:"SUB"}),Re[J+"shift-8"]=Pe("makeUnorderedList"),Re[J+"shift-9"]=Pe("makeOrderedList"),Re[J+"["]=Pe("decreaseQuoteLevel"),Re[J+"]"]=Pe("increaseQuoteLevel"),Re[J+"d"]=Pe("toggleCode"),Re[J+"y"]=Pe("redo"),Re[J+"z"]=Pe("undo"),Re[J+"shift-z"]=Pe("redo");var De={1:10,2:13,3:16,4:18,5:24,6:32,7:48},He={backgroundColor:{regexp:oe,replace:function(e,t,n){return _(e,"SPAN",{class:t.highlight,style:"background-color:"+n})}},color:{regexp:oe,replace:function(e,t,n){return _(e,"SPAN",{class:t.colour,style:"color:"+n})}},fontWeight:{regexp:/^bold|^700/i,replace:function(e){return _(e,"B")}},fontStyle:{regexp:/^italic/i,replace:function(e){return _(e,"I")}},fontFamily:{regexp:oe,replace:function(e,t,n){return _(e,"SPAN",{class:t.fontFamily,style:"font-family:"+n})}},fontSize:{regexp:oe,replace:function(e,t,n){return _(e,"SPAN",{class:t.fontSize,style:"font-size:"+n})}},textDecoration:{regexp:/^underline/i,replace:function(e){return _(e,"U")}}},Fe=function(e){return function(t,n){var i=_(t.ownerDocument,e);return n.replaceChild(i,t),i.appendChild(b(t)),i}},We=function(e,t,n){var i,r,o,a,l,s,u=e.style,c=e.ownerDocument;for(i in He)r=He[i],(o=u[i])&&r.regexp.test(o)&&(s=r.replace(c,n.classNames,o),l||(l=s),a&&a.appendChild(s),a=s,e.style[i]="");return l&&(a.appendChild(b(e)),"SPAN"===e.nodeName?t.replaceChild(l,e):e.appendChild(l)),a||e},je={P:We,SPAN:We,STRONG:Fe("B"),EM:Fe("I"),INS:Fe("U"),STRIKE:Fe("S"),FONT:function(e,t,n){var i,r,o,a,l,s=e.face,u=e.size,c=e.color,d=e.ownerDocument,f=n.classNames;return s&&(l=i=_(d,"SPAN",{class:f.fontFamily,style:"font-family:"+s}),a=i),u&&(r=_(d,"SPAN",{class:f.fontSize,style:"font-size:"+De[u]+"px"}),l||(l=r),a&&a.appendChild(r),a=r),c&&/^#?([\dA-F]{3}){1,2}$/i.test(c)&&("#"!==c.charAt(0)&&(c="#"+c),o=_(d,"SPAN",{class:f.colour,style:"color:"+c}),l||(l=o),a&&a.appendChild(o),a=o),l||(l=a=_(d,"SPAN")),t.replaceChild(l,e),a.appendChild(b(e)),a},TT:function(e,t,n){var i=_(e.ownerDocument,"SPAN",{class:n.classNames.fontFamily,style:'font-family:menlo,consolas,"courier new",monospace'});return t.replaceChild(i,e),i.appendChild(b(e)),i}},Ue=/^(?:A(?:DDRESS|RTICLE|SIDE|UDIO)|BLOCKQUOTE|CAPTION|D(?:[DLT]|IV)|F(?:IGURE|IGCAPTION|OOTER)|H[1-6]|HEADER|HR|L(?:ABEL|EGEND|I)|O(?:L|UTPUT)|P(?:RE)?|SECTION|T(?:ABLE|BODY|D|FOOT|H|HEAD|R)|COL(?:GROUP)?|UL)$/,$e=/^(?:HEAD|META|STYLE)/,ze=new i(null,4|F),Ve=function e(t,n,i){var r,o,l,s,u,c,d,f,h,p,g,v,m=t.childNodes;for(r=t;a(r);)r=r.parentNode;for(ze.root=r,o=0,l=m.length;o<l;o+=1)if(u=(s=m[o]).nodeName,c=s.nodeType,d=je[u],c===B){if(f=s.childNodes.length,d)s=d(s,t,n);else{if($e.test(u)){t.removeChild(s),o-=1,l-=1;continue}if(!Ue.test(u)&&!a(s)){o-=1,l+=f-1,t.replaceChild(b(s),s);continue}}f&&e(s,n,i||"PRE"===u)}else{if(c===R){if(g=s.data,h=!oe.test(g.charAt(0)),p=!oe.test(g.charAt(g.length-1)),i||!h&&!p)continue;if(h){for(ze.currentNode=s;(v=ze.previousPONode())&&!("IMG"===(u=v.nodeName)||"#text"===u&&oe.test(v.data));)if(!a(v)){v=null;break}g=g.replace(/^[ \t\r\n]+/g,v?" ":"")}if(p){for(ze.currentNode=s;(v=ze.nextNode())&&!("IMG"===u||"#text"===u&&oe.test(v.data));)if(!a(v)){v=null;break}g=g.replace(/[ \t\r\n]+$/g,v?" ":"")}if(g){s.data=g;continue}}t.removeChild(s),o-=1,l-=1}return t},Ke=function e(t){for(var n,i=t.childNodes,o=i.length;o--;)(n=i[o]).nodeType!==B||r(n)?n.nodeType!==R||n.data||t.removeChild(n):(e(n),a(n)&&!n.firstChild&&t.removeChild(n))},qe=function(e){return e.nodeType===B?"BR"===e.nodeName||"IMG"===e.nodeName:oe.test(e.data)},Ge=function(e,t){for(var n,r=e.parentNode;a(r);)r=r.parentNode;return(n=new i(r,4|F,qe)).currentNode=e,!!n.nextNode()||t&&!n.previousNode()},Ye=function(e,t,n){var i,r,o,l=e.querySelectorAll("BR"),s=[],u=l.length;for(i=0;i<u;i+=1)s[i]=Ge(l[i],n);for(;u--;)(o=(r=l[u]).parentNode)&&(s[u]?a(o)||w(o,t):m(r))},Xe=function(e,t,n,i){var r,o,a=t.ownerDocument.body,l=i.willCutCopy;Ye(t,n,!0),t.setAttribute("style","position:fixed;overflow:hidden;bottom:100%;right:100%;"),a.appendChild(t),r=t.innerHTML,o=t.innerText||t.textContent,l&&(r=l(r)),K&&(o=o.replace(/\r?\n/g,"\r\n")),e.setData("text/html",r),e.setData("text/plain",o),a.removeChild(t)},Ze=function(e){var t,n,i,r,o,a,l=e.clipboardData,s=this.getSelection(),u=this._root,c=this;if(s.collapsed)e.preventDefault();else{if(this.saveUndoState(s),X||z||!l)setTimeout(function(){try{c._ensureBottomLine()}catch(e){c.didError(e)}},0);else{for(n=(t=Te(s,u))===Ee(s,u)&&t||u,i=_e(s,u),(r=s.commonAncestorContainer).nodeType===R&&(r=r.parentNode);r&&r!==n;)(o=r.cloneNode(!1)).appendChild(i),i=o,r=r.parentNode;(a=this.createElement("div")).appendChild(i),Xe(l,a,u,this._config),e.preventDefault()}this.setSelection(s)}},Qe=function(e){var t,n,i,r,o,a,l=e.clipboardData,s=this.getSelection(),u=this._root;if(!X&&!z&&l){for(n=(t=Te(s,u))===Ee(s,u)&&t||u,s=s.cloneRange(),Ce(s),Se(s,n,n,u),i=s.cloneContents(),(r=s.commonAncestorContainer).nodeType===R&&(r=r.parentNode);r&&r!==n;)(o=r.cloneNode(!1)).appendChild(i),i=o,r=r.parentNode;(a=this.createElement("div")).appendChild(i),Xe(l,a,u,this._config),e.preventDefault()}},Je=function(e){var t,n,i,r,o,a=e.clipboardData,l=a&&a.items,s=this.isShiftDown,u=!1,c=!1,d=null,f=this;if(X&&l){for(t=l.length;t--;)!s&&/^image\/.*/.test(l[t].type)&&(c=!0);c||(l=null)}if(l){for(e.preventDefault(),t=l.length;t--;){if(i=(n=l[t]).type,!s&&"text/html"===i)return void n.getAsString(function(e){f.insertHTML(e,!0)});"text/plain"===i&&(d=n),!s&&/^image\/.*/.test(i)&&(c=!0)}c?(this.fireEvent("dragover",{dataTransfer:a,preventDefault:function(){u=!0}}),u&&this.fireEvent("drop",{dataTransfer:a})):d&&d.getAsString(function(e){f.insertPlainText(e,!0)})}else{if(r=a&&a.types,!X&&r&&(ae.call(r,"text/html")>-1||!q&&ae.call(r,"text/plain")>-1&&ae.call(r,"text/rtf")<0))return e.preventDefault(),void(!s&&(o=a.getData("text/html"))?this.insertHTML(o,!0):((o=a.getData("text/plain"))||(o=a.getData("text/uri-list")))&&this.insertPlainText(o,!0));this._awaitingPaste=!0;var h=this._doc.body,p=this.getSelection(),g=p.startContainer,v=p.startOffset,y=p.endContainer,b=p.endOffset,_=this.createElement("DIV",{contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"});h.appendChild(_),p.selectNodeContents(_),this.setSelection(p),setTimeout(function(){try{f._awaitingPaste=!1;for(var e,t,n="",i=_;_=i;)i=_.nextSibling,m(_),(e=_.firstChild)&&e===_.lastChild&&"DIV"===e.nodeName&&(_=e),n+=_.innerHTML;t=f.createRange(g,v,y,b),f.setSelection(t),n&&f.insertHTML(n,!0)}catch(e){f.didError(e)}},0)}},et=function(e){for(var t=e.dataTransfer.types,n=t.length,i=!1,r=!1;n--;)switch(t[n]){case"text/plain":i=!0;break;case"text/html":r=!0;break;default:return}(r||i)&&this.saveUndoState()},tt=O.prototype,nt=function(e,t,n){var i=n._doc,r=e?DOMPurify.sanitize(e,{ALLOW_UNKNOWN_PROTOCOLS:!0,WHOLE_DOCUMENT:!1,RETURN_DOM:!0,RETURN_DOM_FRAGMENT:!0}):null;return r?i.importNode(r,!0):i.createDocumentFragment()};tt.setConfig=function(e){return(e=L({blockTag:"DIV",blockAttributes:null,tagAttributes:{blockquote:null,ul:null,ol:null,li:null,a:null},classNames:{colour:"colour",fontFamily:"font",fontSize:"size",highlight:"highlight"},leafNodeNames:ce,undo:{documentSizeThreshold:-1,undoLimit:-1},isInsertedHTMLSanitized:!0,isSetHTMLSanitized:!0,sanitizeToDOMFragment:"undefined"!=typeof DOMPurify&&DOMPurify.isSupported?nt:null,willCutCopy:null},e,!0)).blockTag=e.blockTag.toUpperCase(),this._config=e,this},tt.createElement=function(e,t,n){return _(this._doc,e,t,n)},tt.createDefaultBlock=function(e){var t=this._config;return k(this.createElement(t.blockTag,t.blockAttributes,e),this._root)},tt.didError=function(e){console.log(e)},tt.getDocument=function(){return this._doc},tt.getRoot=function(){return this._root},tt.modifyDocument=function(e){var t=this._mutation;t&&(t.takeRecords().length&&this._docWasChanged(),t.disconnect()),this._ignoreAllChanges=!0,e(),this._ignoreAllChanges=!1,t&&(t.observe(this._root,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),this._ignoreChange=!1)};var it={pathChange:1,select:1,input:1,undoStateChange:1};tt.fireEvent=function(e,t){var n,i,r,o=this._events[e];if(/^(?:focus|blur)/.test(e))if(n=this._root===this._doc.activeElement,"focus"===e){if(!n||this._isFocused)return this;this._isFocused=!0}else{if(n||!this._isFocused)return this;this._isFocused=!1}if(o)for(t||(t={}),t.type!==e&&(t.type=e),i=(o=o.slice()).length;i--;){r=o[i];try{r.handleEvent?r.handleEvent(t):r.call(this,t)}catch(t){t.details="Squire: fireEvent error. Event type: "+e,this.didError(t)}}return this},tt.destroy=function(){var e,t=this._events;for(e in t)this.removeEventListener(e);this._mutation&&this._mutation.disconnect(),delete this._root.__squire__,this._undoIndex=-1,this._undoStack=[],this._undoStackLength=0},tt.handleEvent=function(e){this.fireEvent(e.type,e)},tt.addEventListener=function(e,t){var n=this._events[e],i=this._root;return t?(n||(n=this._events[e]=[],it[e]||("selectionchange"===e&&(i=this._doc),i.addEventListener(e,this,!0))),n.push(t),this):(this.didError({name:"Squire: addEventListener with null or undefined fn",message:"Event type: "+e}),this)},tt.removeEventListener=function(e,t){var n,i=this._events[e],r=this._root;if(i){if(t)for(n=i.length;n--;)i[n]===t&&i.splice(n,1);else i.length=0;i.length||(delete this._events[e],it[e]||("selectionchange"===e&&(r=this._doc),r.removeEventListener(e,this,!0)))}return this},tt.createRange=function(e,t,n,i){if(e instanceof this._win.Range)return e.cloneRange();var r=this._doc.createRange();return r.setStart(e,t),n?r.setEnd(n,i):r.setEnd(e,t),r},tt.getCursorPosition=function(e){if(!e&&!(e=this.getSelection())||!e.getBoundingClientRect)return null;var t,n,i=e.getBoundingClientRect();return i&&!i.top&&(this._ignoreChange=!0,(t=this._doc.createElement("SPAN")).textContent=W,ye(e,t),i=t.getBoundingClientRect(),(n=t.parentNode).removeChild(t),S(n,e)),i},tt._moveCursorTo=function(e){var t=this._root,n=this.createRange(t,e?0:t.childNodes.length);return Ce(n),this.setSelection(n),this},tt.moveCursorToStart=function(){return this._moveCursorTo(!0)},tt.moveCursorToEnd=function(){return this._moveCursorTo(!1)};var rt=function(e){return e._win.getSelection()||null};tt.setSelection=function(e){if(e)if(this._lastSelection=e,this._isFocused)if($&&!this._restoreSelection)N.call(this),this.blur(),this.focus();else{z&&this._win.focus();var t=rt(this);t&&(t.removeAllRanges(),t.addRange(e))}else N.call(this);return this},tt.getSelection=function(){var e,t,n,i,o=rt(this),a=this._root;return this._isFocused&&o&&o.rangeCount&&(t=(e=o.getRangeAt(0).cloneRange()).startContainer,n=e.endContainer,t&&r(t)&&e.setStartBefore(t),n&&r(n)&&e.setEndBefore(n)),e&&g(a,e.commonAncestorContainer)?this._lastSelection=e:g((i=(e=this._lastSelection).commonAncestorContainer).ownerDocument,i)||(e=null),e||(e=this.createRange(a.firstChild,0)),e},tt.getSelectedText=function(){var e=this.getSelection();if(!e||e.collapsed)return"";var t,n=new i(e.commonAncestorContainer,4|F,function(t){return we(e,t,!0)}),r=e.startContainer,o=e.endContainer,l=n.currentNode=r,s="",u=!1;for(n.filter(l)||(l=n.nextNode());l;)l.nodeType===R?(t=l.data)&&/\S/.test(t)&&(l===o&&(t=t.slice(0,e.endOffset)),l===r&&(t=t.slice(e.startOffset)),s+=t,u=!0):("BR"===l.nodeName||u&&!a(l))&&(s+="\n",u=!1),l=n.nextNode();return s},tt.getPath=function(){return this._path};var ot=function(e,t){for(var n,r,o,l=new i(e,4);r=l.nextNode();)for(;(o=r.data.indexOf(W))>-1&&(!t||r.parentNode!==t);){if(1===r.length){do{(n=r.parentNode).removeChild(r),r=n,l.currentNode=n}while(a(r)&&!v(r));break}r.deleteData(o,1)}};tt._didAddZWS=function(){this._hasZWS=!0},tt._removeZWS=function(){this._hasZWS&&(ot(this._root),this._hasZWS=!1)},tt._updatePath=function(e,t){if(e){var n,i=e.startContainer,r=e.endContainer;(t||i!==this._lastAnchorNode||r!==this._lastFocusNode)&&(this._lastAnchorNode=i,this._lastFocusNode=r,n=i&&r?i===r?function e(t,n,i){var r,o,a,l,s,u="";return t&&t!==n&&(u=e(t.parentNode,n,i),t.nodeType===B&&(u+=(u?">":"")+t.nodeName,(r=t.id)&&(u+="#"+r),(o=t.className.trim())&&((a=o.split(/\s\s*/)).sort(),u+=".",u+=a.join(".")),(l=t.dir)&&(u+="[dir="+l+"]"),a&&(s=i.classNames,ae.call(a,s.highlight)>-1&&(u+="[backgroundColor="+t.style.backgroundColor.replace(/ /g,"")+"]"),ae.call(a,s.colour)>-1&&(u+="[color="+t.style.color.replace(/ /g,"")+"]"),ae.call(a,s.fontFamily)>-1&&(u+="[fontFamily="+t.style.fontFamily.replace(/ /g,"")+"]"),ae.call(a,s.fontSize)>-1&&(u+="[fontSize="+t.style.fontSize+"]")))),u}(r,this._root,this._config):"(selection)":"",this._path!==n&&(this._path=n,this.fireEvent("pathChange",{path:n}))),this.fireEvent(e.collapsed?"cursor":"select",{range:e})}},tt._updatePathOnEvent=function(e){var t=this;t._isFocused&&!t._willUpdatePath&&(t._willUpdatePath=!0,setTimeout(function(){t._willUpdatePath=!1,t._updatePath(t.getSelection())},0))},tt.focus=function(){if(Q){try{this._root.setActive()}catch(t){}this.fireEvent("focus")}else this._root.focus();return this},tt.blur=function(){return this._root.blur(),Q&&this.fireEvent("blur"),this};var at="squire-selection-end";tt._saveRangeToBookmark=function(e){var t,n=this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),i=this.createElement("INPUT",{id:at,type:"hidden"});ye(e,n),e.collapse(!1),ye(e,i),2&n.compareDocumentPosition(i)&&(n.id=at,i.id="squire-selection-start",t=n,n=i,i=t),e.setStartAfter(n),e.setEndBefore(i)},tt._getRangeAndRemoveBookmark=function(e){var t=this._root,n=t.querySelector("#squire-selection-start"),i=t.querySelector("#"+at);if(n&&i){var r=n.parentNode,o=i.parentNode,a=ae.call(r.childNodes,n),l=ae.call(o.childNodes,i);r===o&&(l-=1),m(n),m(i),e||(e=this._doc.createRange()),e.setStart(r,a),e.setEnd(o,l),S(r,e),r!==o&&S(o,e),e.collapsed&&((r=e.startContainer).nodeType===R&&((o=r.childNodes[e.startOffset])&&o.nodeType===R||(o=r.childNodes[e.startOffset-1]),o&&o.nodeType===R&&(e.setStart(o,0),e.collapse(!0))))}return e||null},tt._keyUpDetectChange=function(e){var t=e.keyCode;e.ctrlKey||e.metaKey||e.altKey||!(t<16||t>20)||!(t<33||t>45)||this._docWasChanged()},tt._docWasChanged=function(){if(re&&(ge=new WeakMap),!this._ignoreAllChanges){if(ie&&this._ignoreChange)return void(this._ignoreChange=!1);this._isInUndoState&&(this._isInUndoState=!1,this.fireEvent("undoStateChange",{canUndo:!0,canRedo:!1})),this.fireEvent("input")}},tt._recordUndoState=function(e,t){if(!this._isInUndoState||t){var n,i=this._undoIndex,r=this._undoStack,o=this._config.undo,a=o.documentSizeThreshold,l=o.undoLimit;t||(i+=1),i<this._undoStackLength&&(r.length=this._undoStackLength=i),e&&this._saveRangeToBookmark(e),n=this._getHTML(),a>-1&&2*n.length>a&&l>-1&&i>l&&(r.splice(0,i-l),i=l,this._undoStackLength=l),r[i]=n,this._undoIndex=i,this._undoStackLength+=1,this._isInUndoState=!0}},tt.saveUndoState=function(e){return e===n&&(e=this.getSelection()),this._recordUndoState(e,this._isInUndoState),this._getRangeAndRemoveBookmark(e),this},tt.undo=function(){if(0!==this._undoIndex||!this._isInUndoState){this._recordUndoState(this.getSelection(),!1),this._undoIndex-=1,this._setHTML(this._undoStack[this._undoIndex]);var e=this._getRangeAndRemoveBookmark();e&&this.setSelection(e),this._isInUndoState=!0,this.fireEvent("undoStateChange",{canUndo:0!==this._undoIndex,canRedo:!0}),this.fireEvent("input")}return this},tt.redo=function(){var e=this._undoIndex,t=this._undoStackLength;if(e+1<t&&this._isInUndoState){this._undoIndex+=1,this._setHTML(this._undoStack[this._undoIndex]);var n=this._getRangeAndRemoveBookmark();n&&this.setSelection(n),this.fireEvent("undoStateChange",{canUndo:!0,canRedo:e+2<t}),this.fireEvent("input")}return this},tt.hasFormat=function(e,t,n){if(e=e.toUpperCase(),t||(t={}),!n&&!(n=this.getSelection()))return!1;!n.collapsed&&n.startContainer.nodeType===R&&n.startOffset===n.startContainer.length&&n.startContainer.nextSibling&&n.setStartBefore(n.startContainer.nextSibling),!n.collapsed&&n.endContainer.nodeType===R&&0===n.endOffset&&n.endContainer.previousSibling&&n.setEndAfter(n.endContainer.previousSibling);var r,o,a=this._root,l=n.commonAncestorContainer;if(p(l,a,e,t))return!0;if(l.nodeType===R)return!1;r=new i(l,4,function(e){return we(n,e,!0)});for(var s=!1;o=r.nextNode();){if(!p(o,a,e,t))return!1;s=!0}return s},tt.getFontInfo=function(e){var t,i,r,o={color:n,backgroundColor:n,family:n,size:n},a=0;if(!e&&!(e=this.getSelection()))return o;if(t=e.commonAncestorContainer,e.collapsed||t.nodeType===R)for(t.nodeType===R&&(t=t.parentNode);a<4&&t;)(i=t.style)&&(!o.color&&(r=i.color)&&(o.color=r,a+=1),!o.backgroundColor&&(r=i.backgroundColor)&&(o.backgroundColor=r,a+=1),!o.family&&(r=i.fontFamily)&&(o.family=r,a+=1),!o.size&&(r=i.fontSize)&&(o.size=r,a+=1)),t=t.parentNode;return o},tt._addFormat=function(e,t,n){var r,o,l,s,u,c,d,f,h=this._root;if(n.collapsed){for(r=k(this.createElement(e,t),h),ye(n,r),n.setStart(r.firstChild,r.firstChild.length),n.collapse(!0),f=r;a(f);)f=f.parentNode;ot(f,r)}else{if(o=new i(n.commonAncestorContainer,4|F,function(e){return(e.nodeType===R||"BR"===e.nodeName||"IMG"===e.nodeName)&&we(n,e,!0)}),l=n.startContainer,u=n.startOffset,s=n.endContainer,c=n.endOffset,o.currentNode=l,o.filter(l)||(l=o.nextNode(),u=0),!l)return n;do{!p(d=o.currentNode,h,e,t)&&(d===s&&d.length>c&&d.splitText(c),d===l&&u&&(d=d.splitText(u),s===l&&(s=d,c-=u),l=d,u=0),y(d,r=this.createElement(e,t)),r.appendChild(d))}while(o.nextNode());s.nodeType!==R&&(d.nodeType===R?(s=d,c=d.length):(s=d.parentNode,c=1)),n=this.createRange(l,u,s,c)}return n},tt._removeFormat=function(e,t,n,i){this._saveRangeToBookmark(n);var r,o=this._doc;n.collapsed&&(te?(r=o.createTextNode(W),this._didAddZWS()):r=o.createTextNode(""),ye(n,r));for(var l=n.commonAncestorContainer;a(l);)l=l.parentNode;var s=n.startContainer,u=n.startOffset,c=n.endContainer,d=n.endOffset,f=[],p=Array.prototype.filter.call(l.getElementsByTagName(e),function(i){return we(n,i,!0)&&h(i,e,t)});return i||p.forEach(function(e){!function e(t,i){if(!we(n,t,!1)){var r,o,a=t.nodeType===R;if(!we(n,t,!0))return void("INPUT"===t.nodeName||a&&!t.data||f.push([i,t]));if(a)t===c&&d!==t.length&&f.push([i,t.splitText(d)]),t===s&&u&&(t.splitText(u),f.push([i,t]));else for(r=t.firstChild;r;r=o)o=r.nextSibling,e(r,i)}}(e,e)}),f.forEach(function(e){var t=e[0].cloneNode(!1),n=e[1];y(n,t),t.appendChild(n)}),p.forEach(function(e){y(e,b(e))}),this._getRangeAndRemoveBookmark(n),r&&n.collapse(!1),S(l,n),n},tt.changeFormat=function(e,t,n,i){return n||(n=this.getSelection())?(this.saveUndoState(n),t&&(n=this._removeFormat(t.tag.toUpperCase(),t.attributes||{},n,i)),e&&(n=this._addFormat(e.tag.toUpperCase(),e.attributes||{},n)),this.setSelection(n),this._updatePath(n,!0),ie||this._docWasChanged(),this):this};var lt={DT:"DD",DD:"DT",LI:"LI",PRE:"PRE"},st=function(e,t,n,i){var r=lt[t.nodeName],o=null,a=C(n,i,t.parentNode,e._root),l=e._config;return r||(r=l.blockTag,o=l.blockAttributes),h(a,r,o)||(t=_(a.ownerDocument,r,o),a.dir&&(t.dir=a.dir),y(a,t),t.appendChild(b(a)),a=t),a};tt.forEachBlock=function(e,t,n){if(!n&&!(n=this.getSelection()))return this;t&&this.saveUndoState(n);var i=this._root,r=Te(n,i),o=Ee(n,i);if(r&&o)do{if(e(r)||r===o)break}while(r=d(r,i));return t&&(this.setSelection(n),this._updatePath(n,!0),ie||this._docWasChanged()),this},tt.modifyBlocks=function(e,t){if(!t&&!(t=this.getSelection()))return this;this._recordUndoState(t,this._isInUndoState);var n,i=this._root;return Oe(t,i),Se(t,i,i,i),n=be(t,i,i),ye(t,e.call(this,n)),t.endOffset<t.endContainer.childNodes.length&&x(t.endContainer.childNodes[t.endOffset],i),x(t.startContainer.childNodes[t.startOffset],i),this._getRangeAndRemoveBookmark(t),this.setSelection(t),this._updatePath(t,!0),ie||this._docWasChanged(),this};var ut=function(e){var t=this._root,n=e.querySelectorAll("blockquote");return Array.prototype.filter.call(n,function(e){return!p(e.parentNode,t,"BLOCKQUOTE")}).forEach(function(e){y(e,b(e))}),e},ct=function(){return this.createDefaultBlock([this.createElement("INPUT",{id:"squire-selection-start",type:"hidden"}),this.createElement("INPUT",{id:at,type:"hidden"})])},dt=function(e,t,n){for(var i,r,o,a,l=u(t,e._root),s=e._config.tagAttributes,c=s[n.toLowerCase()],d=s.li;i=l.nextNode();)"LI"===i.parentNode.nodeName&&(i=i.parentNode,l.currentNode=i.lastChild),"LI"!==i.nodeName?(a=e.createElement("LI",d),i.dir&&(a.dir=i.dir),(o=i.previousSibling)&&o.nodeName===n?(o.appendChild(a),m(i)):y(i,e.createElement(n,c,[a])),a.appendChild(b(i)),l.currentNode=a):(r=(i=i.parentNode).nodeName)!==n&&/^[OU]L$/.test(r)&&y(i,e.createElement(n,c,[b(i)]))},ft=function(e,t){for(var n=e.commonAncestorContainer,i=e.startContainer,r=e.endContainer;n&&n!==t&&!/^[OU]L$/.test(n.nodeName);)n=n.parentNode;if(!n||n===t)return null;for(i===n&&(i=i.childNodes[e.startOffset]),r===n&&(r=r.childNodes[e.endOffset]);i&&i.parentNode!==n;)i=i.parentNode;for(;r&&r.parentNode!==n;)r=r.parentNode;return[n,i,r]};tt.increaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=ft(e,t);if(!n)return this.focus();var i=n[0],r=n[1],o=n[2];if(!r||r===i.firstChild)return this.focus();this._recordUndoState(e,this._isInUndoState);var a,l,s=i.nodeName,u=r.previousSibling;u.nodeName!==s&&(a=this._config.tagAttributes[s.toLowerCase()],u=this.createElement(s,a),i.insertBefore(u,r));do{l=r===o?null:r.nextSibling,u.appendChild(r)}while(r=l);return(l=u.nextSibling)&&x(l,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),ie||this._docWasChanged(),this.focus()},tt.decreaseListLevel=function(e){if(!e&&!(e=this.getSelection()))return this.focus();var t=this._root,n=ft(e,t);if(!n)return this.focus();var i=n[0],r=n[1],o=n[2];r||(r=i.firstChild),o||(o=i.lastChild),this._recordUndoState(e,this._isInUndoState);var a,l=i.parentNode,s=o.nextSibling?C(i,o.nextSibling,l,t):i.nextSibling;if(l!==t&&"LI"===l.nodeName){for(l=l.parentNode;s;)a=s.nextSibling,o.appendChild(s),s=a;s=i.parentNode.nextSibling}var u=!/^[OU]L$/.test(l.nodeName);do{a=r===o?null:r.nextSibling,i.removeChild(r),u&&"LI"===r.nodeName&&(r=this.createDefaultBlock([b(r)])),l.insertBefore(r,s)}while(r=a);return i.firstChild||m(i),s&&x(s,t),this._getRangeAndRemoveBookmark(e),this.setSelection(e),this._updatePath(e,!0),ie||this._docWasChanged(),this.focus()},tt._ensureBottomLine=function(){var e=this._root,t=e.lastElementChild;t&&t.nodeName===this._config.blockTag&&l(t)||e.appendChild(this.createDefaultBlock())},tt.setKeyHandler=function(e,t){return this._keyHandlers[e]=t,this},tt._getHTML=function(){return this._root.innerHTML},tt._setHTML=function(e){var t=this._root,n=t;n.innerHTML=e;do{k(n,t)}while(n=d(n,t));this._ignoreChange=!0},tt.getHTML=function(e){var t,n,i,r,o,a,l=[];if(e&&(a=this.getSelection())&&this._saveRangeToBookmark(a),ee)for(n=t=this._root;n=d(n,t);)n.textContent||n.querySelector("BR")||(i=this.createElement("BR"),n.appendChild(i),l.push(i));if(r=this._getHTML().replace(/\u200B/g,""),ee)for(o=l.length;o--;)m(l[o]);return a&&this._getRangeAndRemoveBookmark(a),r},tt.setHTML=function(e){var t,n,i,r=this._config,o=r.isSetHTMLSanitized?r.sanitizeToDOMFragment:null,a=this._root;"function"==typeof o?n=o(e,!1,this):((t=this.createElement("DIV")).innerHTML=e,(n=this._doc.createDocumentFragment()).appendChild(b(t))),Ve(n,r),Ye(n,a,!1),w(n,a);for(var l=n;l=d(l,a);)k(l,a);for(this._ignoreChange=!0;i=a.lastChild;)a.removeChild(i);a.appendChild(n),k(a,a),this._undoIndex=-1,this._undoStack.length=0,this._undoStackLength=0,this._isInUndoState=!1;var s=this._getRangeAndRemoveBookmark()||this.createRange(a.firstChild,0);return this.saveUndoState(s),this._lastSelection=s,N.call(this),this._updatePath(s,!0),this},tt.insertElement=function(e,t){if(t||(t=this.getSelection()),t.collapse(!0),a(e))ye(t,e),t.setStartAfter(e);else{for(var n,i=this._root,r=Te(t,i)||i;r!==i&&!r.nextSibling;)r=r.parentNode;r!==i&&(n=C(r.parentNode,r.nextSibling,i,i)),n?i.insertBefore(e,n):(i.appendChild(e),n=this.createDefaultBlock(),i.appendChild(n)),t.setStart(n,0),t.setEnd(n,0),Ce(t)}return this.focus(),this.setSelection(t),this._updatePath(t),ie||this._docWasChanged(),this},tt.insertImage=function(e,t){var n=this.createElement("IMG",L({src:e},t,!0));return this.insertElement(n),n},tt.linkRegExp=/\b((?:(?:ht|f)tps?:\/\/|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,}\/)(?:[^\s()<>]+|\([^\s()<>]+\))+(?:\((?:[^\s()<>]+|(?:\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?\xab\xbb\u201c\u201d\u2018\u2019]))|([\w\-.%+]+@(?:[\w\-]+\.)+[A-Z]{2,}\b)(?:\?[^&?\s]+=[^&?\s]+(?:&[^&?\s]+=[^&?\s]+)*)?/i;var ht=function(e,t,n){var r,o,a,l,s,u,c,d=e.ownerDocument,f=new i(e,4,function(e){return!p(e,t,"A")}),h=n.linkRegExp,g=n._config.tagAttributes.a;if(h)for(;r=f.nextNode();)for(o=r.data,a=r.parentNode;l=h.exec(o);)u=(s=l.index)+l[0].length,s&&(c=d.createTextNode(o.slice(0,s)),a.insertBefore(c,r)),(c=n.createElement("A",L({href:l[1]?/^(?:ht|f)tps?:/i.test(l[1])?l[1]:"http://"+l[1]:"mailto:"+l[0]},g,!1))).textContent=o.slice(s,u),a.insertBefore(c,r),r.data=o=o.slice(u)};tt.insertHTML=function(e,t){var n,i,r,o,a,l,s,u=this._config,c=u.isInsertedHTMLSanitized?u.sanitizeToDOMFragment:null,f=this.getSelection(),h=this._doc;"function"==typeof c?o=c(e,t,this):(t&&(n=e.indexOf("\x3c!--StartFragment--\x3e"),i=e.lastIndexOf("\x3c!--EndFragment--\x3e"),n>-1&&i>-1&&(e=e.slice(n+20,i))),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(e)&&(e="<TR>"+e+"</TR>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(e)&&(e="<TABLE>"+e+"</TABLE>"),(r=this.createElement("DIV")).innerHTML=e,(o=h.createDocumentFragment()).appendChild(b(r))),this.saveUndoState(f);try{for(a=this._root,l=o,s={fragment:o,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},ht(o,o,this),Ve(o,u),Ye(o,a,!1),Ke(o),o.normalize();l=d(l,o);)k(l,a);t&&this.fireEvent("willPaste",s),s.defaultPrevented||(ke(f,s.fragment,a),ie||this._docWasChanged(),f.collapse(!1),this._ensureBottomLine()),this.setSelection(f),this._updatePath(f,!0),t&&this.focus()}catch(e){this.didError(e)}return this};var pt=function(e){return e.split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;")};tt.insertPlainText=function(e,t){var n=this.getSelection();if(n.collapsed&&p(n.startContainer,this._root,"PRE")){var i,r,o=n.startContainer,a=n.startOffset;return o&&o.nodeType===R||(i=this._doc.createTextNode(""),o.insertBefore(i,o.childNodes[a]),o=i,a=0),r={text:e,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},t&&this.fireEvent("willPaste",r),r.defaultPrevented||(e=r.text,o.insertData(a,e),n.setStart(o,a+e.length),n.collapse(!0)),this.setSelection(n),this}var l,s,u,c,d=e.split("\n"),f=this._config,h=f.blockTag,g=f.blockAttributes,v="</"+h+">",m="<"+h;for(l in g)m+=" "+l+'="'+pt(g[l])+'"';for(m+=">",s=0,u=d.length;s<u;s+=1)c=d[s],c=pt(c).replace(/ (?= )/g,"&nbsp;"),d[s]=m+(c||"<BR>")+v;return this.insertHTML(d.join(""),t)};var gt=function(e,t,n){return function(){return this[e](t,n),this.focus()}};tt.addStyles=function(e){if(e){var t=this._doc.documentElement.firstChild,n=this.createElement("STYLE",{type:"text/css"});n.appendChild(this._doc.createTextNode(e)),t.appendChild(n)}return this},tt.bold=gt("changeFormat",{tag:"B"}),tt.italic=gt("changeFormat",{tag:"I"}),tt.underline=gt("changeFormat",{tag:"U"}),tt.strikethrough=gt("changeFormat",{tag:"S"}),tt.subscript=gt("changeFormat",{tag:"SUB"},{tag:"SUP"}),tt.superscript=gt("changeFormat",{tag:"SUP"},{tag:"SUB"}),tt.removeBold=gt("changeFormat",null,{tag:"B"}),tt.removeItalic=gt("changeFormat",null,{tag:"I"}),tt.removeUnderline=gt("changeFormat",null,{tag:"U"}),tt.removeStrikethrough=gt("changeFormat",null,{tag:"S"}),tt.removeSubscript=gt("changeFormat",null,{tag:"SUB"}),tt.removeSuperscript=gt("changeFormat",null,{tag:"SUP"}),tt.makeLink=function(e,t){var n=this.getSelection();if(n.collapsed){var i=e.indexOf(":")+1;if(i)for(;"/"===e[i];)i+=1;ye(n,this._doc.createTextNode(e.slice(i)))}return t=L(L({href:e},t,!0),this._config.tagAttributes.a,!1),this.changeFormat({tag:"A",attributes:t},{tag:"A"},n),this.focus()},tt.removeLink=function(){return this.changeFormat(null,{tag:"A"},this.getSelection(),!0),this.focus()},tt.setFontFace=function(e){var t=this._config.classNames.fontFamily;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"font-family: "+e+", sans-serif;"}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},tt.setFontSize=function(e){var t=this._config.classNames.fontSize;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"font-size: "+("number"==typeof e?e+"px":e)}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},tt.setTextColour=function(e){var t=this._config.classNames.colour;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"color:"+e}}:null,{tag:"SPAN",attributes:{class:t}}),this.focus()},tt.setHighlightColour=function(e){var t=this._config.classNames.highlight;return this.changeFormat(e?{tag:"SPAN",attributes:{class:t,style:"background-color:"+e}}:e,{tag:"SPAN",attributes:{class:t}}),this.focus()},tt.setTextAlignment=function(e){return this.forEachBlock(function(t){var n=t.className.split(/\s+/).filter(function(e){return!!e&&!/^align/.test(e)}).join(" ");e?(t.className=n+" align-"+e,t.style.textAlign=e):(t.className=n,t.style.textAlign="")},!0),this.focus()},tt.setTextDirection=function(e){return this.forEachBlock(function(t){e?t.dir=e:t.removeAttribute("dir")},!0),this.focus()};var vt=function(e){for(var t,n=this._root,r=this._doc,o=r.createDocumentFragment(),a=u(e,n);t=a.nextNode();){var l,s,c=t.querySelectorAll("BR"),d=[],f=c.length;for(l=0;l<f;l+=1)d[l]=Ge(c[l],!1);for(;f--;)s=c[f],d[f]?y(s,r.createTextNode("\n")):m(s);for(f=(c=t.querySelectorAll("CODE")).length;f--;)m(c[f]);o.childNodes.length&&o.appendChild(r.createTextNode("\n")),o.appendChild(b(t))}for(a=new i(o,4);t=a.nextNode();)t.data=t.data.replace(/\xa0/g," ");return o.normalize(),k(this.createElement("PRE",this._config.tagAttributes.pre,[o]),n)},mt=function(e){for(var t,n,r,o,a,l,s=this._doc,u=this._root,c=e.querySelectorAll("PRE"),d=c.length;d--;){for(n=new i(t=c[d],4);r=n.nextNode();){for(o=(o=r.data).replace(/ (?= )/g,"\xa0"),a=s.createDocumentFragment();(l=o.indexOf("\n"))>-1;)a.appendChild(s.createTextNode(o.slice(0,l))),a.appendChild(s.createElement("BR")),o=o.slice(l+1);r.parentNode.insertBefore(a,r),r.data=o}w(t,u),y(t,b(t))}return e};tt.code=function(){var e=this.getSelection();return e.collapsed||s(e.commonAncestorContainer)?this.modifyBlocks(vt,e):this.changeFormat({tag:"CODE",attributes:this._config.tagAttributes.code},null,e),this.focus()},tt.removeCode=function(){var e=this.getSelection();return p(e.commonAncestorContainer,this._root,"PRE")?this.modifyBlocks(mt,e):this.changeFormat(null,{tag:"CODE"},e),this.focus()},tt.toggleCode=function(){return this.hasFormat("PRE")||this.hasFormat("CODE")?this.removeCode():this.code(),this},tt.removeAllFormatting=function(e){if(!e&&!(e=this.getSelection())||e.collapsed)return this;for(var t=this._root,n=e.commonAncestorContainer;n&&!l(n);)n=n.parentNode;if(n||(Oe(e,t),n=t),n.nodeType===R)return this;this.saveUndoState(e),Se(e,n,n,t);for(var i,r,o=n.ownerDocument,a=e.startContainer,s=e.startOffset,u=e.endContainer,c=e.endOffset,d=o.createDocumentFragment(),f=o.createDocumentFragment(),h=C(u,c,n,t),p=C(a,s,n,t);p!==h;)i=p.nextSibling,d.appendChild(p),p=i;return I(this,d,f),f.normalize(),p=f.firstChild,i=f.lastChild,r=n.childNodes,p?(n.insertBefore(f,h),s=ae.call(r,p),c=ae.call(r,i)+1):c=s=ae.call(r,h),e.setStart(n,s),e.setEnd(n,c),S(n,e),Ce(e),this.setSelection(e),this._updatePath(e,!0),this.focus()},tt.increaseQuoteLevel=gt("modifyBlocks",function(e){return this.createElement("BLOCKQUOTE",this._config.tagAttributes.blockquote,[e])}),tt.decreaseQuoteLevel=gt("modifyBlocks",ut),tt.makeUnorderedList=gt("modifyBlocks",function(e){return dt(this,e,"UL"),e}),tt.makeOrderedList=gt("modifyBlocks",function(e){return dt(this,e,"OL"),e}),tt.removeList=gt("modifyBlocks",function(e){var t,n,i,r,o,a=e.querySelectorAll("UL, OL"),s=e.querySelectorAll("LI"),u=this._root;for(t=0,n=a.length;t<n;t+=1)w(r=b(i=a[t]),u),y(i,r);for(t=0,n=s.length;t<n;t+=1)l(o=s[t])?y(o,this.createDefaultBlock([b(o)])):(w(o,u),y(o,b(o)));return e}),O.isInline=a,O.isBlock=l,O.isContainer=s,O.getBlockWalker=u,O.getPreviousBlock=c,O.getNextBlock=d,O.areAlike=f,O.hasTagAttributes=h,O.getNearest=p,O.isOrContains=g,O.detach=m,O.replaceWith=y,O.empty=b,O.getNodeBefore=ve,O.getNodeAfter=me,O.insertNodeInRange=ye,O.extractContentsOfRange=be,O.deleteContentsOfRange=_e,O.insertTreeFragmentIntoRange=ke,O.isNodeContainedInRange=we,O.moveRangeBoundariesDownTree=Ce,O.moveRangeBoundariesUpTree=Se,O.getStartBlockOfRange=Te,O.getEndBlockOfRange=Ee,O.contentWalker=xe,O.rangeDoesStartAtBlockBoundary=Me,O.rangeDoesEndAtBlockBoundary=Le,O.expandRangeToBlockBoundaries=Oe,O.onPaste=Je,O.addLinks=ht,O.splitBlock=st,O.startSelectionId="squire-selection-start",O.endSelectionId=at,e.exports=O}(document)},336:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},92:function(e,t,n){var i;"undefined"!==typeof self&&self,i=function(e,t,n,i,r,o,a){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist/",n(n.s=45)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=l(n(21));function l(e){return e&&e.__esModule?e:{default:e}}var s=n(14).isMac?1:0,u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._command=new o.default.Map,this._mdCommand=new o.default.Map,this._wwCommand=new o.default.Map,this._options=r.default.extend({useCommandShortcut:!0},n),this.base=t,this.keyMapCommand={},this._initEvent()}return i(e,[{key:"_addCommandBefore",value:function(e){var t={command:e};return this.base.eventManager.emit("addCommandBefore",t),t.command||e}},{key:"addCommand",value:function(t){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];i.length&&(t=e.command.apply(e,[t].concat(i)));var o=(t=this._addCommandBefore(t)).getName(),a=void 0;return t.isMDType()?a=this._mdCommand:t.isWWType()?a=this._wwCommand:t.isGlobalType()&&(a=this._command),a.set(o,t),t.keyMap&&(this.keyMapCommand[t.keyMap[s]]=o),t}},{key:"_initEvent",value:function(){var e=this;this.base.eventManager.listen("command",function(){e.exec.apply(e,arguments)}),this.base.eventManager.listen("keyMap",function(t){if(e._options.useCommandShortcut){var n=e.keyMapCommand[t.keyMap];n&&(t.data.preventDefault(),e.exec(n))}})}},{key:"exec",value:function(e){var t=void 0,n=void 0,i=this.base;if((t=this._command.get(e))||(this.base.isMarkdownMode()?(t=this._mdCommand.get(e),i=this.base.mdEditor):(t=this._wwCommand.get(e),i=this.base.wwEditor)),t){for(var r,o=arguments.length,a=Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];a.unshift(i),n=(r=t).exec.apply(r,a)}return n}}]),e}();u.command=function(e,t){var n=a.default.factory(e,t.name,t.keyMap);return o.default.extend(n,t),n},t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.I18n=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i};var l=void 0,s="en_US",u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._code=s,this._langs=new a.default.Map}return r(e,[{key:"setCode",value:function(e){this._code=e}},{key:"setLanguage",value:function(e,t){var n=this;(e=[].concat(e)).forEach(function(e){if(n._langs.has(e)){var i=n._langs.get(e);n._langs.set(e,a.default.extend(i,t))}else n._langs.set(e,t)})}},{key:"get",value:function(e,t){t||(t=this._code);var n=this._langs.get(t);n||(n=this._langs.get(s));var i=n[e];if(!i)throw new Error('There is no text key "'+e+'" in '+t);return i}}],[{key:"getSharedInstance",value:function(){return l||(l=new e),l}}]),e}();t.I18n=u,t.default=new u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),r=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var a=/\u200B/g,l=function(e){return e&&e.nodeType===Node.TEXT_NODE},s=function(e){return e&&e.nodeType===Node.ELEMENT_NODE},u=function(e){return s(e)?e.tagName:"TEXT"},c=function(e){var t=void 0;return s(e)?t=e.textContent.replace(a,"").length:l(e)&&(t=e.nodeValue.replace(a,"").length),t},d=function(e){var t,n=e.parentNode.childNodes,i=void 0,r=void 0;for(i=0,t=n.length;i<t;i+=1)if(n[i]===e){r=i;break}return r},f=function(e,t){var n=void 0;return l(e)?n=e:e.childNodes.length&&t>=0&&(n=e.childNodes[t]),n},h=function(e,t,n){for(var i=e+"Sibling",r=void 0,o=void 0;t&&!t[i]&&(r=u(t.parentNode))!==n&&"BODY"!==r;)t=t.parentNode;return t[i]&&(o=t[i]),o},p=function(e,t,n){for(var i=void 0;e.parentNode&&!t(e.parentNode)&&(e=e.parentNode,!n||!n(e.parentNode)););return t(e.parentNode)&&(i=e),i},g=function(e,t){return r.default.isString(t)?p(e,function(e){return t===u(e)}):p(e,function(e){return t===e})},v=function(e,t,n){var i=e+"Sibling",r=void 0;return(t=g(t,n))&&t[i]&&(r=t[i]),r},m=function(e){var t={};t.tagName=e.nodeName,e.id&&(t.id=e.id);var n=e.className.trim();return n&&(t.className=n),t},y=function(e,t,n){var i=t;if(i&&e===i.parentNode)for(;i!==n;){var r=i.nextSibling;e.removeChild(i),i=r}},b=function(e){return!!e&&("UL"===e.nodeName||"OL"===e.nodeName)},_=function(e,t){e.hasChildNodes()&&(r.default.forEachArray(e.childNodes,function(){t.appendChild(e.firstChild)}),t.normalize()),e.parentNode&&e.parentNode.removeChild(e)},k=function(e,t){if("SPAN"!==e.nodeName)for(var n=e.parentNode,i=e;i.childNodes&&1===i.childNodes.length&&!l(i.firstChild)&&"SPAN"!==(i=i.firstChild).nodeName;)if(i.nodeName===t){var r=document.createElement(t);return _(i,i.parentNode),n.replaceChild(r,e),r.appendChild(e),r}return e},w=function(e,t,n){var i=k(e,n);if(i.nodeName===n)for(var r=k(t,n),o=i,a=i.nextSibling;a;){var l=a.nextSibling;if((a=k(a,n)).nodeName===n?o?_(a,o):o=a:o=null,a===r)break;a=l}};t.default={getNodeName:u,isTextNode:l,isElemNode:s,isBlockNode:function(e){return/^(ADDRESS|ARTICLE|ASIDE|BLOCKQUOTE|DETAILS|DIALOG|DD|DIV|DL|DT|FIELDSET|FIGCAPTION|FIGURE|FOOTER|FORM|H[\d]|HEADER|HGROUP|HR|LI|MAIN|NAV|OL|P|PRE|SECTION|UL)$/gi.test(this.getNodeName(e))},getTextLength:c,getOffsetLength:function(e){var t=void 0;return s(e)?t=e.childNodes.length:l(e)&&(t=e.nodeValue.replace(a,"").length),t},getPrevOffsetNodeUntil:function(e,t,n){return t>0?f(e,t-1):h("previous",e,n)},getNodeOffsetOfParent:d,getChildNodeByOffset:f,getNodeWithDirectionUntil:h,containsNode:function(e,t){for(var n=document.createTreeWalker(e,4,null,!1),i=e===t;!i&&n.nextNode();)i=n.currentNode===t;return i},getTopPrevNodeUnder:function(e,t){return v("previous",e,t)},getTopNextNodeUnder:function(e,t){return v("next",e,t)},getParentUntilBy:p,getParentUntil:g,getTopBlockNode:function(e){return g(e,"BODY")},getPrevTextNode:function(e){for(e=e.previousSibling||e.parentNode;!l(e)&&"BODY"!==u(e);)if(e.previousSibling)for(e=e.previousSibling;e.lastChild;)e=e.lastChild;else e=e.parentNode;return"BODY"===u(e)&&(e=null),e},findOffsetNode:function(e,t,n){var i=[],o="",a=0,l=void 0;if(!t.length)return i;for(var s=t.shift(),u=document.createTreeWalker(e,4,null,!1);u.nextNode();){for(o=u.currentNode.nodeValue||"",n&&(o=n(o)),l=a+o.length;l>=s;){if(i.push({container:u.currentNode,offsetInContainer:s-a,offset:s}),!t.length)return i;s=t.shift()}a=l}do{i.push({container:u.currentNode,offsetInContainer:o.length,offset:s}),s=t.shift()}while(!r.default.isUndefined(s));return i},getPath:function(e,t){for(var n=[];e&&e!==t;)s(e)&&n.unshift(m(e)),e=e.parentNode;return n},getNodeInfo:m,getTableCellByDirection:function(e,t){var n=null;return r.default.isUndefined(t)||"next"!==t&&"previous"!==t||(n="next"===t?e.nextElementSibling:e.previousElementSibling),n},getSiblingRowCellByDirection:function(e,t,n){var o=null,a=void 0,l=void 0,s=void 0,c=void 0,f=void 0,h=void 0;return r.default.isUndefined(t)||"next"!==t&&"previous"!==t||e&&(a=(0,i.default)(e),"next"===t?(s=a.parent().next(),h=(f=(c=a.parents("thead"))[0]&&c.next())&&"TBODY"===u(f[0]),l=0):(s=a.parent().prev(),h=(f=(c=a.parents("tbody"))[0]&&c.prev())&&"THEAD"===u(f[0]),l=e.parentNode.childNodes.length-1),!r.default.isUndefined(n)&&n||(l=d(e)),s[0]?o=s.children("td,th")[l]:c[0]&&h&&(o=f.find("td,th")[l])),o},isMDSupportInlineNode:function(e){return/^(A|B|BR|CODE|DEL|EM|I|IMG|S|SPAN|STRONG)$/gi.test(e.nodeName)},isStyledNode:function(e){return/^(A|ABBR|ACRONYM|B|BDI|BDO|BIG|CITE|CODE|DEL|DFN|EM|I|INS|KBD|MARK|Q|S|SAMP|SMALL|SPAN|STRONG|SUB|SUP|U|VAR)$/gi.test(e.nodeName)},removeChildFromStartToEndNode:y,removeNodesByDirection:function(e,t,n){for(var i=t;i!==e;){var r=i.parentNode,o=i,a=o.nextSibling,l=o.previousSibling;!n&&a?y(r,a,null):n&&l&&y(r,r.childNodes[0],i),i=r}},getLeafNode:function(e){for(var t=e;t.childNodes&&t.childNodes.length;){var n=t.firstChild;t=l(n)&&!c(n)&&n.nextSibling||n}return t},isInsideTaskBox:function(e,t,n){var i=parseInt(e.left,10),r=parseInt(e.top,10),o=parseInt(e.width,10),a=parseInt(e.height,10);return t>=i&&t<=i+o&&n>=r&&n<=r+a},isListNode:b,isFirstListItem:function(e){var t=e.nodeName,n=e.parentNode;return"LI"===t&&e===n.firstChild},isFirstLevelListItem:function(e){var t=e.nodeName,n=e.parentNode.parentNode;return"LI"===t&&!b(n)},mergeNode:_,createHorizontalRule:function(){var e=document.createElement("div"),t=document.createElement("hr");return e.setAttribute("contenteditable",!1),t.setAttribute("contenteditable",!1),e.appendChild(t),e},createEmptyLine:function(){var e=document.createElement("div");return e.appendChild(document.createElement("br")),e},changeTagOrder:k,mergeSameNodes:w,optimizeRange:function(e,t){var n=e.collapsed,i=e.commonAncestorContainer,r=e.startContainer,o=e.endContainer;if(!n){var a=null;if(r!==o?(w(g(r,i),g(o,i),t),a=i):l(r)&&(a=r.parentNode),a&&a.nodeName===t){var s=a.previousSibling,u=void 0;s&&(u=k(s)).nodeName===t&&_(a,u);var c=a.nextSibling;c&&(u=k(c)).nodeName===t&&_(u,a)}}},getAllTextNode:function(e){for(var t=document.createTreeWalker(e,4,null,!1),n=[];t.nextNode();){var i=t.currentNode;l(i)&&n.push(i)}return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}var s="tui-popup-",u='<div class="'+s+'header">\n        <span class="'+s+'title"></span>\n        <div class="'+s+'header-buttons">\n            <button type="button" class="'+s+'close-button"></button>\n        </div>\n    </div>\n    <div class="'+s+'body"></div>',c='<div class="'+s+'wrapper">\n        <div class="'+s+'header">\n            <span class="'+s+'title"></span>\n            <div class="'+s+'header-buttons">\n                <button type="button" class="'+s+'close-button"></button>\n            </div>\n        </div>\n        <div class="'+s+'body"></div>\n    </div>',d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=o.default.extend({header:!0,$target:(0,r.default)("body"),textContent:""},e);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:e.modal?s+"modal-background":s+"wrapper",rootElement:e.$el}));return n._initInstance(e),n._initDOM(e),n._initDOMEvent(e),n._initEditorEvent(e),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_initInstance",value:function(e){this._$target=e.$target,e.$el&&(this.$el=e.$el,this._isExternalHtmlUse=!0),e.content?this.$content=(0,r.default)(e.content):this.$content=e.textContent,this.options=e}},{key:"_initDOM",value:function(){this._initLayout(),this._isExternalHtmlUse||(o.default.isExisty(this.options.title)&&this.setTitle(this.options.title),this.setContent(this.$content));var e=this.options.headerButtons;if(e){this.$el.find("."+s+"close-button").remove();var t=this.$el.find("."+s+"header-buttons");t.empty(),t.append((0,r.default)(e))}this.options.css&&this.$el.css(this.options.css)}},{key:"_initDOMEvent",value:function(){var e=this,t=this.options,n=t.openerCssQuery,i=t.closerCssQuery;n&&(0,r.default)(n).on("click."+this._id,function(){return e.show()}),i&&(0,r.default)(i).on("click."+this._id,function(){return e.hide()}),this.on("click ."+s+"close-button",function(){return e.hide()})}},{key:"_initEditorEvent",value:function(){}},{key:"_initLayout",value:function(){var e=this.options;if(this._isExternalHtmlUse)this.hide(),this._$target.append(this.$el);else{var t=e.modal?c:u;this.$el.html(t),this.$el.addClass(e.className),this.hide(),this._$target.append(this.$el),this.$body=this.$el.find("."+s+"body"),e.header||this.$el.find("."+s+"header").remove()}}},{key:"setContent",value:function(e){this.$body.empty(),this.$body.append(e)}},{key:"setTitle",value:function(e){var t=this.$el.find("."+s+"title");t.empty(),t.append(e)}},{key:"getTitleElement",value:function(){return this.$el.find("."+s+"title").get(0)}},{key:"hide",value:function(){this.$el.css("display","none"),this._isShow=!1,this.trigger("hidden",this)}},{key:"show",value:function(){this.$el.css("display","block"),this._isShow=!0,this.trigger("shown",this)}},{key:"isShow",value:function(){return this._isShow}},{key:"remove",value:function(){var e=this.options,t=e.openerCssQuery,n=e.closerCssQuery;this.trigger("remove",this),this.off(),t&&(0,r.default)(t).off("."+this._id),n&&(0,r.default)(n).off("."+this._id),this.$el.remove(),this.$el=null}},{key:"setFitToWindow",value:function(e){this.$el.toggleClass("fit-window",e)}},{key:"isFitToWindow",value:function(){return this.$el.hasClass("fit-window")}},{key:"toggleFitToWindow",value:function(){var e=!this.isFitToWindow();return this.setFitToWindow(e),e}}]),t}();t.default=d},function(e,t){e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeBlockManager=void 0;var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(32),a=(i=o)&&i.__esModule?i:{default:i};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._replacers={}}return r(e,[{key:"setReplacer",value:function(e,t){this._replacers[e]=t}},{key:"getReplacer",value:function(e){return this._replacers[e]}},{key:"createCodeBlockHtml",value:function(e,t){var n=this.getReplacer(e);return n?n(t,e):a.default.getLanguage(e)?a.default.highlight(e,t).value:function(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}(t,!1)}}],[{key:"getHighlightJSLanguages",value:function(){return a.default.listLanguages()}}]),e}();t.CodeBlockManager=l,t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var l=-1;var s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=o.default.extend({tagName:"div"},t),this.tagName=t.tagName,this.className=t.className,this._id=l+=1,this._setRootElement(t.rootElement)}return i(e,[{key:"on",value:function(e,t){var n=this;o.default.isObject(e)?o.default.forEach(e,function(e,t){n._addEvent(t,e)}):this._addEvent(e,t)}},{key:"_addEvent",value:function(e,t){var n=this._parseEventType(e),i=n.event,r=n.selector;r?this.$el.on(i,r,t):this.$el.on(i,t)}},{key:"off",value:function(e,t){if(e){var n=this._parseEventType(e),i=n.event,r=n.selector;r?this.$el.off(i,r,t):this.$el.off(i,t)}else this.$el.off()}},{key:"_parseEventType",value:function(e){var t=e.split(" ");return{event:t.shift(),selector:t.join(" ")}}},{key:"_setRootElement",value:function(e){var t=this.tagName,n=this.className;e||(n=n||"uic"+this._id,e=(0,r.default)("<"+t+' class="'+n+'"/>')),this.$el=e}},{key:"trigger",value:function(){var e;(e=this.$el).trigger.apply(e,arguments)}},{key:"_getEventNameWithNamespace",value:function(e){var t=e.split(" ");return t[0]+=".uicEvent"+this._id,t.join(" ")}},{key:"remove",value:function(){this.$el&&this.$el.remove()}},{key:"destroy",value:function(){var e=this;this.remove(),o.default.forEachOwnProperties(this,function(t,n){e[n]=null})}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),r=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var a=new RegExp("^(abbr|align|alt|axis|bgcolor|border|cellpadding|cellspacing|class|clear|color|cols|compact|coords|dir|face|headers|height|hreflang|hspace|ismap|lang|language|nohref|nowrap|rel|rev|rows|rules|scope|scrolling|shape|size|span|start|summary|tabindex|target|title|type|valign|value|vspace|width|checked|mathvariant|encoding|id|name|background|cite|href|longdesc|src|usemap|xlink:href|data-+|checked|style)","g"),l=new RegExp("^(accent-height|accumulate|additive|alphabetic|arabic-form|ascent|baseProfile|bbox|begin|by|calcMode|cap-height|class|color|color-rendering|content|cx|cy|d|dx|dy|descent|display|dur|end|fill|fill-rule|font-family|font-size|font-stretch|font-style|font-variant|font-weight|from|fx|fy|g1|g2|glyph-name|gradientUnits|hanging|height|horiz-adv-x|horiz-origin-x|ideographic|k|keyPoints|keySplines|keyTimes|lang|marker-end|marker-mid|marker-start|markerHeight|markerUnits|markerWidth|mathematical|max|min|offset|opacity|orient|origin|overline-position|overline-thickness|panose-1|path|pathLength|points|preserveAspectRatio|r|refX|refY|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|rotate|rx|ry|slope|stemh|stemv|stop-color|stop-opacity|strikethrough-position|strikethrough-thickness|stroke|stroke-dasharray|stroke-dashoffset|stroke-linecap|stroke-linejoin|stroke-miterlimit|stroke-opacity|stroke-width|systemLanguage|target|text-anchor|to|transform|type|u1|u2|underline-position|underline-thickness|unicode|unicode-range|units-per-em|values|version|viewBox|visibility|width|widths|x|x-height|x1|x2|xlink:actuate|xlink:arcrole|xlink:role|xlink:show|xlink:title|xlink:type|xml:base|xml:lang|xml:space|xmlns|xmlns:xlink|y|y1|y2|zoomAndPan)","g");t.default=function(e,t){var n=(0,i.default)("<div />");return e=e.replace(/<!--[\s\S]*?-->/g,""),n.append(e),function(e){e.find("script, iframe, textarea, form, button, select, meta, style, link, title").remove()}(n),function(e){e.find("*").each(function(e,t){var n=t.attributes,i=r.default.toArray(n).filter(function(e){var t=e.name.match(a),n=e.name.match(l);return!t&&!n});r.default.forEachArray(i,function(e){n.getNamedItem(e.name)&&n.removeNamedItem(e.name)})})}(n),function(e,t){var n=void 0;if(t)n=e[0].innerHTML;else{for(var i=document.createDocumentFragment(),o=r.default.toArray(e[0].childNodes),a=o.length,l=0;l<a;l+=1)i.appendChild(o[l]);n=i}return n}(n,t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i};var l=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})(\/([^\s]*))?$/g,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventManager=t,this._initEvent(),this._initDefaultImageImporter()}return r(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("drop",function(t){var n=t.data.dataTransfer&&t.data.dataTransfer.files;e._processBlobItems(n,t.data)}),this.eventManager.listen("willPaste",function(t){var n=t.data.fragment.querySelectorAll("*");if(1===n.length&&"IMG"===n[0].tagName&&/^data:image/.test(n[0].src)){t.data.preventDefault();var i=function(e){for(var t=atob(e.split(",")[1]),n=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(t.length),r=new Uint8Array(i),o=0;o<t.length;o+=1)r[o]=t.charCodeAt(o);return new Blob([i],{type:n})}(n[0].src);e._emitAddImageBlobHook(i,"paste")}}),this.eventManager.listen("paste",function(t){e._processClipboard(t.data)}),this.eventManager.listen("pasteBefore",function(t){e._decodeURL(t)})}},{key:"_initDefaultImageImporter",value:function(){this.eventManager.listen("addImageBlobHook",function(e,t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)})}},{key:"_emitAddImageBlobHook",value:function(e,t){var n=this;this.eventManager.emit("addImageBlobHook",e,function(t,i){n.eventManager.emit("command","AddImage",{imageUrl:t,altText:i||e.name||"image"})},t)}},{key:"_decodeURL",value:function(t){var n=e.decodeURIGraceful,i=e.encodeMarkdownCharacters;if("markdown"===t.source&&t.data.text){var r=t.data.text,o=r[0];1===r.length&&o.match(l)&&(o=i(o=n(o)),t.data.update(null,null,[o]))}else if("wysiwyg"===t.source){var a=t.$clipboardContainer.get(0),s=a.childNodes[0],u=s.innerText;1===a.childNodes.length&&"A"===s.tagName&&u.match(l)&&(s.innerText=n(u),s.href=i(s.href))}}},{key:"_processClipboard",value:function(e){var t=e.clipboardData||window.clipboardData,n=t&&t.items,i=t.types;n&&i&&1===i.length&&-1!==a.default.inArray("Files",[].slice.call(i))&&this._processBlobItems(n,e)}},{key:"_processBlobItems",value:function(e,t){var n=this;e&&a.default.forEachArray(e,function(e){if(-1!==e.type.indexOf("image")){t.preventDefault(),t.stopPropagation(),t.codemirrorIgnore=!0;var i=e.name?e:e.getAsFile();return n._emitAddImageBlobHook(i,t.type),!1}return!0})}}],[{key:"decodeURIGraceful",value:function(e){var t=e.split(" "),n=[],i=void 0;return a.default.forEachArray(t,function(e){try{i=(i=decodeURIComponent(e)).replace(/ /g,"%20")}catch(t){i=e}return n.push(i)}),n.join(" ")}},{key:"encodeMarkdownCharacters",value:function(e){return e.replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\[/g,"%5B").replace(/\]/g,"%5D").replace(/</g,"%3C").replace(/>/g,"%3E")}},{key:"escapeMarkdownCharacters",value:function(e){return e.replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/</g,"\\<").replace(/>/g,"\\>")}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(1)),o=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:t.name};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r.default.extend({className:t.className},e)));return n._name=e.name,n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"getName",value:function(){return this._name}}]),t}();Object.defineProperty(l,"name",{enumerable:!0,writable:!0,value:"item"}),Object.defineProperty(l,"className",{enumerable:!0,writable:!0,value:"tui-toolbar-item"}),t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(13),a=(i=o)&&i.__esModule?i:{default:i};var l=function(e){function t(e,n,i,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,r,o));return a._initEvent(),a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),r(t,[{key:"_initEvent",value:function(){var e=this,t="";this.eventManager.listen("contentChangedFromMarkdown",function(n){t=n.getValue(),e.isVisible()&&e.lazyRunner.run("refresh",t)}),this.eventManager.listen("previewNeedsRefresh",function(n){e.refresh(n||t)}),this.$el.on("scroll",function(t){e.eventManager.emit("scroll",{source:"preview",data:t})})}},{key:"render",value:function(e){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e),this.eventManager.emit("previewRenderAfter",this)}},{key:"remove",value:function(){this.$el.off("scroll"),this.$el=null}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(20));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t,n,i,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:800;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventManager=n,this.convertor=i,this.$el=t,this.isViewer=!!r,this._initContentSection(),this.lazyRunner=new o.default,this.lazyRunner.registerLazyRunFunction("refresh",this.refresh,a,this)}return i(e,[{key:"_initContentSection",value:function(){this._$previewContent=(0,r.default)('<div class="tui-editor-contents" />'),this.$el.append(this._$previewContent)}},{key:"refresh",value:function(e){this.render(this.convertor.toHTMLWithCodeHightlight(e))}},{key:"getHTML",value:function(){return this._$previewContent.html()}},{key:"setHTML",value:function(e){this._$previewContent.html(e)}},{key:"render",value:function(e){var t=this._$previewContent;e=this.eventManager.emit("previewBeforeHook",e)||e,t.empty(),t.html(e)}},{key:"setHeight",value:function(e){this.$el.get(0).style.height=e+"px"}},{key:"setMinHeight",value:function(e){this.$el.get(0).style.minHeight=e+"px"}},{key:"isVisible",value:function(){return"none"!==this.$el.css("display")}}]),e}();t.default=l},function(e,t,n){"use strict";var i=/Mac/.test(navigator.platform);e.exports={isMac:i}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i};var l=["previewBeforeHook","previewRenderAfter","previewNeedsRefresh","addImageBlobHook","setMarkdownAfter","contentChangedFromWysiwyg","changeFromWysiwyg","contentChangedFromMarkdown","changeFromMarkdown","change","changeModeToWysiwyg","changeModeToMarkdown","changeModeBefore","changeMode","changePreviewStyle","changePreviewTabPreview","changePreviewTabWrite","openPopupAddLink","openPopupAddImage","openPopupAddTable","openPopupTableUtils","openHeadingSelect","openPopupCodeBlockLanguages","openPopupCodeBlockEditor","openDropdownToolbar","closePopupCodeBlockLanguages","closePopupCodeBlockEditor","closeAllPopup","command","addCommandBefore","htmlUpdate","markdownUpdate","renderedHtmlUpdated","removeEditor","convertorAfterMarkdownToHtmlConverted","convertorBeforeHtmlToMarkdownConverted","convertorAfterHtmlToMarkdownConverted","stateChange","wysiwygSetValueAfter","wysiwygSetValueBefore","wysiwygGetValueBefore","wysiwygProcessHTMLText","wysiwygRangeChangeAfter","wysiwygKeyEvent","scroll","click","mousedown","mouseover","mouseout","mouseup","contextmenu","keydown","keyup","keyMap","load","focus","blur","paste","pasteBefore","willPaste","copy","copyBefore","copyAfter","cut","cutAfter","drop","show","hide"],s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.events=new a.default.Map,this.TYPE=new a.default.Enum(l)}return r(e,[{key:"listen",value:function(e,t){var n=this._getTypeInfo(e),i=this.events.get(n.type)||[];if(!this._hasEventType(n.type))throw new Error("There is no event type "+n.type);n.namespace&&(t.namespace=n.namespace),i.push(t),this.events.set(n.type,i)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=this._getTypeInfo(i),o=this.events.get(r.type),l=void 0;return o&&a.default.forEach(o,function(e){var n=e.apply(void 0,t);a.default.isUndefined(n)||(l=l||[]).push(n)}),l}},{key:"emitReduce",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t.shift(),r=this.events.get(i);return r&&a.default.forEach(r,function(e){var n=e.apply(void 0,t);a.default.isFalsy(n)||(t[0]=n)}),t[0]}},{key:"_getTypeInfo",value:function(e){var t=e.split(".");return{type:t[0],namespace:t[1]}}},{key:"_hasEventType",value:function(e){return!a.default.isUndefined(this.TYPE[this._getTypeInfo(e).type])}},{key:"addEventType",value:function(e){if(this._hasEventType(e))throw new Error("There is already have event type "+e);this.TYPE.set(e)}},{key:"removeEventHandler",value:function(e,t){var n=this,i=this._getTypeInfo(e),r=i.type,o=i.namespace;r&&t?this._removeEventHandlerWithHandler(r,t):r&&!o?this.events.delete(r):!r&&o?this.events.forEach(function(e,t){n._removeEventHandlerWithTypeInfo(t,o)}):r&&o&&this._removeEventHandlerWithTypeInfo(r,o)}},{key:"_removeEventHandlerWithHandler",value:function(e,t){var n=this.events.get(e)||[],i=n.indexOf(t);i>=0&&n.splice(i,1)}},{key:"_removeEventHandlerWithTypeInfo",value:function(e,t){var n=[],i=this.events.get(e);i&&(i.map(function(e){return e.namespace!==t&&n.push(e),null}),this.events.set(e,n))}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exts=new a.default.Map}return r(e,[{key:"defineExtension",value:function(e,t){this.exts.set(e,t)}},{key:"applyExtension",value:function(e,t){var n=this;t&&t.forEach(function(t){var i=a.default.isObject(t),r=i?t.name:t;if(n.exts.has(r)){var o=n.exts.get(r);i?o(e,t):o(e)}})}}]),e}();t.default=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=y(n(0)),o=y(n(1)),a=y(n(22)),l=y(n(23)),s=y(n(9)),u=y(n(24)),c=y(n(25)),d=y(n(26)),f=y(n(27)),h=y(n(28)),p=y(n(29)),g=y(n(30)),v=n(31),m=y(n(7));function y(e){return e&&e.__esModule?e:{default:e}}var b=new a.default({html:!0,breaks:!0,quotes:"\u201c\u201d\u2018\u2019",langPrefix:"lang-",highlight:function(e,t){return m.default.createCodeBlockHtml(t,e)}}),_=new a.default({html:!0,breaks:!0,quotes:"\u201c\u201d\u2018\u2019",langPrefix:"lang-"});b.block.ruler.at("code",d.default),b.block.ruler.at("table",h.default,{alt:["paragraph","reference"]}),b.block.ruler.at("blockquote",f.default,{alt:["paragraph","reference","blockquote","list"]}),b.block.ruler.at("html_block",p.default,{alt:["paragraph","reference","blockquote"]}),b.inline.ruler.at("backticks",g.default),b.use(u.default),b.use(c.default),b.renderer.rules.softbreak=function(e,t,n){if(!n.breaks)return"\n";var i=e[t-1];return i&&"html_inline"===i.type&&"<br>"===i.content?"":n.xhtmlOut?"<br />\n":"<br>\n"},_.block.ruler.at("code",d.default),_.block.ruler.at("table",h.default,{alt:["paragraph","reference"]}),_.block.ruler.at("blockquote",f.default,{alt:["paragraph","reference","blockquote","list"]}),_.block.ruler.at("html_block",p.default,{alt:["paragraph","reference","blockquote"]}),_.inline.ruler.at("backticks",g.default),_.use(u.default),_.use(c.default);var k=new RegExp("(\\\\<|<)([A-Za-z][A-Za-z0-9\\-]*(?:\\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\\s*=\\s*(?:[^\"'=<>`\\x00-\\x20]+|'[^']*'|\"[^\"]*\"))?)*\\s*)(\\/?>)","g"),w=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.eventManager=t}return i(e,[{key:"_markdownToHtmlWithCodeHighlight",value:function(e,t){return e=this._replaceImgAttrToDataProp(e),b.render(e,t)}},{key:"_markdownToHtml",value:function(e,t){return e=e.replace(k,function(e,t,n,i){return"\\"!==e[0]?""+t+n+" data-tomark-pass "+i:e}),e=this._replaceImgAttrToDataProp(e),_.render(e,t)}},{key:"_replaceImgAttrToDataProp",value:function(e){for(var t=/(<img[^>]*)(onerror\s*=\s*[\\"']?[^\\"']*[\\"']?)(.*)/i;t.exec(e);)e=e.replace(t,"$1$3");return e}},{key:"_removeBrToMarkPassAttributeInCode",value:function(e){var t=(0,r.default)("<div />");return t.html(e),t.find("code, pre").each(function(e,t){var n=(0,r.default)(t);n.html(n.html().replace(/ data-tomark-pass &gt;/g,"&gt;"))}),e=t.html()}},{key:"toHTMLWithCodeHightlight",value:function(e){var t=this._markdownToHtmlWithCodeHighlight(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t)}},{key:"toHTML",value:function(e){var t=this._markdownToHtml(e);return t=this.eventManager.emitReduce("convertorAfterMarkdownToHtmlConverted",t),t=this._removeBrToMarkPassAttributeInCode(t)}},{key:"initHtmlSanitizer",value:function(){this.eventManager.listen("convertorAfterMarkdownToHtmlConverted",function(e){return(0,s.default)(e,!0)})}},{key:"setLinkAttribute",value:function(e){var t=Object.keys(e),n=function(n,i){t.forEach(function(t){n[i].attrPush([t,e[t]])})};b.use(v.linkAttribute,n),_.use(v.linkAttribute,n)}},{key:"toMarkdown",value:function(e,t){var n=[];e=this.eventManager.emitReduce("convertorBeforeHtmlToMarkdownConverted",e);var i=(0,l.default)(this._appendAttributeForBrIfNeed(e),t);return i=this.eventManager.emitReduce("convertorAfterHtmlToMarkdownConverted",i),o.default.forEach(i.split("\n"),function(e,t){/`[^`]*<br>[^`]*`/gi.test(e)||/^\|[^|]*\|/gi.test(e)||(e=e.replace(/<br>/gi,"<br>\n")),n[t]=e}),n.join("\n")}},{key:"_appendAttributeForBrIfNeed",value:function(e){var t=new RegExp(/([^>]|<\/a>|<\/code>|<\/span>|<\/b>|<\/i>|<\/s>|<img [^>]*>)/.source+/<br data-tomark-pass \/><br data-tomark-pass \/>/.source,"g");return e=(e=(e=(e=(e=e.replace(/<br>/gi,"<br />")).replace(/<br \/><br \/>/gi,"<br data-tomark-pass /><br data-tomark-pass />")).replace(/<br data-tomark-pass="">/gi,"<br data-tomark-pass />")).replace(/<br data-tomark-pass \/><br \/>(.)/gi,"<br data-tomark-pass /><br data-tomark-pass />$1")).replace(t,"$1<br /><br />")}}],[{key:"getMarkdownitHighlightRenderer",value:function(){return b}},{key:"getMarkdownitRenderer",value:function(){return _}}]),e}();t.default=w},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(11)),o=a(n(35));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{tagName:"button",name:t.name};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:e.name,tagName:"button",className:e.className+" "+t.className,rootElement:e.$el}));return n._setOptions(e),n._render(),n.on("click",n._onClick.bind(n)),e.tooltip&&(n.on("mouseover",n._onOver.bind(n)),n.on("mouseout",n._onOut.bind(n))),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),i(t,[{key:"setTooltip",value:function(e){this._tooltip=e}},{key:"_setOptions",value:function(e){this._command=e.command,this._event=e.event,this._text=e.text,this._tooltip=e.tooltip,this._style=e.style,this._state=e.state}},{key:"_render",value:function(){this.$el.text(this._text),this.$el.attr("type","button"),this._style&&this.$el.attr("style",this._style)}},{key:"_onClick",value:function(){this.isEnabled()&&(this._command?this.trigger("command",this._command):this._event&&this.trigger("event",this._event),this.trigger("clicked"))}},{key:"_onOver",value:function(){this.isEnabled()&&o.default.show(this.$el,this._tooltip)}},{key:"_onOut",value:function(){o.default.hide()}},{key:"enable",value:function(){this.$el.attr("disabled",!1)}},{key:"disable",value:function(){this.$el.attr("disabled",!0)}},{key:"isEnabled",value:function(){return!this.$el.attr("disabled")}}]),t}();Object.defineProperty(l,"name",{enumerable:!0,writable:!0,value:"button"}),Object.defineProperty(l,"className",{enumerable:!0,writable:!0,value:"tui-toolbar-icons"}),t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=["","","","CANCEL","","","HELP","","BACK_SPACE","TAB","","","CLEAR","ENTER","ENTER_SPECIAL","","","","","PAUSE","CAPS_LOCK","KANA","EISU","JUNJA","FINAL","HANJA","","ESCAPE","CONVERT","NONCONVERT","ACCEPT","MODECHANGE","SPACE","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","SELECT","PRINT","EXECUTE","PRINTSCREEN","INSERT","DELETE","","0","1","2","3","4","5","6","7","8","9",":",";","<","=",">","?","AT","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","","","CONTEXT_MENU","","SLEEP","NUMPAD0","NUMPAD1","NUMPAD2","NUMPAD3","NUMPAD4","NUMPAD5","NUMPAD6","NUMPAD7","NUMPAD8","NUMPAD9","MULTIPLY","ADD","SEPARATOR","SUBTRACT","DECIMAL","DIVIDE","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","F13","F14","F15","F16","F17","F18","F19","F20","F21","F22","F23","F24","","","","","","","","","NUM_LOCK","SCROLL_LOCK","WIN_OEM_FJ_JISHO","WIN_OEM_FJ_MASSHOU","WIN_OEM_FJ_TOUROKU","WIN_OEM_FJ_LOYA","WIN_OEM_FJ_ROYA","","","","","","","","","","@","!",'"',"#","$","%","&","_","(",")","*","+","|","-","{","}","~","","","","","VOLUME_MUTE","VOLUME_DOWN","VOLUME_UP","","",";","=",",","-",".","/","`","","","","","","","","","","","","","","","","","","","","","","","","","","","[","\\","]","'","","META","ALTGR","","WIN_ICO_HELP","WIN_ICO_00","","WIN_ICO_CLEAR","","","WIN_OEM_RESET","WIN_OEM_JUMP","WIN_OEM_PA1","WIN_OEM_PA2","WIN_OEM_PA3","WIN_OEM_WSCTRL","WIN_OEM_CUSEL","WIN_OEM_ATTN","WIN_OEM_FINISH","WIN_OEM_COPY","WIN_OEM_AUTO","WIN_OEM_ENLW","WIN_OEM_BACKTAB","ATTN","CRSEL","EXSEL","EREOF","PLAY","ZOOM","","PA1","WIN_OEM_CLEAR",""],o=void 0,a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._setSplitter(t)}return i(e,[{key:"_setSplitter",value:function(e){var t=e?e.splitter:"+";this._splitter=t}},{key:"convert",value:function(e){var t=[];e.shiftKey&&t.push("SHIFT"),e.ctrlKey&&t.push("CTRL"),e.metaKey&&t.push("META"),e.altKey&&t.push("ALT");var n=this._getKeyCodeChar(e.keyCode);return n&&t.push(n),t.join(this._splitter)}},{key:"_getKeyCodeChar",value:function(e){return r[e]}}],[{key:"getSharedInstance",value:function(){return o||(o=new e),o}},{key:"keyCode",value:function(e){return r.indexOf(e)}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i};var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.globalTOID=null,this.lazyRunFunctions={}}return r(e,[{key:"run",value:function(e,t,n,i){var r=void 0;return a.default.isString(e)?r=this._runRegisteredRun(e,t,n,i):(r=this._runSingleRun(e,t,n,i,this.globalTOID),this.globalTOID=r),r}},{key:"registerLazyRunFunction",value:function(e,t,n,i){i=i||this,this.lazyRunFunctions[e]={fn:t,delay:n,context:i,TOID:null}}},{key:"_runSingleRun",value:function(e,t,n,i,r){return this._clearTOIDIfNeed(r),r=setTimeout(function(){e.call(n,t)},i)}},{key:"_runRegisteredRun",value:function(e,t,n,i){var r=this.lazyRunFunctions[e],o=r.fn,a=r.TOID;return i=i||r.delay,n=n||r.context,a=this._runSingleRun(o,t,n,i,a),r.TOID=a,a}},{key:"_clearTOIDIfNeed",value:function(e){e&&clearTimeout(e)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(1),a=(i=o)&&i.__esModule?i:{default:i};var l=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.type=n,i&&this.setKeyMap(i)}return r(e,[{key:"getName",value:function(){return this.name}},{key:"getType",value:function(){return this.type}},{key:"isMDType",value:function(){return this.type===e.TYPE.MD}},{key:"isWWType",value:function(){return this.type===e.TYPE.WW}},{key:"isGlobalType",value:function(){return this.type===e.TYPE.GB}},{key:"setKeyMap",value:function(e,t){this.keyMap=[e,t]}}]),e}();l.factory=function(e,t){var n=void 0;"markdown"===e?n=l.TYPE.MD:"wysiwyg"===e?n=l.TYPE.WW:"global"===e&&(n=l.TYPE.GB);var i=new l(t.name,n);return a.default.extend(i,t),i},l.TYPE={MD:0,WW:1,GB:2},t.default=l},function(e,t){e.exports=i},function(e,t){e.exports=r},function(e,t,n){"use strict";function i(e){var t=!1;return 0!==e.content.indexOf("[x]")&&0!==e.content.indexOf("[X]")||(t=!0),t}function r(e,t,n){var i=e.attrIndex(t),r=[t,n];i<0?e.attrPush(r):e.attrs[i]=r}function o(e,t){return"inline"===e[t].type&&"paragraph_open"===e[t-1].type&&"list_item_open"===e[t-2].type&&(0===e[t].content.indexOf("[ ]")||0===e[t].content.indexOf("[x]")||0===e[t].content.indexOf("[X]"))}e.exports=function(e){e.core.ruler.after("inline","tui-task-list",function(e){var t,n,a,l=e.tokens;for(n=2;n<l.length;n+=1)o(l,n)&&(t=i(l[n])?"task-list-item checked":"task-list-item",(a=l[n]).content=a.content.slice(4),a.children[0].content=a.children[0].content.slice(4),r(l[n-2],"class",t),r(l[n-2],"data-te-task",""))})}},function(e,t,n){"use strict";function i(e,t,n){var i=e.attrIndex(t),r=[t,n];i<0?e.attrPush(r):e.attrs[i]=r}e.exports=function(e){e.core.ruler.after("block","tui-code-block",function(e){var t,n,r,o,a,l,s=e.tokens;for(n=0;n<s.length;n+=1)t=s[n],!0===(l=t).block&&"code"===l.tag&&"fence"===l.type&&((r=t.markup.length)>3&&i(t,"data-backticks",r),t.info&&i(t,"data-language",(o=t.info.replace(" ",""),a=!0,o.replace(a?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"))))})}},function(e,t,n){"use strict";e.exports=function(e,t,n){var i,r,o,a=0;if(e.src.split("\n")[t].match(/ {0,3}(?:-|\*|\d\.) /)||e.sCount[t]-e.blkIndent<4)return!1;for(r=i=t+1;i<n;)if(e.isEmpty(i)){if(++a>=2&&"list"===e.parentType)break;i++}else{if(a=0,!(e.sCount[i]-e.blkIndent>=4))break;r=++i}return e.line=r,(o=e.push("code_block","code",0)).content=e.getLines(t,r,4+e.blkIndent,!0),o.map=[t,e.line],!0}},function(e,t,n){"use strict";function i(e){switch(e){case 9:case 32:return!0}return!1}e.exports=function(e,t,n,r){var o,a,l,s,u,c,d,f,h,p,g,v,m,y,b,_,k,w,C,S,T=e.lineMax,E=e.bMarks[t]+e.tShift[t],x=e.eMarks[t],M=e.src.split("\n")[t];if(e.sCount[t]-e.blkIndent>=4)return!1;if(62!==e.src.charCodeAt(E++))return!1;if(M.match(/(?:-|\*|\d+\.) {1,4}(?:> {0,3})[^>]*$/))return!1;if(r)return!0;for(s=h=e.sCount[t]+E-(e.bMarks[t]+e.tShift[t]),32===e.src.charCodeAt(E)?(E++,s++,h++,o=!1,_=!0):9===e.src.charCodeAt(E)?(_=!0,(e.bsCount[t]+h)%4===3?(E++,s++,h++,o=!1):o=!0):_=!1,p=[e.bMarks[t]],e.bMarks[t]=E;E<x&&i(a=e.src.charCodeAt(E));)9===a?h+=4-(h+e.bsCount[t]+(o?1:0))%4:h++,E++;for(g=[e.bsCount[t]],e.bsCount[t]=e.sCount[t]+1+(_?1:0),c=E>=x,y=[e.sCount[t]],e.sCount[t]=h-s,b=[e.tShift[t]],e.tShift[t]=E-e.bMarks[t],w=e.md.block.ruler.getRules("blockquote"),m=e.parentType,e.parentType="blockquote",S=!1,f=t+1;f<n&&(e.sCount[f]<e.blkIndent&&(S=!0),!((E=e.bMarks[f]+e.tShift[f])>=(x=e.eMarks[f])));f++)if(62!==e.src.charCodeAt(E++)||S){if(c)break;for(k=!1,l=0,u=w.length;l<u;l++)if(w[l](e,f,n,!0)){k=!0;break}if(k){e.lineMax=f,0!==e.blkIndent&&(p.push(e.bMarks[f]),g.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]-=e.blkIndent);break}p.push(e.bMarks[f]),g.push(e.bsCount[f]),b.push(e.tShift[f]),y.push(e.sCount[f]),e.sCount[f]=-1}else{for(s=h=e.sCount[f]+E-(e.bMarks[f]+e.tShift[f]),32===e.src.charCodeAt(E)?(E++,s++,h++,o=!1,_=!0):9===e.src.charCodeAt(E)?(_=!0,(e.bsCount[f]+h)%4===3?(E++,s++,h++,o=!1):o=!0):_=!1,p.push(e.bMarks[f]),e.bMarks[f]=E;E<x&&i(a=e.src.charCodeAt(E));)9===a?h+=4-(h+e.bsCount[f]+(o?1:0))%4:h++,E++;c=E>=x,g.push(e.bsCount[f]),e.bsCount[f]=e.sCount[f]+1+(_?1:0),y.push(e.sCount[f]),e.sCount[f]=h-s,b.push(e.tShift[f]),e.tShift[f]=E-e.bMarks[f]}for(v=e.blkIndent,e.blkIndent=0,(C=e.push("blockquote_open","blockquote",1)).markup=">",C.map=d=[t,0],e.md.block.tokenize(e,t,f),(C=e.push("blockquote_close","blockquote",-1)).markup=">",e.lineMax=T,e.parentType=m,d[1]=e.line,l=0;l<b.length;l++)e.bMarks[l+t]=p[l],e.tShift[l+t]=b[l],e.sCount[l+t]=y[l],e.bsCount[l+t]=g[l];return e.blkIndent=v,!0}},function(e,t,n){"use strict";function i(e,t){var n=e.bMarks[t]+e.blkIndent,i=e.eMarks[t];return e.src.substr(n,i-n)}function r(e){var t,n=[],i=0,r=e.length,o=0,a=0,l=!1,s=0;for(t=e.charCodeAt(i);i<r;)96===t&&o%2===0?(l=!l,s=i):124!==t||o%2!==0||l?92===t?o+=1:o=0:(n.push(e.substring(a,i)),a=i+1),(i+=1)===r&&l&&(l=!1,i=s+1),t=e.charCodeAt(i);return n.push(e.substring(a)),n}e.exports=function(e,t,n,o){var a,l,s,u,c,d,f,h,p,g,v,m,y;if(t+2>n)return!1;if(c=t+1,e.sCount[c]<e.blkIndent)return!1;if((s=e.bMarks[c]+e.tShift[c])>=e.eMarks[c])return!1;if(124!==(a=e.src.charCodeAt(s))&&45!==a&&58!==a)return!1;if(l=i(e,t+1),!/^[-:| ]+$/.test(l))return!1;for(d=l.split("|"),p=[],u=0;u<d.length;u+=1){if(!(v=d[u].trim())){if(0===u||u===d.length-1)continue;return!1}if(!/^:?-+:?$/.test(v))return!1;58===v.charCodeAt(v.length-1)?p.push(58===v.charCodeAt(0)?"center":"right"):58===v.charCodeAt(0)?p.push("left"):p.push("")}if(g=p.length,-1===(l=i(e,t).trim()).indexOf("|"))return!1;if((f=(d=r(l.replace(/^\||\|$/g,""))).length)>g)return!1;if(f<g){for(u=0;u<g-f;u+=1)d.push("");f=d.length}if(o)return!0;for((h=e.push("table_open","table",1)).map=m=[t,0],(h=e.push("thead_open","thead",1)).map=[t,t+1],(h=e.push("tr_open","tr",1)).map=[t,t+1],u=0;u<f;u+=1)(h=e.push("th_open","th",1)).map=[t,t+1],p[u]&&(h.attrs=[["align",p[u]]]),(h=e.push("inline","",0)).content=d[u].trim(),h.map=[t,t+1],h.children=[],h=e.push("th_close","th",-1);for(h=e.push("tr_close","tr",-1),h=e.push("thead_close","thead",-1),(h=e.push("tbody_open","tbody",1)).map=y=[t+2,0],c=t+2;c<n&&!(e.sCount[c]<e.blkIndent)&&-1!==(l=i(e,c)).indexOf("|");c+=1){for(d=r(l.replace(/^\||\|\s*$/g,"")),h=e.push("tr_open","tr",1),u=0;u<f;u+=1)h=e.push("td_open","td",1),p[u]&&(h.attrs=[["align",p[u]]]),(h=e.push("inline","",0)).content=d[u]?d[u].trim():"",h.children=[],h=e.push("td_close","td",-1);h=e.push("tr_close","tr",-1)}return h=e.push("tbody_close","tbody",-1),h=e.push("table_close","table",-1),m[1]=y[1]=c,e.line=c,!0}},function(e,t,n){"use strict";var i=[[/^<(script|pre|style)(?=(\s|>|$))/i,/<\/(script|pre|style)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^<("+["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].join("|")+")","i"),/^\/?>$/,!0],[new RegExp("^</?(address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|pre|section|source|title|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?=(\\s|/?>|$))","i"),/^$/,!0],[/^(?:<[A-Za-z][A-Za-z0-9\-]*(?:\s+[a-zA-Z_:][a-zA-Z0-9:._-]*(?:\s*=\s*(?:[^"'=<>`\x00-\x20]+|'[^']*'|"[^"]*"))?)*\s*\/?>|<\/[A-Za-z][A-Za-z0-9\-]*\s*>)\s*$/,/^$/,!1]];e.exports=function(e,t,n,r){var o,a,l,s,u=e.bMarks[t]+e.tShift[t],c=e.eMarks[t];if(!e.md.options.html)return!1;if(60!==e.src.charCodeAt(u))return!1;for(s=e.src.slice(u,c),o=0;o<i.length;o++)if(i[o][0].test(s)){if(5===o)return!1;break}if(o===i.length)return!1;if(r)return i[o][2];if(a=t+1,!i[o][1].test(s))for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(u=e.bMarks[a]+e.tShift[a],c=e.eMarks[a],s=e.src.slice(u,c),i[o][1].test(s)){0!==s.length&&a++;break}return e.line=a,(l=e.push("html_block","",0)).map=[t,a],l.content=e.getLines(t,a,e.blkIndent,!0),!0}},function(e,t,n){"use strict";e.exports=function(e,t){var n,i,r,o,a,l,s=e.pos;if(96!==e.src.charCodeAt(s))return!1;for(n=s,s++,i=e.posMax;s<i&&96===e.src.charCodeAt(s);)s++;for(r=e.src.slice(n,s),o=a=s;-1!==(o=e.src.indexOf("`",a));){for(a=o+1;a<i&&96===e.src.charCodeAt(a);)a++;if(a-o===r.length)return t||((l=e.push("code_inline","code",0)).markup=r,l.content=e.src.slice(s,o).replace(/[ \n]+/g," ").trim(),l.attrSet("data-backticks",l.markup.length)),e.pos=a,!0}return t||(e.pending+=r),e.pos+=r.length,!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.linkAttribute=function(e,t){!function(e,t,n,i){e.core.ruler.push(t,function(e){var t,r,o;for(r=e.tokens.length-1;r>=0;r--)if("inline"===e.tokens[r].type)for(t=(o=e.tokens[r].children).length-1;t>=0;t--)o[t].type===n&&i(o,t)})}(e,"url_attribute","link_open",t)}},function(e,t){e.exports=o},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=p(n(0)),o=p(n(1)),a=p(n(12)),l=p(n(15)),s=p(n(2)),u=p(n(16)),c=p(n(17)),d=p(n(4)),f=n(7),h=p(f);function p(e){return e&&e.__esModule?e:{default:e}}var g=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=r.default.extend({useDefaultHTMLSanitizer:!0,codeBlockLanguages:f.CodeBlockManager.getHighlightJSLanguages(),customConvertor:null},t),this.eventManager=new l.default,this.commandManager=new s.default(this),this.options.customConvertor?this.convertor=new this.options.customConvertor(this.eventManager):this.convertor=new c.default(this.eventManager),this.toMarkOptions=null,this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&o.default.forEach(this.options.hooks,function(e,t){n.addHook(t,e)}),this.options.events&&o.default.forEach(this.options.events,function(e,t){n.on(t,e)});var i=this.options,d=i.el,h=i.initialValue,p=d.innerHTML;d.innerHTML="",this.preview=new a.default((0,r.default)(d),this.eventManager,this.convertor,!0),this.preview.$el.on("mousedown",r.default.proxy(this._toggleTask,this)),u.default.applyExtension(this,this.options.exts),h?this.setValue(h):p&&this.preview.setHTML(p),this.eventManager.emit("load",this)}return i(e,[{key:"_toggleTask",value:function(e){var t=getComputedStyle(e.target,":before");e.target.hasAttribute("data-te-task")&&d.default.isInsideTaskBox(t,e.offsetX,e.offsetY)&&((0,r.default)(e.target).toggleClass("checked"),this.eventManager.emit("change",{source:"viewer",data:e}))}},{key:"setMarkdown",value:function(e){this.markdownValue=e=e||"",this.preview.refresh(this.markdownValue),this.eventManager.emit("setMarkdownAfter",this.markdownValue)}},{key:"setValue",value:function(e){this.setMarkdown(e)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"remove",value:function(){this.eventManager.emit("removeEditor"),this.preview.$el.off("mousedown",r.default.proxy(this._toggleTask,this)),this.preview.remove(),this.options=null,this.eventManager=null,this.commandManager=null,this.convertor=null,this.preview=null}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"isViewer",value:function(){return!0}},{key:"isMarkdownMode",value:function(){return!1}},{key:"isWysiwygMode",value:function(){return!1}}],[{key:"defineExtension",value:function(e,t){u.default.defineExtension(e,t)}}]),e}();g.isViewer=!0,g.domUtils=d.default,g.codeBlockManager=h.default,g.markdownitHighlight=c.default.getMarkdownitHighlightRenderer(),g.markdownit=c.default.getMarkdownitRenderer(),g.i18n=null,g.Button=null,g.WwCodeBlockManager=null,g.WwTableManager=null,g.WwTableSelectionManager=null,e.exports=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=t.removeSyntax=function(e,t){var n=t.length;return e.substr(n,e.length-2*n)},r=t.appendSyntax=function(e,t){return""+t+e+t},o=t.expandReplace=function(e,t,n,i,r){var o=function(e,t){var n=e.start,i=e.end,r=void 0;n.ch>=t&&(r={from:{line:n.line,ch:n.ch-t},to:{line:i.line,ch:i.ch+t}});return r}(t,n),a=!1;if(o){var l=o.from,s=o.to,u=e.getRange(l,s);i(u)&&(e.setSelection(l,s),e.replaceSelection(r(u),"around"),a=!0)}return a},a=t.replace=function(e,t,n,i){var r=!1;return n(t)&&(e.replaceSelection(i(t),"around"),r=!0),r};t.changeSyntax=function(e,t,n,l,s){var u=e.getCursor(),c=u.line,d=u.ch,f=e.getSelection(),h=n.length,p=function(e){return l.test(e)};if(!o(e,t,h,p,function(e){return i(e,n)})&&!a(e,f,p,function(e){return i(e,n)})){var g=f.replace(s,"$1");e.replaceSelection(r(g,n),"around")}var v=e.getSelection(),m=d;f||(p(v)?m+=h:m-=h,e.setCursor(c,m))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};var l='<div class="tui-tooltip"><div class="arrow"></div><span class="text"></span></span></div>',s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=(0,a.default)(l),this.$el.appendTo("body"),this.hide()}return r(e,[{key:"show",value:function(e,t){this.$el.css({top:e.offset().top+e.height()+13,left:e.offset().left+3}).find(".text").html(t).end().show()}},{key:"hide",value:function(){this.$el.hide()}},{key:"remove",value:function(){this.$el.remove()}}]),e}();t.default=new s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(6));function a(e){return e&&e.__esModule?e:{default:e}}n(48),n(49),n(50),n(51),n(52),n(53),n(54);var l=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.editorContainerEl=t,this.cm=null,this._init(n)}return i(e,[{key:"_init",value:function(e){var t=document.createElement("textarea");this.editorContainerEl.appendChild(t),e=r.default.extend(!0,{lineWrapping:!0,theme:"default",extraKeys:{"Shift-Tab":"indentLess","Alt-Up":"replaceLineTextToUpper","Alt-Down":"replaceLineTextToLower"},indentUnit:4,cursorScrollMargin:12,specialCharPlaceholder:function(){return document.createElement("span")}},e),this.cm=o.default.fromTextArea(t,e)}},{key:"getCurrentRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{from:e,to:t,collapsed:e.line===t.line&&e.ch===t.ch}}},{key:"focus",value:function(){this.cm.focus()}},{key:"blur",value:function(){this.cm.getInputField().blur()}},{key:"remove",value:function(){this.cm.toTextArea()}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.cm.setValue(e),t&&this.moveCursorToEnd(),this.cm.doc.clearHistory(),this.cm.refresh()}},{key:"getValue",value:function(){return this.cm.getValue("\n")}},{key:"getEditor",value:function(){return this.cm}},{key:"reset",value:function(){this.setValue("")}},{key:"getCaretPosition",value:function(){return this.cm.cursorCoords()}},{key:"addWidget",value:function(e,t,n,i){i&&(e.ch+=i),this.cm.addWidget(e.end,t,!0,n)}},{key:"replaceSelection",value:function(e,t){t&&this.cm.setSelection(t.from,t.to),this.cm.replaceSelection(e),this.focus()}},{key:"replaceRelativeOffset",value:function(e,t,n){var i=this.cm.getCursor(),r={from:{line:i.line,ch:i.ch+t},to:{line:i.line,ch:i.ch+t+n}};this.replaceSelection(e,r)}},{key:"setHeight",value:function(e){this.getWrapperElement().style.height=e+"px"}},{key:"setMinHeight",value:function(e){this.getWrapperElement().style.minHeight=e+"px"}},{key:"setPlaceholder",value:function(e){e&&this.cm.setOption("placeholder",e)}},{key:"getWrapperElement",value:function(){return this.cm.getWrapperElement()}},{key:"getCursor",value:function(e){return this.cm.getCursor(e)}},{key:"moveCursorToEnd",value:function(){var e=this.getEditor().getDoc(),t=e.lastLine();e.setCursor(t,e.getLine(t).length)}},{key:"moveCursorToStart",value:function(){var e=this.getEditor().getDoc(),t=e.firstLine();e.setCursor(t,0)}},{key:"scrollTop",value:function(e){return e&&this.cm.scrollTo(0,e),this.cm.getScrollInfo().top}},{key:"getRange",value:function(){var e=this.cm.getCursor("from"),t=this.cm.getCursor("to");return{start:{line:e.line,ch:e.ch},end:{line:t.line,ch:t.ch}}}},{key:"on",value:function(e,t){this.cm.on(e,t)}},{key:"off",value:function(e,t){this.cm.off(e,t)}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._managers={},this._editor=t}return i(e,[{key:"addManager",value:function(e,t){t||(t=e,e=null);var n=new t(this._editor);this._managers[e||n.name]=n}},{key:"getManager",value:function(e){return this._managers[e]}},{key:"removeManager",value:function(e){var t=this.getManager(e);t&&(t.destroy&&t.destroy(),delete this._managers[e])}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=o.default.browser.msie&&10===o.default.browser.version,u=o.default.browser.msie&&(10===o.default.browser.version||11===o.default.browser.version),c=o.default.browser.msie?"":"<br>",d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="table",this._lastCellNode=null,this._init()}return i(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.tableID=0}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygRangeChangeAfter.table",function(){var t=e.wwe.getEditor().getSelection(),n=e.wwe.isInTable(t);(e._unwrapBlockInTable(),e._completeTableIfNeed(),n)||e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed();e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygSetValueAfter.table",function(){e._unwrapBlockInTable(),e._insertDefaultBlockBetweenTable()}),this.eventManager.listen("wysiwygProcessHTMLText.table",function(e){return e.replace(/<br \/>(<\/td>|<\/th>)/g,"$1")}),this.eventManager.listen("cut.table",function(){var t=e.wwe.componentManager.getManager("tableSelection"),n=t.getSelectedCells();n.length&&n.get().forEach(function(e){return(0,r.default)(e).html(c)}),t.removeClassAttrbuteFromAllCellsIfNeed()}),this.eventManager.listen("copyBefore.table",function(t){var n=t.$clipboardContainer;return e.updateTableHtmlOfClipboardIfNeed(n)})}},{key:"updateTableHtmlOfClipboardIfNeed",value:function(e){var t=this,n=this.wwe.componentManager.getManager("tableSelection");if(n.getSelectedCells().length){n.createRangeBySelectedCells();var i=this.wwe.getEditor().getSelection().cloneContents();(0,r.default)(i).children().each(function(e,n){var i=(0,r.default)(n);t.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===i.find("thead").length&&0===i.find("tbody").length?i.remove():n.previousSibling&&"TABLE"===n.previousSibling.nodeName?n.previousSibling.appendChild(n):(t._completeIncompleteTable(n),"TABLE"!==n.nodeName&&"THEAD"!==n.nodeName&&(0,r.default)(n).closest("table").find("thead").remove()))}),e.append(i),e.find(".te-cell-selected").removeClass("te-cell-selected")}}},{key:"pasteTableData",value:function(e){var t=(0,r.default)(e);this._expandTableIfNeed(t),this._pasteDataIntoTable(t)}},{key:"_initKeyHandler",value:function(){var e=this;this.keyEventHandlers={DEFAULT:function(t,n,i){var r=e.wwe.isInTable(n);r&&!e._isModifierKey(i)?(e._recordUndoStateIfNeed(n),e._removeContentsAndChangeSelectionIfNeed(n,i,t)):!r&&e._lastCellNode&&e._recordUndoStateAndResetCellNode(n),r&&!e._isModifierKeyPushed(t)&&e.wwe.getEditor().modifyDocument(function(){e.wwe.componentManager.getManager("tableSelection").removeClassAttrbuteFromAllCellsIfNeed()})},ENTER:function(t,n){var i=void 0;return e._isAfterTable(n)?(t.preventDefault(),n.setStart(n.startContainer,n.startOffset-1),e.wwe.breakToNewDefaultBlock(n),i=!1):e._isBeforeTable(n)?(t.preventDefault(),e.wwe.breakToNewDefaultBlock(n,"before"),i=!1):e.wwe.isInTable(n)&&(!e._isInList(n.startContainer)&&e._isInStyledText(n)?e.wwe.defer(function(){e._removeBRinStyleText()}):e._isEmptyFirstLevelLI(n)&&e.wwe.defer(function(){var t=e.wwe.getRange().cloneRange(),n=t.startContainer,i=document.createElement("br");n.parentNode.replaceChild(i,n),t.setStartBefore(i),t.collapse(!0),e.wwe.getEditor().setSelection(t)}),e._appendBrIfTdOrThNotHaveAsLastChild(n),i=!1),i},BACK_SPACE:function(t,n,i){return e._handleBackspaceAndDeleteKeyEvent(t,n,i)},DELETE:function(t,n,i){return e._handleBackspaceAndDeleteKeyEvent(t,n,i)},TAB:function(){return e._moveCursorTo("next","cell")},"SHIFT+TAB":function(t){return e._moveCursorTo("previous","cell",t)},UP:function(t){return e._moveCursorTo("previous","row",t)},DOWN:function(t){return e._moveCursorTo("next","row",t)}},o.default.forEach(this.keyEventHandlers,function(t,n){return e.wwe.addKeyEventHandler(n,t)})}},{key:"_isEmptyListItem",value:function(e){var t=e.childNodes;return"LI"===e.nodeName&&1===t.length&&"BR"===t[0].nodeName}},{key:"_isEmptyFirstLevelLI",value:function(e){var t=e.collapsed,n=e.startContainer,i=e.startOffset;return t&&0===i&&this._isEmptyListItem(n)&&a.default.isFirstLevelListItem(n)}},{key:"_isInStyledText",value:function(e){var t=e.startContainer,n=void 0;return n=a.default.isTextNode(t)?t.parentNode:t,e.collapsed&&a.default.isStyledNode(n)}},{key:"_removeBRinStyleText",value:function(){var e=this.wwe.getRange(),t=e.startContainer,n=e.startOffset,i=void 0,r=(i="TD"===t.nodeName?a.default.getChildNodeByOffset(t,n-1):a.default.getParentUntil(t,"TD")).querySelector("br");if(r){var o=i,l=o.parentNode,s=o.nodeName;if("CODE"!==s||r.previousSibling)if("CODE"!==s||r.nextSibling){var u=this._splitByBR(i,r);e.setStart(u,0)}else l.insertBefore(r,i.nextSibling),e.setStart(l,a.default.getNodeOffsetOfParent(r)+1);else l.insertBefore(r,i),e.setStart(i,0);e.collapse(!0),this.wwe.getEditor().setSelection(e)}}},{key:"_splitByBR",value:function(e,t){var n=e.cloneNode(!0),i=document.createElement("br"),r=e.parentNode;a.default.removeNodesByDirection(e,t,!1),t.parentNode.removeChild(t);var o=n.querySelector("br");a.default.removeNodesByDirection(n,o,!0),o.parentNode.removeChild(o),r.insertBefore(n,e.nextSibling),r.insertBefore(i,n);var l=a.default.getLeafNode(n);return a.default.getTextLength(l)||(l.textContent="\u200b"),l}},{key:"_isBeforeTable",value:function(e){return"TABLE"===a.default.getNodeName(a.default.getChildNodeByOffset(e.startContainer,e.startOffset))}},{key:"_isAfterTable",value:function(e){var t=a.default.getPrevOffsetNodeUntil(e.startContainer,e.startOffset);return"TABLE"===a.default.getNodeName(t)&&e.commonAncestorContainer===this.wwe.get$Body()[0]}},{key:"_handleBackspaceAndDeleteKeyEvent",value:function(e,t,n){var i="BACK_SPACE"===n,r=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),o=!0;if(t.collapsed){if(this.wwe.isInTable(t))i?this._tableHandlerOnBackspace(t,e):this._tableHandlerOnDelete(t,e),this._removeContentsAndChangeSelectionIfNeed(t,n,e),o=!1;else if(!i&&this._isBeforeTable(t)||i&&this._isAfterTable(t)){e.preventDefault();var l=i?t.startOffset-1:t.startOffset;this._removeTable(t,a.default.getChildNodeByOffset(t.startContainer,l)),o=!1}}else if(this.wwe.isInTable(t)){if(r.length>0)this._removeContentsAndChangeSelectionIfNeed(t,n,e)&&(e.preventDefault(),o=!1)}return o}},{key:"_moveListItemToPreviousOfList",value:function(e,t){var n=e.parentNode,i=e.firstChild,r=document.createDocumentFragment();a.default.mergeNode(e,r),n.parentNode.insertBefore(r,n),t.setStart(i,0),t.collapse(!0),this.wwe.getEditor().setSelection(t),n.hasChildNodes()||n.parentNode.removeChild(n)}},{key:"_isInList",value:function(e){return a.default.getParentUntilBy(e,function(e){return e&&(a.default.isListNode(e)||"LI"===e.nodeName)},function(e){return e&&("TD"===e.nodeName||"TH"===e.nodeName)})}},{key:"_findListItem",value:function(e){return a.default.getParentUntilBy(e,function(e){return e&&a.default.isListNode(e)},function(e){return e&&("TD"===e.nodeName||"TH"===e.nodeName)})}},{key:"_tableHandlerOnBackspace",value:function(e,t){var n=e.startContainer,i=e.startOffset,o=this._findListItem(n);if(o&&0===i&&a.default.isFirstListItem(o)&&a.default.isFirstLevelListItem(o))this.wwe.getEditor().saveUndoState(e),this._moveListItemToPreviousOfList(o,e),t.preventDefault();else{var l=a.default.getPrevOffsetNodeUntil(n,i,"TR");"BR"===a.default.getNodeName(l)&&1!==l.parentNode.childNodes.length&&(t.preventDefault(),(0,r.default)(l).remove())}}},{key:"_isDeletingBR",value:function(e){var t=this._getCurrentNodeInCell(e),n=t&&t.nextSibling;return"BR"===a.default.getNodeName(t)&&!!n&&"BR"===a.default.getNodeName(n)}},{key:"_getCurrentNodeInCell",value:function(e){var t=e.startContainer,n=e.startOffset,i=void 0;return"TD"===a.default.getNodeName(t)?i=a.default.getChildNodeByOffset(t,n):a.default.getParentUntil(t,"TD")&&(i=t),i}},{key:"_isEndOfList",value:function(e,t){var n=t.startContainer,i=t.startOffset,r=!1;if(!e.nextSibling)if(e===n){var o=a.default.getOffsetLength(e);"BR"===e.lastChild.nodeName&&(o-=1),r=o===i}else{var l=a.default.getParentUntil(n,"li")||n,s=a.default.getOffsetLength(n),u=e.lastChild;"BR"===u.nodeName&&(u=u.previousSibling),r=u===l&&s===i}return r}},{key:"_getNextLineNode",value:function(e){for(var t=document.createDocumentFragment(),n=a.default.getParentUntil(e,"TD").nextSibling;n;){var i=n.nextSibling;if(t.appendChild(n),"BR"===n.nodeName)break;n=i}return t}},{key:"_tableHandlerOnDelete",value:function(e,t){var n=this._findListItem(e.startContainer);if(n&&this._isEndOfList(n,e))this.wwe.getEditor().saveUndoState(e),"BR"===n.lastChild.nodeName&&n.removeChild(n.lastChild),a.default.mergeNode(this._getNextLineNode(n),n),t.preventDefault();else if(this._isDeletingBR(e)){var i=this._getCurrentNodeInCell(e);i.parentNode.removeChild(i.nextSibling),t.preventDefault()}}},{key:"_appendBrIfTdOrThNotHaveAsLastChild",value:function(e){var t=a.default.getNodeName(e.startContainer),n=void 0;if("TD"===t||"TH"===t)n=e.startContainer;else{var i=(0,r.default)(e.startContainer).parentsUntil("tr");n=i[i.length-1]}var o=a.default.getNodeName(n.lastChild);"BR"===o||"DIV"===o||"UL"===o||"OL"===o||u||(0,r.default)(n).append((0,r.default)("<br />")[0])}},{key:"_unwrapBlockInTable",value:function(){this.wwe.get$Body().find("td div,th div,tr>br,td>br,th>br").each(function(e,t){if("BR"===a.default.getNodeName(t)){var n=a.default.getNodeName(t.parentNode),i=/TD|TH/.test(n),o=0===t.parentNode.textContent.length,l=t.parentNode.lastChild===t;("TR"===n||i&&!o&&l)&&(0,r.default)(t).remove()}else(0,r.default)(t).children().unwrap()})}},{key:"_insertDefaultBlockBetweenTable",value:function(){this.wwe.get$Body().find("table").each(function(e,t){t.nextElementSibling&&"TABLE"===t.nextElementSibling.nodeName&&(0,r.default)("<div><br /></div>").insertAfter(t)})}},{key:"_removeTable",value:function(e,t){"TABLE"===t.tagName&&(this.wwe.getEditor().saveUndoState(e),this.wwe.saveSelection(e),(0,r.default)(t).remove(),this.wwe.restoreSavedSelection())}},{key:"_recordUndoStateIfNeed",value:function(e){var t=a.default.getParentUntil(e.startContainer,"TR");e.collapsed&&t&&this._lastCellNode!==t&&(this.wwe.getEditor().saveUndoState(e),this._lastCellNode=t)}},{key:"_recordUndoStateAndResetCellNode",value:function(e){this.wwe.getEditor().saveUndoState(e),this.resetLastCellNode()}},{key:"_pasteDataIntoTable",value:function(e){var t=this.wwe.getEditor().getSelection().startContainer,n=this._getTableDataFromTable(e),i="TD"===t.tagName||"TH"===t.tagName,o=s?"":"<br />",l=void 0,u=void 0,c=void 0,d=void 0;for(u=l=(l=i?t:(l=a.default.getParentUntilBy(t,function(e){return"TD"===e.tagName||"TH"===e.tagName},function(e){return 0===(0,r.default)(e).closest("table").length}))?l.parentNode:null)||(0,r.default)(t).find("th,td").get(0);n.length;){for(c=n.shift();u&&c.length;)(d=c.shift()).length?u.textContent=d:u.innerHTML=o,u=a.default.getTableCellByDirection(u,"next");l=u=a.default.getSiblingRowCellByDirection(l,"next",!1)}}},{key:"_getTableDataFromTable",value:function(e){var t=(0,r.default)(e),n=[];return t.find("tr").each(function(e,t){var i=[];(0,r.default)(t).children().each(function(e,t){i.push(t.textContent)}),i.length&&n.push(i)}),n}},{key:"_removeTableContents",value:function(e){this.wwe.getEditor().saveUndoState(),e.each(function(e,t){var n=s?"":"<br />";(0,r.default)(t).html(n)})}},{key:"wrapDanglingTableCellsIntoTrIfNeed",value:function(e){var t=e.children("td,th"),n=void 0;if(t.length){var i=(0,r.default)("<tr></tr>");t.each(function(e,t){i.append(t)}),n=i.get(0)}return n}},{key:"wrapTrsIntoTbodyIfNeed",value:function(e){var t=e.children("tr"),n=t.find("th"),i=void 0;if(n.length&&n.each(function(e,t){var n=(0,r.default)(t),i=(0,r.default)("<td></td>");i.html(n.html()),i.insertBefore(t),n.detach()}),t.length){var o=(0,r.default)("<tbody></tbody>");t.each(function(e,t){o.append(t)}),i=o.get(0)}return i}},{key:"wrapTheadAndTbodyIntoTableIfNeed",value:function(e){var t=e.children("thead"),n=e.children("tbody"),i=(0,r.default)("<table></table>"),o=void 0;return!n.length&&t.length?(i.append(t[0]),i.append("<tbody><tr></tr></tbody>"),o=i.get(0)):n.length&&!t.length?(i.append("<thead><tr></tr></thead>"),i.append(n[0]),o=i.get(0)):n.length&&t.length&&(i.append(t[0]),i.append(n[0]),o=i.get(0)),o}},{key:"isTableOrSubTableElement",value:function(e){return"TABLE"===e||"TBODY"===e||"THEAD"===e||"TR"===e||"TD"===e}},{key:"_stuffTableCellsIntoIncompleteRow",value:function(e,t){e.each(function(e,n){for(var i=(0,r.default)(n),o=i.find("th,td"),l="THEAD"===a.default.getNodeName(i.parent()[0])?"th":"td",s=o.length;s<t;s+=1)i.append((0,r.default)(f(1,l))[0])})}},{key:"prepareToTableCellStuffing",value:function(e){var t=e.eq(0).find("th,td").length,n=!1;return e.each(function(e,i){var o=(0,r.default)(i).find("th,td").length;t!==o&&(n=!0,t<o&&(t=o))}),{maximumCellLength:t,needTableCellStuffingAid:n}}},{key:"_addTbodyOrTheadIfNeed",value:function(e){var t=!e.find("thead").length,n=!e.find("tbody").length,i=void 0;t?(i=(0,r.default)("<thead><tr></tr></thead>").get(0),e.prepend(i)):n&&(i=(0,r.default)("<tbody><tr></tr></tbody>").get(0),e.append(i))}},{key:"tableCellAppendAidForTableElement",value:function(e){var t=(0,r.default)(e);this._addTbodyOrTheadIfNeed(t),this._addTrIntoContainerIfNeed(t);var n=t.find("tr"),i=this.prepareToTableCellStuffing(n),o=i.maximumCellLength;i.needTableCellStuffingAid&&this._stuffTableCellsIntoIncompleteRow(n,o)}},{key:"_generateTheadAndTbodyFromTbody",value:function(e){var t=(0,r.default)("<tr></tr>"),n=(0,r.default)("<thead></thead>");return t.append(f((0,r.default)(e).find("tr").eq(0).find("td").length,"th")),n.append(t),{thead:n[0],tbody:e}}},{key:"_generateTheadAndTbodyFromThead",value:function(e){var t=(0,r.default)("<tr></tr>"),n=(0,r.default)("<tbody></tbody>");return t.append(f((0,r.default)(e).find("th").length,"td")),n.append(t),{thead:e,tbody:n[0]}}},{key:"_generateTheadAndTbodyFromTr",value:function(e){var t=(0,r.default)(e),n=(0,r.default)("<thead></thead>"),i=(0,r.default)("<tbody></tbody>"),o=void 0,a=void 0;return"TH"===t.children()[0].tagName?(o=e,a=(0,r.default)("<tr>"+f(t.find("th").length,"td")+"</tr>").get(0)):(o=(0,r.default)("<tr>"+f(t.find("td").length,"th")+"</tr>").get(0),a=e),n.append(o),i.append(a),{thead:n[0],tbody:i[0]}}},{key:"_completeIncompleteTable",value:function(e){var t=e.tagName,n=void 0,i=void 0;"TABLE"===t?n=e:(n=document.createElement("table"),e.parentNode.insertBefore(n,e.nextSibling),"TBODY"===t?i=this._generateTheadAndTbodyFromTbody(e):"THEAD"===t?i=this._generateTheadAndTbodyFromThead(e):"TR"===t&&(i=this._generateTheadAndTbodyFromTr(e)),n.appendChild(i.thead),n.appendChild(i.tbody)),this._removeEmptyRows(n),this.tableCellAppendAidForTableElement(n)}},{key:"_removeEmptyRows",value:function(e){var t=e.querySelectorAll("tr");o.default.forEachArray(t,function(e){e.cells.length||e.parentNode.removeChild(e)})}},{key:"_completeTableIfNeed",value:function(){var e=this;this.wwe.getEditor().get$Body().children().each(function(t,n){var i=(0,r.default)(n);e.isTableOrSubTableElement(n.nodeName)&&("TABLE"===n.nodeName&&0===i.find("tbody").length?i.remove():e._completeIncompleteTable(n))})}},{key:"resetLastCellNode",value:function(){this._lastCellNode=null}},{key:"setLastCellNode",value:function(e){this._lastCellNode=e}},{key:"_isModifierKey",value:function(e){return/((META|SHIFT|ALT|CONTROL)\+?)/g.test(e)}},{key:"_isModifierKeyPushed",value:function(e){return e.metaKey||e.ctrlKey||e.altKey||e.shiftKey}},{key:"_addTrIntoContainerIfNeed",value:function(e){e.children().each(function(e,t){0===(0,r.default)(t).find("tr").length&&(0,r.default)(t).append((0,r.default)("<tr></tr>")[0])})}},{key:"_expandTableIfNeed",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=(0,r.default)(t.startContainer).parents("table"),i=this._getColumnAndRowDifference(e,t);i.column<0&&this._appendCellForAllRow(n,i.column),i.row<0&&this._appendRow(n,i.row)}},{key:"_getColumnAndRowDifference",value:function(e,t){var n=this._getTableDataFromTable(e),i=n.length,o=n[0].length,l=(0,r.default)(t.startContainer).closest("th,td"),s=l.parent(),u=a.default.getNodeOffsetOfParent(l[0]),c=a.default.getNodeOffsetOfParent(l[0].parentNode),d=s.parents("table"),f=d.find("tr").eq(0).children().length,h=d.find("tr").length;return s.parents("tbody").length&&(c+=1),{row:h-(c+i),column:f-(u+o)}}},{key:"_appendCellForAllRow",value:function(e,t){var n=s?"":"<br />";e.find("tr").each(function(e,i){for(var o=void 0,a=t;a<0;a+=1)o=0===e?"th":"td",(0,r.default)(i).append((0,r.default)("<"+o+">"+n+"</"+o+">")[0])})}},{key:"_appendRow",value:function(e,t){var n=e.find("tr").last().clone(),i=s?"":"<br />";for(n.find("td").html(i);t<0;t+=1)e.find("tbody").append(n.clone()[0])}},{key:"_getSiblingTextNodeByDirection",value:function(e,t){var n=e.previousSibling&&"BR"===e.previousSibling.nodeName&&e.previousSibling.previousSibling&&3===e.previousSibling.previousSibling.nodeType,i=e.nextSibling&&"BR"===e.nextSibling.nodeName&&e.nextSibling.nextSibling&&3===e.nextSibling.nextSibling.nodeType,r=void 0;return t&&i?r=e.nextSibling.nextSibling:!t&&n&&(r=e.previousSibling.previousSibling),r}},{key:"_changeSelectionToTargetCell",value:function(e,t,n,i){var o=t.startContainer,l="next"===n,s=void 0,u=void 0;if("row"===i){if(a.default.isTextNode(o)&&(s=this._getSiblingTextNodeByDirection(o,l)))return u=s.length<t.startOffset?s.length:t.startOffset,t.setStart(s,u),void t.collapse(!0);s=a.default.getSiblingRowCellByDirection(e,n,!1)}else(s=a.default.getTableCellByDirection(e,n))||(s=a.default.getSiblingRowCellByDirection(e,n,!0));s?(t.setStart(s,0),t.collapse(!0)):(s=(0,r.default)(e).parents("table").get(0),l?t.setStart(s.nextElementSibling,0):s.previousElementSibling&&"TABLE"!==s.previousElementSibling.nodeName?t.setStart(s.previousElementSibling,1):t.setStartBefore(s),t.collapse(!0))}},{key:"_moveCursorTo",value:function(e,t,n){var i=this.wwe.getEditor(),a=i.getSelection().cloneRange(),l=(0,r.default)(a.startContainer).closest("td,th").get(0),s=void 0;return a.collapsed&&this.wwe.isInTable(a)&&l&&!i.hasFormat("LI")&&("previous"!==e&&"row"!==t||o.default.isUndefined(n)||n.preventDefault(),this._changeSelectionToTargetCell(l,a,e,t),i.setSelection(a),s=!1),s}},{key:"_removeContentsAndChangeSelectionIfNeed",value:function(e,t,n){var i=t.length<=1,r="BACK_SPACE"===t||"DELETE"===t,o=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),a=o.first().get(0),l=!1;return(i||r)&&!this._isModifierKeyPushed(n)&&o.length&&(r&&this._recordUndoStateIfNeed(e),this._removeTableContents(o),this._lastCellNode=a,e.setStart(a,0),e.collapse(!0),this.wwe.getEditor().setSelection(e),l=!0),l}},{key:"getTableIDClassName",value:function(){var e="te-content-table-"+this.tableID;return this.tableID+=1,e}},{key:"destroy",value:function(){var e=this;this.eventManager.removeEventHandler("wysiwygRangeChangeAfter.table"),this.eventManager.removeEventHandler("wysiwygSetValueAfter.table"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.table"),this.eventManager.removeEventHandler("cut.table"),this.eventManager.removeEventHandler("copyBefore.table"),o.default.forEach(this.keyEventHandlers,function(t,n){return e.wwe.removeKeyEventHandler(n,t)})}}]),e}();function f(e,t){for(var n="<"+t+"><br /></"+t+">",i="",r=0;r<e;r+=1)i+=n;return i}t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="tableSelection",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent(),o.default.browser.firefox&&(document.execCommand("enableObjectResizing",!1,"false"),document.execCommand("enableInlineTableEditing",!1,"false"))}},{key:"_initEvent",value:function(){var e=this,t=void 0,n=void 0,i=void 0;this._tableSelectionTimer=null,this._removeSelectionTimer=null,this._isSelectionStarted=!1;var a=function(a){n=(0,r.default)(a.data.target).closest("[contenteditable=true] td,th").get(0);var l=e.wwe.getEditor().getSelection(),s=(0,r.default)(n).parents("[contenteditable=true] table").get(0),u=t===n,c=e._isTextSelect(l,u)&&!(0,r.default)(t).hasClass("te-cell-selected");e._isSelectionStarted&&s&&!c&&(window.getSelection().removeAllRanges(),o.default.browser.firefox&&!e._removeSelectionTimer&&(e._removeSelectionTimer=setInterval(function(){window.getSelection().removeAllRanges()},10)),e.highlightTableCellsBy(t,n),i=n)},l=function(){e._isSelectionStarted&&(e._isSelectionStarted=!1,e.eventManager.removeEventHandler("mouseover.tableSelection"),e.eventManager.removeEventHandler("mouseup.tableSelection"))},s=function(a){n=(0,r.default)(a.data.target).closest("[contenteditable=true] td,th").get(0);var s=e.wwe.getEditor().getSelection(),u=t===n,c=e._isTextSelect(s,u)&&!(0,r.default)(t).hasClass("te-cell-selected");e._clearTableSelectionTimerIfNeed(),e._isSelectionStarted&&(c||e._isListSelect(s)?e.removeClassAttrbuteFromAllCellsIfNeed():(e.wwe.componentManager.getManager("table").resetLastCellNode(),n=n||i,(s=e.wwe.getEditor().getSelection()).setStart(n,0),o.default.browser.msie?s.setEnd(n,1):(s.setEnd(n,0),s.collapse(!1)),e.wwe.getEditor().setSelection(s)),e.onDragEnd&&e.onDragEnd()),l()};this.eventManager.listen("mousedown.tableSelection",function(i){t=(0,r.default)(i.data.target).closest("[contenteditable=true] td,th").get(0);var o=(0,r.default)(t).hasClass("te-cell-selected");n=null,!o||o&&2!==i.data.button?(e.removeClassAttrbuteFromAllCellsIfNeed(),t&&(e.setTableSelectionTimerIfNeed(t),e.eventManager.listen("mouseover.tableSelection",a),e.eventManager.listen("mouseup.tableSelection",s),e.onDragStart&&e.onDragStart(t))):2===i.data.button&&l()}),this.eventManager.listen("copyBefore.tableSelection",l),this.eventManager.listen("pasteBefore.tableSelection",l)}},{key:"_isTextSelect",value:function(e,t){return/TD|TH|TEXT/i.test(e.commonAncestorContainer.nodeName)&&t}},{key:"_isListSelect",value:function(e){return/UL|OL|LI/i.test(e.commonAncestorContainer.nodeName)}},{key:"setTableSelectionTimerIfNeed",value:function(e){(0,r.default)(e).parents("[contenteditable=true] table").length&&(this._isSelectionStarted=!0)}},{key:"_clearTableSelectionTimerIfNeed",value:function(){clearTimeout(this._tableSelectionTimer),o.default.browser.firefox&&this._removeSelectionTimer&&(clearTimeout(this._removeSelectionTimer),this._removeSelectionTimer=null)}},{key:"_reArrangeSelectionIfneed",value:function(e,t){var n=(0,r.default)(e).parents("[contenteditable=true] table").length,i=(0,r.default)(t).parents("[contenteditable=true] table").length,o=!i&&n;return i&&!n?e=(0,r.default)(t).parents("[contenteditable=true] table").find("th").first().get(0):o&&(t=(0,r.default)(e).parents("[contenteditable=true] table").find("td").last().get(0)),{startContainer:e,endContainer:t}}},{key:"_applySelectionDirection",value:function(e,t){var n=a.default.getNodeOffsetOfParent,i=e.startContainer,o=e.endContainer,l=n((0,r.default)(i).closest("[contenteditable=true] tr")[0])-n((0,r.default)(o).closest("[contenteditable=true] tr")[0]),s=n(i)-n(o),u=l<0;return 0===l?s>0?(t.setStart(o,0),t.setEnd(i,1)):(t.setStart(i,0),t.setEnd(o,1)):u?(t.setStart(i,0),t.setEnd(o,1)):(t.setStart(o,0),t.setEnd(i,1)),t}},{key:"getSelectionRangeFromTable",value:function(e,t){var n=a.default.getNodeOffsetOfParent,i=n(e.parentNode),o=n(t.parentNode),l=n(e),s=n(t),u=a.default.getParentUntil(e,"TABLE"),c=a.default.getParentUntil(t,"TABLE"),d="TBODY"===a.default.getNodeName(u)&&"THEAD"===a.default.getNodeName(c),f=u!==c,h=!!(0,r.default)(e).parents("tbody").length&&!!(0,r.default)(t).parents("tbody").length,p={row:i,cell:l},g={row:o,cell:s},v=void 0,m=void 0;return d?p.row+=1:f?g.row+=1:h&&(p.row+=1,g.row+=1),i>o||i===o&&l>s?(v=g,m=p):(v=p,m=g),{from:v,to:m}}},{key:"highlightTableCellsBy",value:function(e,t){var n=(0,r.default)(e).parents("[contenteditable=true] table").find("tr"),i=this.getSelectionRangeFromTable(e,t),o=i.from.row,a=i.from.cell,l=i.to.row,s=i.to.cell;n.each(function(e,t){(0,r.default)(t).find("td,th").each(function(t,n){var i=(0,r.default)(n);e===o&&t<a||e===l&&t>s||e<o||e>l?i.removeClass("te-cell-selected"):i.addClass("te-cell-selected")})})}},{key:"removeClassAttrbuteFromAllCellsIfNeed",value:function(){this.wwe.get$Body().find("td.te-cell-selected,th.te-cell-selected").each(function(e,t){var n=(0,r.default)(t);n.removeClass("te-cell-selected"),n.attr("class").length||n.removeAttr("class")})}},{key:"getSelectedCells",value:function(){return this.wwe.get$Body().find(".te-cell-selected")}},{key:"createRangeBySelectedCells",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=this.getSelectedCells(),i=n.first().get(0),r=n.last().get(0);n.length&&this.wwe.isInTable(t)&&(t.setStart(i,0),t.setEnd(r,r.childNodes.length),e.setSelection(t))}},{key:"styleToSelectedCells",value:function(e,t){this.createRangeBySelectedCells(),e(this.wwe.getEditor(),t)}},{key:"destroy",value:function(){this.eventManager.removeEventHandler("mousedown.tableSelection"),this.eventManager.removeEventHandler("mouseover.tableSelection"),this.eventManager.removeEventHandler("mouseup.tableSelection"),this.eventManager.removeEventHandler("copyBefore.tableSelection"),this.eventManager.removeEventHandler("pasteBefore.tableSelection")}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=o.default.browser.msie&&10===o.default.browser.version,u=s?"":"<br>",c={"&":"&amp;","<":"&lt;",">":"&gt;"},d=/\u200B/g,f=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="codeblock",this._init()}return i(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent()}},{key:"_initKeyHandler",value:function(){var e=this;this._keyEventHandlers={BACK_SPACE:this._onBackspaceKeyEventHandler.bind(this),ENTER:function(t,n){!e.wwe.isInTable(n)&&e.wwe.getEditor().hasFormat("CODE")&&e.wwe.defer(function(){var t=e.wwe.getRange().startContainer,n=e._getCodeNode(t);n&&!a.default.getTextLength(n)&&n.parentNode.removeChild(n)})}},o.default.forEach(this._keyEventHandlers,function(t,n){return e.wwe.addKeyEventHandler(n,t)})}},{key:"_getCodeNode",value:function(e){var t=void 0;return"CODE"===e.nodeName?t=e:"CODE"===e.parentNode.nodeName&&(t=e.parentNode),t}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter.codeblock",function(){e.modifyCodeBlockForWysiwyg()}),this.eventManager.listen("wysiwygProcessHTMLText.codeblock",function(t){return e._changePreToPreCode(t)})}},{key:"prepareToPasteOnCodeblock",value:function(e){var t=this.wwe.getEditor().getDocument().createDocumentFragment(),n=this.convertNodesToText(e);return n=n.replace(/\n$/,""),t.appendChild(document.createTextNode(n)),t}},{key:"convertNodesToText",value:function(e){for(var t="",n=e.shift();o.default.isTruthy(n);){n.childNodes&&a.default.isBlockNode(n)?t+=this.convertNodesToText(o.default.toArray(n.childNodes)):"BR"===n.nodeName?t+="\n":t+=n.textContent,n=e.shift()}return t}},{key:"_copyCodeblockTypeFromRangeCodeblock",value:function(e,t){var n=a.default.getParentUntil(t.commonAncestorContainer,this.wwe.get$Body()[0]);if("PRE"===a.default.getNodeName(n)){var i=(0,r.default)(n).prop("attributes");o.default.forEach(i,function(t){(0,r.default)(e).attr(t.name,t.value)})}return e}},{key:"_changePreToPreCode",value:function(e){return e.replace(/<pre( .*?)?>((.|\n)*?)<\/pre>/g,function(e,t,n){return"<pre><code"+(t||"")+">"+n+"</code></pre>"})}},{key:"modifyCodeBlockForWysiwyg",value:function(e){e||(e=this.wwe.get$Body()),(0,r.default)(e).find("pre").each(function(e,t){var n=(0,r.default)(t),i=n.find("code").attr("data-language"),o=n.find("code").attr("data-backticks");n.children().length>1&&n.children().each(function(e,t){"DIV"!==t.nodeName&&"P"!==t.nodeName||(0,r.default)(t).find("br").length||(0,r.default)(t).append("\n")}),n.find("br").replaceWith("\n");var a,l=n.text().replace(/\s+$/,"");n.empty(),n.html(l?(a=l)?a.replace(/[<>&]/g,function(e){return c[e]||e}):"":u),i&&(n.attr("data-language",i),n.addClass("lang-"+i)),o&&n.attr("data-backticks",o),n.attr("data-te-codeblock","")})}},{key:"_onBackspaceKeyEventHandler",value:function(e,t){var n=!0,i=this.wwe.getEditor(),r=t.commonAncestorContainer;if(this._isCodeBlockFirstLine(t)&&!this._isFrontCodeblock(t))this._removeCodeblockFirstLine(r),t.collapse(!0),n=!1;else if(t.collapsed&&this._isEmptyLine(r)&&this._isBetweenSameCodeblocks(r)){var o=r.previousSibling,a=r.nextSibling,l=o.textContent.length;i.saveUndoState(t),r.parentNode.removeChild(r),this._mergeCodeblocks(o,a),t.setStart(o.childNodes[0],l),t.collapse(!0),n=!1}return n||(i.setSelection(t),e.preventDefault()),n}},{key:"_isEmptyLine",value:function(e){var t=e.nodeName,n=e.childNodes,i=s?""===e.textContent:1===n.length&&"BR"===n[0].nodeName;return"DIV"===t&&i}},{key:"_isBetweenSameCodeblocks",value:function(e){var t=e.previousSibling,n=e.nextSibling;return"PRE"===a.default.getNodeName(t)&&"PRE"===a.default.getNodeName(n)&&t.getAttribute("data-language")===n.getAttribute("data-language")}},{key:"_mergeCodeblocks",value:function(e,t){var n=t.textContent;e.childNodes[0].textContent+="\n"+n,t.parentNode.removeChild(t)}},{key:"_isCodeBlockFirstLine",value:function(e){return this.isInCodeBlock(e)&&e.collapsed&&0===e.startOffset}},{key:"_isFrontCodeblock",value:function(e){var t=a.default.getParentUntil(e.startContainer,this.wwe.getEditor().getRoot()).previousSibling;return t&&"PRE"===t.nodeName}},{key:"_removeCodeblockFirstLine",value:function(e){var t=this.wwe.getEditor(),n="PRE"===e.nodeName?e:e.parentNode,i=n.textContent.replace(d,"");t.modifyBlocks(function(){var e=t.getDocument().createDocumentFragment(),r=i.split("\n"),o=document.createElement("div"),a=r.shift();if(o.innerHTML=""+a+u,e.appendChild(o),r.length){var l=n.cloneNode();l.textContent=r.join("\n"),e.appendChild(l)}return e})}},{key:"isInCodeBlock",value:function(e){var t=void 0;return t=e.collapsed?e.startContainer:e.commonAncestorContainer,!!(0,r.default)(t).closest("pre").length}},{key:"destroy",value:function(){var e=this;this.eventManager.removeEventHandler("wysiwygSetValueAfter.codeblock"),this.eventManager.removeEventHandler("wysiwygProcessHTMLText.codeblock"),o.default.forEach(this._keyEventHandlers,function(t,n){return e.wwe.removeKeyEventHandler(n,t)})}}]),e}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=d(n(0)),o=d(n(1)),a=d(n(8)),l=d(n(18)),s=d(n(11)),u=d(n(42)),c=d(n(43));function d(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"tui-editor-defaultUI-toolbar"}));return Object.defineProperty(i,"_items",{enumerable:!0,writable:!0,value:[]}),i._eventManager=e,i.setItems(n),i._initEvent(e),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_initEvent",value:function(e){var t=this;e.listen("stateChange",function(e){t._items.forEach(function(t){t._state&&(e[t._state]?t.$el.addClass("active"):t.$el.removeClass("active"))})}),e.listen("changePreviewTabPreview",function(){return t.disableAllButton()}),e.listen("changePreviewTabWrite",function(){return t.enableAllButton()}),e.listen("changeMode",function(){return t.enableAllButton()})}},{key:"disableAllButton",value:function(){this._items.forEach(function(e){e instanceof l.default&&e.disable()})}},{key:"enableAllButton",value:function(){this._items.forEach(function(e){e instanceof l.default&&e.enable()})}},{key:"getItems",value:function(){return this._items.slice(0)}},{key:"getItem",value:function(e){return this._items[e]}},{key:"setItems",value:function(e){this.removeAllItems(),e.forEach(this.addItem.bind(this))}},{key:"addItem",value:function(e){this.insertItem(this._items.length,e)}},{key:"insertItem",value:function(e,t){var n=this;o.default.isString(t)?t=c.default.create(t):o.default.isString(t.type)&&(t=c.default.create(t.type,t.options));var i=this.$el.children();e>=0&&e<i.length?(t.$el.insertBefore(i.eq(e)),this._items.splice(e,0,t)):(t.$el.appendTo(this.$el),this._items.push(t)),t.onCommandHandler=function(e,t){return n._eventManager.emit("command",t)},t.onEventHandler=function(e,t){return n._eventManager.emit(t)},t.on("command",t.onCommandHandler),t.on("event",t.onEventHandler)}},{key:"indexOfItem",value:function(e){var t=void 0;if(e instanceof s.default)t=this._items.indexOf(e);else if(o.default.isString(e)){var n=e;t=this._items.map(function(e){return e.getName()}).indexOf(n)}return t}},{key:"removeItem",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=void 0,i=void 0;return(n=e instanceof s.default?this.indexOfItem(e):e)>=0&&(i=this._items.splice(n,1)[0]),i&&(t?i.destroy():(i.off("command",i.onCommandHandler),i.off("event",i.onEventHandler),i.$el.detach())),i}},{key:"removeAllItems",value:function(){for(;this._items&&this._items.length>0;)this.removeItem(0)}},{key:"destroy",value:function(){this.removeAllItems(),function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"addButton",value:function(e,t){if(o.default.isArray(e))for(var n=e.length-1;n>=0;n-=1)o.default.isNumber(t)?this._addButton(e[n],t):this._addButton(e);else this._addButton(e,t)}},{key:"_addButton",value:function(e,t){var n=this._setButton(e,t).$el;o.default.isNumber(t)?this.$el.find("."+l.default.className).eq(t-1).before(n):this.$el.append(n)}},{key:"addDivider",value:function(){var e=(0,r.default)('<div class="'+u.default.className+'"></div>');return this.$el.append(e),e}},{key:"_setButton",value:function(e,t){var n=this._eventManager;return e instanceof l.default||(e=new l.default(e)),e.on("command",function(e,t){return n.emit("command",t)}),e.on("event",function(e,t){return n.emit(t)}),o.default.isNumber(t)?this._items.splice(t,0,e):this._items.push(e),e}}]),t}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(11),o=(i=r)&&i.__esModule?i:{default:i};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{name:t.name,tagName:"div",className:t.className}))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();Object.defineProperty(a,"name",{enumerable:!0,writable:!0,value:"divider"}),Object.defineProperty(a,"className",{enumerable:!0,writable:!0,value:"tui-toolbar-divider"}),t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(11)),o=s(n(76)),a=s(n(42)),l=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return i(e,null,[{key:"create",value:function(e,t){var n=void 0;switch(e){case"heading":n=new o.default({name:"heading",className:"tui-heading",event:"openHeadingSelect",tooltip:l.default.get("Headings")});break;case"bold":n=new o.default({name:"bold",className:"tui-bold",command:"Bold",tooltip:l.default.get("Bold"),state:"bold"});break;case"italic":n=new o.default({name:"italic",className:"tui-italic",command:"Italic",tooltip:l.default.get("Italic"),state:"italic"});break;case"strike":n=new o.default({name:"strike",className:"tui-strike",command:"Strike",tooltip:l.default.get("Strike"),state:"strike"});break;case"hr":n=new o.default({name:"hr",className:"tui-hrline",command:"HR",tooltip:l.default.get("Line")});break;case"quote":n=new o.default({name:"quote",className:"tui-quote",command:"Blockquote",tooltip:l.default.get("Blockquote"),state:"quote"});break;case"ul":n=new o.default({name:"ul",className:"tui-ul",command:"UL",tooltip:l.default.get("Unordered list")});break;case"ol":n=new o.default({name:"ol",className:"tui-ol",command:"OL",tooltip:l.default.get("Ordered list")});break;case"task":n=new o.default({name:"task",className:"tui-task",command:"Task",tooltip:l.default.get("Task")});break;case"table":n=new o.default({name:"table",className:"tui-table",event:"openPopupAddTable",tooltip:l.default.get("Insert table")});break;case"image":n=new o.default({name:"image",className:"tui-image",event:"openPopupAddImage",tooltip:l.default.get("Insert image"),state:""});break;case"link":n=new o.default({name:"link",className:"tui-link",event:"openPopupAddLink",tooltip:l.default.get("Insert link")});break;case"code":n=new o.default({name:"code",className:"tui-code",command:"Code",tooltip:l.default.get("Code"),state:"code"});break;case"codeblock":n=new o.default({name:"codeblock",className:"tui-codeblock",command:"CodeBlock",tooltip:l.default.get("Insert CodeBlock"),state:"codeBlock"});break;case"indent":n=new o.default({name:"indent",className:"tui-indent",command:"Indent",tooltip:l.default.get("Indent")});break;case"outdent":n=new o.default({name:"outdent",className:"tui-outdent",command:"Outdent",tooltip:l.default.get("Outdent")});break;case"divider":n=new a.default;break;case"button":n=new o.default(t);break;case"item":default:n=new r.default(t)}return n}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(8));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"te-tab"}));return n.sections=e.sections,n._$activeButton=null,n._render(e),n._initEvent(e),n}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"_initEvent",value:function(e){var t=e.onItemClick;t&&this.on("itemClick",t),this.on("click button",this._onTabButton.bind(this))}},{key:"_render",value:function(e){for(var t=e.items,n=e.initName,i=[],r=0,o=t.length;r<o;r+=1)i.push('<button type="button" data-index="'+r+'">'+t[r]+"</button>");this.$el.html(i.join("")),this.activate(n)}},{key:"activate",value:function(e){var t=this.$el.find('button:contains("'+e+'")');this._activateTabByButton(t)}},{key:"_onTabButton",value:function(e){var t=(0,r.default)(e.target);this._activateTabByButton(t),this.trigger("itemClick",t.text())}},{key:"_activateTabByButton",value:function(e){this._isActivatedButton(e)||this._updateClassByButton(e)}},{key:"_updateClassByButton",value:function(e){if(this._$activeButton){var t=this._$activeButton.attr("data-index");this._$activeButton.removeClass("te-tab-active"),this.sections&&this.sections[t].removeClass("te-tab-active")}e.addClass("te-tab-active"),this._$activeButton=e;var n=e.attr("data-index");this.sections&&this.sections[n].addClass("te-tab-active")}},{key:"_isActivatedButton",value:function(e){return this._$activeButton&&this._$activeButton.text()===e.text()}}]),t}();t.default=l},function(e,t,n){"use strict";var i,r=n(0),o=(i=r)&&i.__esModule?i:{default:i};var a=n(46);o.default.fn.tuiEditor=function(){var e=void 0,t=void 0,n=this.get(0);if(n){for(var i=arguments.length,r=Array(i),l=0;l<i;l++)r[l]=arguments[l];var s;if(e=r[0]||{},t=o.default.data(n,"tuiEditor")){if("string"===typeof e)return(s=t)[e].apply(s,r.slice(1))}else e.el=n,t=a.factory(e),o.default.data(n,"tuiEditor",t)}return this},e.exports=a},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=de(n(0)),o=de(n(1)),a=de(n(18)),l=de(n(47)),s=de(n(12)),u=de(n(57)),c=de(n(71)),d=de(n(15)),f=de(n(2)),h=de(n(16)),p=de(n(10)),g=de(n(40)),v=de(n(17)),m=de(n(33)),y=de(n(3)),b=de(n(72)),_=de(n(4)),k=de(n(38)),w=de(n(39)),C=n(7),S=de(C),T=de(n(90)),E=de(n(91)),x=de(n(92)),M=de(n(93)),L=de(n(94)),O=de(n(95)),N=de(n(96)),A=de(n(97)),P=de(n(98)),I=de(n(99)),B=de(n(100)),R=de(n(101)),D=de(n(102)),H=de(n(103)),F=de(n(104)),W=de(n(105)),j=de(n(106)),U=de(n(107)),$=de(n(108)),z=de(n(109)),V=de(n(110)),K=de(n(111)),q=de(n(112)),G=de(n(113)),Y=de(n(114)),X=de(n(115)),Z=de(n(116)),Q=de(n(117)),J=de(n(118)),ee=de(n(119)),te=de(n(120)),ne=de(n(121)),ie=de(n(122)),re=de(n(123)),oe=de(n(124)),ae=de(n(125)),le=de(n(126)),se=de(n(127)),ue=de(n(128)),ce=de(n(129));function de(e){return e&&e.__esModule?e:{default:e}}n(130),n(131),n(132),n(133),n(134),n(135),n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144),n(145),n(146),n(147),n(148);var fe=[],he="UA-129966929-1",pe=["rel","target","contenteditable","hreflang","type"],ge=function(){function e(t){var n=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.initialHtml=t.el.innerHTML,t.el.innerHTML="",this.options=r.default.extend({previewStyle:"tab",initialEditType:"markdown",height:"300px",minHeight:"200px",language:"en_US",useDefaultHTMLSanitizer:!0,useCommandShortcut:!0,codeBlockLanguages:C.CodeBlockManager.getHighlightJSLanguages(),usageStatistics:!0,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"],hideModeSwitch:!1,customConvertor:null},t),this.eventManager=new d.default,this.importManager=new p.default(this.eventManager),this.commandManager=new f.default(this,{useCommandShortcut:this.options.useCommandShortcut}),this.options.customConvertor?this.convertor=new this.options.customConvertor(this.eventManager):this.convertor=new v.default(this.eventManager),this.options.useDefaultHTMLSanitizer&&this.convertor.initHtmlSanitizer(),this.options.hooks&&o.default.forEach(this.options.hooks,function(e,t){return n.addHook(t,e)}),this.options.events&&o.default.forEach(this.options.events,function(e,t){return n.on(t,e)}),this.layout=new c.default(t,this.eventManager),this.i18n=y.default,this.i18n.setCode(this.options.language),this.setUI(this.options.UI||new b.default(this)),this.mdEditor=l.default.factory(this.layout.getMdEditorContainerEl(),this.eventManager,this.options),this.preview=new s.default(this.layout.getPreviewEl(),this.eventManager,this.convertor,!1,this.options.previewDelayTime),this.wwEditor=u.default.factory(this.layout.getWwEditorContainerEl(),this.eventManager),this.toMarkOptions=null,this.options.linkAttribute){var i=this._sanitizeLinkAttribute(this.options.linkAttribute);this.convertor.setLinkAttribute(i),this.wwEditor.setLinkAttribute(i)}this.changePreviewStyle(this.options.previewStyle),this.changeMode(this.options.initialEditType,!0),this.minHeight(this.options.minHeight),this.height(this.options.height),this.setValue(this.options.initialValue,!1),this.options.placeholder&&this.setPlaceholder(this.options.placeholder),this.options.initialValue||this.setHtml(this.initialHtml,!1),h.default.applyExtension(this,this.options.exts),this.eventManager.emit("load",this),fe.push(this),this._addDefaultCommands(),this.options.usageStatistics&&o.default.sendHostname("editor",he)}return i(e,[{key:"_sanitizeLinkAttribute",value:function(e){var t={};return pe.forEach(function(n){o.default.isUndefined(e[n])||(t[n]=e[n])}),t}},{key:"changePreviewStyle",value:function(e){this.layout.changePreviewStyle(e),this.mdPreviewStyle=e,this.eventManager.emit("changePreviewStyle",e),this.eventManager.emit("previewNeedsRefresh")}},{key:"exec",value:function(){var e;(e=this.commandManager).exec.apply(e,arguments)}},{key:"_addDefaultCommands",value:function(){this.addCommand(T.default),this.addCommand(E.default),this.addCommand(M.default),this.addCommand(L.default),this.addCommand(O.default),this.addCommand(N.default),this.addCommand(A.default),this.addCommand(P.default),this.addCommand(I.default),this.addCommand(B.default),this.addCommand(R.default),this.addCommand(D.default),this.addCommand(H.default),this.addCommand(F.default),this.addCommand(W.default),this.addCommand(j.default),this.addCommand(x.default),this.addCommand(U.default),this.addCommand($.default),this.addCommand(V.default),this.addCommand(Z.default),this.addCommand(Q.default),this.addCommand(K.default),this.addCommand(q.default),this.addCommand(G.default),this.addCommand(Y.default),this.addCommand(X.default),this.addCommand(ae.default),this.addCommand(le.default),this.addCommand(se.default),this.addCommand(J.default),this.addCommand(ee.default),this.addCommand(te.default),this.addCommand(ne.default),this.addCommand(ie.default),this.addCommand(re.default),this.addCommand(oe.default),this.addCommand(ue.default),this.addCommand(ce.default),this.addCommand(z.default)}},{key:"addCommand",value:function(e,t){t?this.commandManager.addCommand(f.default.command(e,t)):this.commandManager.addCommand(e)}},{key:"afterAddedCommand",value:function(){this.eventManager.emit("afterAddedCommand",this)}},{key:"on",value:function(e,t){this.eventManager.listen(e,t)}},{key:"off",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"addHook",value:function(e,t){this.eventManager.removeEventHandler(e),this.eventManager.listen(e,t)}},{key:"removeHook",value:function(e){this.eventManager.removeEventHandler(e)}},{key:"getCodeMirror",value:function(){return this.mdEditor.getEditor()}},{key:"getSquire",value:function(){return this.wwEditor.getEditor()}},{key:"focus",value:function(){this.getCurrentModeEditor().focus()}},{key:"blur",value:function(){this.getCurrentModeEditor().blur()}},{key:"moveCursorToEnd",value:function(){this.getCurrentModeEditor().moveCursorToEnd()}},{key:"moveCursorToStart",value:function(){this.getCurrentModeEditor().moveCursorToStart()}},{key:"setMarkdown",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=e||"",this.isMarkdownMode()?this.mdEditor.setValue(e,t):this.wwEditor.setValue(this.convertor.toHTML(e),t),this.eventManager.emit("setMarkdownAfter",e)}},{key:"setHtml",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e=e||"",this.wwEditor.setValue(e,t),this.isMarkdownMode()){var n=this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions);this.mdEditor.setValue(n,t),this.eventManager.emit("setMarkdownAfter",n)}}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.setMarkdown(e,t)}},{key:"getMarkdown",value:function(){return this.isMarkdownMode()?this.mdEditor.getValue():this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)}},{key:"getHtml",value:function(){return this.isWysiwygMode()&&this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions)),this.convertor.toHTML(this.mdEditor.getValue())}},{key:"getValue",value:function(){return this.getMarkdown()}},{key:"insertText",value:function(e){this.isMarkdownMode()?this.mdEditor.replaceSelection(e):this.wwEditor.insertText(e)}},{key:"addWidget",value:function(e,t,n,i){this.getCurrentModeEditor().addWidget(e,t,n,i)}},{key:"height",value:function(e){return o.default.isExisty(e)&&("auto"===e?((0,r.default)(this.options.el).addClass("auto-height"),this.minHeight(this.minHeight())):((0,r.default)(this.options.el).removeClass("auto-height"),this.minHeight(e)),o.default.isNumber(e)&&(e+="px"),this.options.el.style.height=e,this._height=e),this._height}},{key:"minHeight",value:function(e){if(o.default.isExisty(e)){var t=this._ui.getEditorHeight()-this._ui.getEditorSectionHeight();this._minHeight=e,e=parseInt(e,10),e=Math.max(e-t,0),this.wwEditor.setMinHeight(e),this.mdEditor.setMinHeight(e),this.preview.setMinHeight(e)}return this._minHeight}},{key:"getCurrentModeEditor",value:function(){return this.isMarkdownMode()?this.mdEditor:this.wwEditor}},{key:"isMarkdownMode",value:function(){return"markdown"===this.currentMode}},{key:"isWysiwygMode",value:function(){return"wysiwyg"===this.currentMode}},{key:"isViewer",value:function(){return!1}},{key:"getCurrentPreviewStyle",value:function(){return this.mdPreviewStyle}},{key:"changeMode",value:function(e,t){this.currentMode!==e&&(this.eventManager.emit("changeModeBefore",this.currentMode),this.currentMode=e,this.isWysiwygMode()?(this.layout.switchToWYSIWYG(),this.wwEditor.setValue(this.convertor.toHTML(this.mdEditor.getValue()),!t),this.eventManager.emit("changeModeToWysiwyg")):(this.layout.switchToMarkdown(),this.mdEditor.resetState(),this.mdEditor.setValue(this.convertor.toMarkdown(this.wwEditor.getValue(),this.toMarkOptions),!t),this.getCodeMirror().refresh(),this.eventManager.emit("changeModeToMarkdown")),this.eventManager.emit("changeMode",e),t||this.focus())}},{key:"remove",value:function(){var e=this,t=fe.length-1;for(this.wwEditor.remove(),this.mdEditor.remove(),this.layout.remove(),this.preview.remove(),this.getUI()&&this.getUI().remove(),this.eventManager.emit("removeEditor"),this.eventManager.events.forEach(function(t,n){e.off(n)}),this.eventManager=null;t>=0;t-=1)fe[t]===this&&fe.splice(t,1)}},{key:"hide",value:function(){this.eventManager.emit("hide",this)}},{key:"show",value:function(){this.eventManager.emit("show",this),this.getCodeMirror().refresh()}},{key:"scrollTop",value:function(e){return this.getCurrentModeEditor().scrollTop(e)}},{key:"setUI",value:function(e){this._ui=e}},{key:"getUI",value:function(){return this._ui}},{key:"reset",value:function(){this.wwEditor.reset(),this.mdEditor.reset()}},{key:"getRange",value:function(){return this.getCurrentModeEditor().getRange()}},{key:"getTextObject",value:function(e){return this.getCurrentModeEditor().getTextObject(e)}},{key:"getSelectedText",value:function(){var e=this.getRange();return this.getTextObject(e).getTextContent()||""}},{key:"setPlaceholder",value:function(e){this.mdEditor.setPlaceholder(e),this.wwEditor.setPlaceholder(e)}}],[{key:"getInstances",value:function(){return fe}},{key:"defineExtension",value:function(e,t){h.default.defineExtension(e,t)}},{key:"factory",value:function(t){return t.viewer?new m.default(t):new e(t)}}]),e}();ge.isViewer=!1,ge.i18n=y.default,ge.domUtils=_.default,ge.codeBlockManager=S.default,ge.Button=a.default,ge.WwCodeBlockManager=g.default,ge.WwTableManager=k.default,ge.WwTableSelectionManager=w.default,ge.CommandManager=f.default,ge.markdownitHighlight=v.default.getMarkdownitHighlightRenderer(),ge.markdownit=v.default.getMarkdownitRenderer(),e.exports=ge},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=c(n(1)),o=c(n(36)),a=c(n(19)),l=c(n(55)),s=c(n(37)),u=c(n(56));function c(e){return e&&e.__esModule?e:{default:e}}var d=a.default.getSharedInstance(),f=function(e){function t(e,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.get(0),{mode:"gfm",dragDrop:!0,allowDropFileTypes:["image"],extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:"indentOrderedList","Shift-Tab":"indentLessOrderedList"},viewportMargin:i&&"auto"===i.height?1/0:10}));return r.eventManager=n,r.componentManager=new s.default(r),r.componentManager.addManager(l.default),r._latestState=null,r._initEvent(),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"_initEvent",value:function(){var e=this;this.cm.getWrapperElement().addEventListener("click",function(){e.eventManager.emit("click",{source:"markdown"})}),this.cm.on("beforeChange",function(t,n){"paste"===n.origin&&e.eventManager.emit("pasteBefore",{source:"markdown",data:n})}),this.cm.on("change",function(t,n){e._emitMarkdownEditorContentChangedEvent(),e._emitMarkdownEditorChangeEvent(n)}),this.cm.on("focus",function(){e.eventManager.emit("focus",{source:"markdown"})}),this.cm.on("blur",function(){e.eventManager.emit("blur",{source:"markdown"})}),this.cm.on("scroll",function(t,n){e.eventManager.emit("scroll",{source:"markdown",data:n})}),this.cm.on("keydown",function(t,n){e.eventManager.emit("keydown",{source:"markdown",data:n}),e.eventManager.emit("keyMap",{source:"markdown",keyMap:d.convert(n),data:n})}),this.cm.on("keyup",function(t,n){e.eventManager.emit("keyup",{source:"markdown",data:n})}),this.cm.on("copy",function(t,n){e.eventManager.emit("copy",{source:"markdown",data:n})}),this.cm.on("cut",function(t,n){e.eventManager.emit("cut",{source:"markdown",data:n})}),this.cm.on("paste",function(t,n){e.eventManager.emit("paste",{source:"markdown",data:n})}),this.cm.on("drop",function(t,n){n.preventDefault(),e.eventManager.emit("drop",{source:"markdown",data:n})}),this.cm.on("cursorActivity",function(){var t=e.cm.getTokenAt(e.cm.getCursor()).state.base,n={bold:!!t.strong,italic:!!t.em,strike:!!t.strikethrough,code:t.code>0,codeBlock:-1===t.code,quote:!!t.quote,list:!!t.list,task:!!t.taskList,source:"markdown"};e._latestState&&!e._isStateChanged(e._latestState,n)||(e.eventManager.emit("stateChange",n),e._latestState=n)})}},{key:"setValue",value:function(e,n){(function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0})(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e,n),this._emitMarkdownEditorContentChangedEvent()}},{key:"getTextObject",value:function(e){return new u.default(this,e)}},{key:"_emitMarkdownEditorContentChangedEvent",value:function(){this.eventManager.emit("contentChangedFromMarkdown",this)}},{key:"_emitMarkdownEditorChangeEvent",value:function(e){if("setValue"!==e.origin){var t={source:"markdown"};this.eventManager.emit("changeFromMarkdown",t),this.eventManager.emit("change",t)}}},{key:"_isStateChanged",value:function(e,t){var n=!1;return r.default.forEach(t,function(t,i){return!(n=e[i]!==t)}),n}},{key:"resetState",value:function(){this._latestState=null}}],[{key:"factory",value:function(e,n,i){return new t(e,n,i)}}]),t}();t.default=f},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};var a=/^(\s*)((\d+)([.)]\s(?:\[(?:x|\s)\]\s)?))(.*)/;function l(e,t,n,i){var r=void 0,o=void 0,s=void 0,u=void 0,c=n,d=i.getLine(e);do{var f=a.exec(d);if(r=f[1],o=f[4],s=f[5],(u=r.length)===t)i.replaceRange(""+r+c+o+s,{line:e,ch:0},{line:e,ch:d.length}),c+=1,e+=1;else{if(!(u>t))return e;e=l(e,u,1,i)}d=i.getLine(e)}while(a.test(d));return e}function s(e,t){for(var n=e,i=t.getLine(e);a.test(i);)n-=1,i=t.getLine(n);return e===n?n=-1:n+=1,n}o.default.commands.indentLessOrderedList=function(e){return e.getOption("disableInput")?o.default.Pass:(e.execCommand("indentLess"),e.execCommand("fixOrderedListNumber"),null)},o.default.commands.fixOrderedListNumber=function(e){if(e.getOption("disableInput"))return o.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n+=1){var i=s(t[n].head.line,e);if(i>=0){var r=e.getLine(i),u=a.exec(r),c=u[1],d=u[3];l(i,c.length,parseInt(d,10),e)}}return null}},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};o.default.overlayMode=function(e,t,n){return{startState:function(){return{base:o.default.startState(e),overlay:o.default.startState(t),basePos:0,baseCur:null,overlayPos:0,overlayCur:null,streamSeen:null}},copyState:function(n){return{base:o.default.copyState(e,n.base),overlay:o.default.copyState(t,n.overlay),basePos:n.basePos,baseCur:null,overlayPos:n.overlayPos,overlayCur:null}},token:function(i,r){return(i!=r.streamSeen||Math.min(r.basePos,r.overlayPos)<i.start)&&(r.streamSeen=i,r.basePos=r.overlayPos=i.start),i.start==r.basePos&&(r.baseCur=e.token(i,r.base),r.basePos=i.pos),i.start==r.overlayPos&&(i.pos=i.start,r.overlayCur=t.token(i,r.overlay),r.overlayPos=i.pos),i.pos=Math.min(r.basePos,r.overlayPos),null==r.overlayCur?r.baseCur:null!=r.baseCur&&r.overlay.combineTokens||n&&null==r.overlay.combineTokens?r.baseCur+" "+r.overlayCur:r.overlayCur},indent:e.indent&&function(t,n){return e.indent(t.base,n)},electricChars:e.electricChars,innerMode:function(t){return{state:t.base,mode:e}},blankLine:function(n){e.blankLine&&e.blankLine(n.base),t.blankLine&&t.blankLine(n.overlay)}}}},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};o.default.defineMode("markdown",function(e,t){var n=o.default.getMode(e,"text/html"),i="null"==n.name;void 0===t.highlightFormatting&&(t.highlightFormatting=!1),void 0===t.maxBlockquoteDepth&&(t.maxBlockquoteDepth=0),void 0===t.taskLists&&(t.taskLists=!1),void 0===t.strikethrough&&(t.strikethrough=!1),void 0===t.emoji&&(t.emoji=!1),void 0===t.fencedCodeBlockHighlighting&&(t.fencedCodeBlockHighlighting=!0),void 0===t.xml&&(t.xml=!0),void 0===t.tokenTypeOverrides&&(t.tokenTypeOverrides={});var r={header:"header",code:"comment",quote:"quote",list1:"variable-2",list2:"variable-3",list3:"keyword",hr:"hr",image:"image",imageAltText:"image-alt-text",imageMarker:"image-marker",formatting:"formatting",linkInline:"link",linkEmail:"link",linkText:"link",linkHref:"string",em:"em",strong:"strong",strikethrough:"strikethrough",emoji:"builtin"};for(var a in r)r.hasOwnProperty(a)&&t.tokenTypeOverrides[a]&&(r[a]=t.tokenTypeOverrides[a]);var l=/^([*\-_])(?:\s*\1){2,}\s*$/,s=/^(?:[*\-+]|^[0-9]+([.)]))\s+/,u=/^\[(x| )\](?=\s)/i,c=t.allowAtxHeaderWithoutSpace?/^(#+)/:/^(#+)(?: |$)/,d=/^ *(?:\={1,}|-{1,})\s*$/,f=/^[^#!\[\]*_\\<>` "'(~:]+/,h=/^(~~~+|```+)[ \t]*([\w+#-]*)[^\n`]*$/,p=/^\s*\[[^\]]+?\]:.*$/,g=/[!\"#$%&\'()*+,\-\.\/:;<=>?@\[\\\]^_`{|}~]/;function v(e,t,n){return t.f=t.inline=n,n(e,t)}function m(e,t,n){return t.f=t.block=n,n(e,t)}function y(e){if(e.linkTitle=!1,e.linkHref=!1,e.linkText=!1,e.em=!1,e.strong=!1,e.strikethrough=!1,e.quote=0,e.indentedCode=!1,e.f==_){var t=i;if(!t){var r=o.default.innerMode(n,e.htmlState);t="xml"==r.mode.name&&null===r.state.tagStart&&!r.state.context&&r.state.tokenize.isInText}t&&(e.f=S,e.block=b,e.htmlState=null)}return e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.prevLine=e.thisLine,e.thisLine={stream:null},null}function b(n,i){var a,f=n.column()===i.indentation,g=!(a=i.prevLine.stream)||!/\S/.test(a.string),m=i.indentedCode,y=i.prevLine.hr,b=!1!==i.list,_=(i.listStack[i.listStack.length-1]||0)+3;i.indentedCode=!1;var C=i.indentation;if(null===i.indentationDiff&&(i.indentationDiff=i.indentation,b)){for(i.em=!1,i.strong=!1,i.code=!1,i.strikethrough=!1,i.list=null;C<i.listStack[i.listStack.length-1];)i.listStack.pop(),i.listStack.length?i.indentation=i.listStack[i.listStack.length-1]:i.list=!1;!1!==i.list&&(i.indentationDiff=C-i.listStack[i.listStack.length-1])}var S=!g&&!y&&!i.prevLine.header&&(!b||!m)&&!i.prevLine.fencedCodeEnd,T=(!1===i.list||y||g)&&i.indentation<=_&&n.match(l),E=null;if(i.indentationDiff>=4&&(m||i.prevLine.fencedCodeEnd||i.prevLine.header||g))return n.skipToEnd(),i.indentedCode=!0,r.code;if(n.eatSpace())return null;if(f&&i.indentation<=_&&(E=n.match(c))&&E[1].length<=6)return i.quote=0,i.header=E[1].length,i.thisLine.header=!0,t.highlightFormatting&&(i.formatting="header"),i.f=i.inline,w(i);if(i.indentation<=_&&n.eat(">"))return i.quote=f?1:i.quote+1,t.highlightFormatting&&(i.formatting="quote"),n.eatSpace(),w(i);if(!T&&!i.setext&&f&&i.indentation<=_&&(E=n.match(s))){var x=E[1]?"ol":"ul";return i.indentation=C+n.current().length,i.list=!0,i.quote=0,i.listStack.push(i.indentation),t.taskLists&&n.match(u,!1)&&(i.taskList=!0),i.f=i.inline,t.highlightFormatting&&(i.formatting=["list","list-"+x]),w(i)}return f&&i.indentation<=_&&(E=n.match(h,!0))?(i.quote=0,i.fencedEndRE=new RegExp(E[1]+"+ *$"),i.localMode=t.fencedCodeBlockHighlighting&&function(t){if(o.default.findModeByName){var n=o.default.findModeByName(t);n&&(t=n.mime||n.mimes[0])}var i=o.default.getMode(e,t);return"null"==i.name?null:i}(E[2]),i.localMode&&(i.localState=o.default.startState(i.localMode)),i.f=i.block=k,t.highlightFormatting&&(i.formatting="code-block"),i.code=-1,w(i)):i.setext||!(S&&b||i.quote||!1!==i.list||i.code||T||p.test(n.string))&&(E=n.lookAhead(1))&&(E=E.match(d))?(i.setext?(i.header=i.setext,i.setext=0,n.skipToEnd(),t.highlightFormatting&&(i.formatting="header")):(i.header="="==E[0].charAt(0)?1:2,i.setext=i.header),i.thisLine.header=!0,i.f=i.inline,w(i)):T?(n.skipToEnd(),i.hr=!0,i.thisLine.hr=!0,r.hr):"["===n.peek()?v(n,i,M):v(n,i,i.inline)}function _(e,t){var r=n.token(e,t.htmlState);if(!i){var a=o.default.innerMode(n,t.htmlState);("xml"==a.mode.name&&null===a.state.tagStart&&!a.state.context&&a.state.tokenize.isInText||t.md_inside&&e.current().indexOf(">")>-1)&&(t.f=S,t.block=b,t.htmlState=null)}return r}function k(e,n){var i,o=n.listStack[n.listStack.length-1]||0,a=n.indentation<o,l=o+3;return n.fencedEndRE&&n.indentation<=l&&(a||e.match(n.fencedEndRE))?(t.highlightFormatting&&(n.formatting="code-block"),a||(i=w(n)),n.localMode=n.localState=null,n.block=b,n.f=S,n.fencedEndRE=null,n.code=0,n.thisLine.fencedCodeEnd=!0,a?m(e,n,n.block):i):n.localMode?n.localMode.token(e,n.localState):(e.skipToEnd(),r.code)}function w(e){var n=[];if(e.formatting){n.push(r.formatting),"string"===typeof e.formatting&&(e.formatting=[e.formatting]);for(var i=0;i<e.formatting.length;i++)n.push(r.formatting+"-"+e.formatting[i]),"header"===e.formatting[i]&&n.push(r.formatting+"-"+e.formatting[i]+"-"+e.header),"quote"===e.formatting[i]&&(!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(r.formatting+"-"+e.formatting[i]+"-"+e.quote):n.push("error"))}if(e.taskOpen)return n.push("meta"),n.length?n.join(" "):null;if(e.taskClosed)return n.push("property"),n.length?n.join(" "):null;if(e.linkHref?n.push(r.linkHref,"url"):(e.strong&&n.push(r.strong),e.em&&n.push(r.em),e.strikethrough&&n.push(r.strikethrough),e.emoji&&n.push(r.emoji),e.linkText&&n.push(r.linkText),e.code&&n.push(r.code),e.image&&n.push(r.image),e.imageAltText&&n.push(r.imageAltText,"link"),e.imageMarker&&n.push(r.imageMarker)),e.header&&n.push(r.header,r.header+"-"+e.header),e.quote&&(n.push(r.quote),!t.maxBlockquoteDepth||t.maxBlockquoteDepth>=e.quote?n.push(r.quote+"-"+e.quote):n.push(r.quote+"-"+t.maxBlockquoteDepth)),!1!==e.list){var o=(e.listStack.length-1)%3;o?1===o?n.push(r.list2):n.push(r.list3):n.push(r.list1)}return e.trailingSpaceNewLine?n.push("trailing-space-new-line"):e.trailingSpace&&n.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),n.length?n.join(" "):null}function C(e,t){if(e.match(f,!0))return w(t)}function S(e,i){var a=i.text(e,i);if("undefined"!==typeof a)return a;if(i.list)return i.list=null,w(i);if(i.taskList)return" "===e.match(u,!0)[1]?i.taskOpen=!0:i.taskClosed=!0,t.highlightFormatting&&(i.formatting="task"),i.taskList=!1,w(i);if(i.taskOpen=!1,i.taskClosed=!1,i.header&&e.match(/^#+$/,!0))return t.highlightFormatting&&(i.formatting="header"),w(i);var l=e.next();if(i.linkTitle){i.linkTitle=!1;var s=l;"("===l&&(s=")");var c="^\\s*(?:[^"+(s=(s+"").replace(/([.?*+^\[\]\\(){}|-])/g,"\\$1"))+"\\\\]+|\\\\\\\\|\\\\.)"+s;if(e.match(new RegExp(c),!0))return r.linkHref}if("`"===l){var d=i.formatting;t.highlightFormatting&&(i.formatting="code"),e.eatWhile("`");var f=e.current().length;if(0!=i.code||i.quote&&1!=f){if(f==i.code){var h=w(i);return i.code=0,h}return i.formatting=d,w(i)}return i.code=f,w(i)}if(i.code)return w(i);if("\\"===l&&(e.next(),t.highlightFormatting)){var p=w(i),v=r.formatting+"-escape";return p?p+" "+v:v}if("!"===l&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return i.imageMarker=!0,i.image=!0,t.highlightFormatting&&(i.formatting="image"),w(i);if("["===l&&i.imageMarker&&e.match(/[^\]]*\](\(.*?\)| ?\[.*?\])/,!1))return i.imageMarker=!1,i.imageAltText=!0,t.highlightFormatting&&(i.formatting="image"),w(i);if("]"===l&&i.imageAltText){t.highlightFormatting&&(i.formatting="image");var p=w(i);return i.imageAltText=!1,i.image=!1,i.inline=i.f=E,p}if("["===l&&!i.image)return i.linkText&&e.match(/^.*?\]/)?w(i):(i.linkText=!0,t.highlightFormatting&&(i.formatting="link"),w(i));if("]"===l&&i.linkText){t.highlightFormatting&&(i.formatting="link");var p=w(i);return i.linkText=!1,i.inline=i.f=e.match(/\(.*?\)| ?\[.*?\]/,!1)?E:S,p}if("<"===l&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return i.f=i.inline=T,t.highlightFormatting&&(i.formatting="link"),(p=w(i))?p+=" ":p="",p+r.linkInline;if("<"===l&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return i.f=i.inline=T,t.highlightFormatting&&(i.formatting="link"),(p=w(i))?p+=" ":p="",p+r.linkEmail;if(t.xml&&"<"===l&&e.match(/^(!--|\?|!\[CDATA\[|[a-z][a-z0-9-]*(?:\s+[a-z_:.\-]+(?:\s*=\s*[^>]+)?)*\s*(?:>|$))/i,!1)){var y=e.string.indexOf(">",e.pos);if(-1!=y){var b=e.string.substring(e.start,y);/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(b)&&(i.md_inside=!0)}return e.backUp(1),i.htmlState=o.default.startState(n),m(e,i,_)}if(t.xml&&"<"===l&&e.match(/^\/\w*?>/))return i.md_inside=!1,"tag";if("*"===l||"_"===l){for(var k=1,C=1==e.pos?" ":e.string.charAt(e.pos-2);k<3&&e.eat(l);)k++;var x=e.peek()||" ",M=!/\s/.test(x)&&(!g.test(x)||/\s/.test(C)||g.test(C)),L=!/\s/.test(C)&&(!g.test(C)||/\s/.test(x)||g.test(x)),O=null,N=null;if(k%2&&(i.em||!M||"*"!==l&&L&&!g.test(C)?i.em!=l||!L||"*"!==l&&M&&!g.test(x)||(O=!1):O=!0),k>1&&(i.strong||!M||"*"!==l&&L&&!g.test(C)?i.strong!=l||!L||"*"!==l&&M&&!g.test(x)||(N=!1):N=!0),null!=N||null!=O){t.highlightFormatting&&(i.formatting=null==O?"strong":null==N?"em":"strong em"),!0===O&&(i.em=l),!0===N&&(i.strong=l);h=w(i);return!1===O&&(i.em=!1),!1===N&&(i.strong=!1),h}}else if(" "===l&&(e.eat("*")||e.eat("_"))){if(" "===e.peek())return w(i);e.backUp(1)}if(t.strikethrough)if("~"===l&&e.eatWhile(l)){if(i.strikethrough){t.highlightFormatting&&(i.formatting="strikethrough");h=w(i);return i.strikethrough=!1,h}if(e.match(/^[^\s]/,!1))return i.strikethrough=!0,t.highlightFormatting&&(i.formatting="strikethrough"),w(i)}else if(" "===l&&e.match(/^~~/,!0)){if(" "===e.peek())return w(i);e.backUp(2)}if(t.emoji&&":"===l&&e.match(/^[a-z_\d+-]+:/)){i.emoji=!0,t.highlightFormatting&&(i.formatting="emoji");var A=w(i);return i.emoji=!1,A}return" "===l&&(e.match(/^ +$/,!1)?i.trailingSpace++:i.trailingSpace&&(i.trailingSpaceNewLine=!0)),w(i)}function T(e,n){if(">"===e.next()){n.f=n.inline=S,t.highlightFormatting&&(n.formatting="link");var i=w(n);return i?i+=" ":i="",i+r.linkInline}return e.match(/^[^>]+/,!0),r.linkInline}function E(e,n){if(e.eatSpace())return null;var i,r=e.next();return"("===r||"["===r?(n.f=n.inline=(i="("===r?")":"]",function(e,n){var r=e.next();if(r===i){n.f=n.inline=S,t.highlightFormatting&&(n.formatting="link-string");var o=w(n);return n.linkHref=!1,o}return e.match(x[i]),n.linkHref=!0,w(n)}),t.highlightFormatting&&(n.formatting="link-string"),n.linkHref=!0,w(n)):"error"}var x={")":/^(?:[^\\\(\)]|\\.|\((?:[^\\\(\)]|\\.)*\))*?(?=\))/,"]":/^(?:[^\\\[\]]|\\.|\[(?:[^\\\[\]]|\\.)*\])*?(?=\])/};function M(e,n){return e.match(/^([^\]\\]|\\.)*\]:/,!1)?(n.f=L,e.next(),t.highlightFormatting&&(n.formatting="link"),n.linkText=!0,w(n)):v(e,n,S)}function L(e,n){if(e.match(/^\]:/,!0)){n.f=n.inline=O,t.highlightFormatting&&(n.formatting="link");var i=w(n);return n.linkText=!1,i}return e.match(/^([^\]\\]|\\.)+/,!0),r.linkText}function O(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),void 0===e.peek()?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=S,r.linkHref+" url")}var N={startState:function(){return{f:b,prevLine:{stream:null},thisLine:{stream:null},block:b,htmlState:null,indentation:0,inline:S,text:C,formatting:!1,linkText:!1,linkHref:!1,linkTitle:!1,code:0,em:!1,strong:!1,header:0,setext:0,hr:!1,taskList:!1,list:!1,listStack:[],quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1,emoji:!1,fencedEndRE:null}},copyState:function(e){return{f:e.f,prevLine:e.prevLine,thisLine:e.thisLine,block:e.block,htmlState:e.htmlState&&o.default.copyState(n,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?o.default.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,formatting:!1,linkText:e.linkText,linkTitle:e.linkTitle,linkHref:e.linkHref,code:e.code,em:e.em,strong:e.strong,strikethrough:e.strikethrough,emoji:e.emoji,header:e.header,setext:e.setext,hr:e.hr,taskList:e.taskList,list:e.list,listStack:e.listStack.slice(0),quote:e.quote,indentedCode:e.indentedCode,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside,fencedEndRE:e.fencedEndRE}},token:function(e,t){if(t.formatting=!1,e!=t.thisLine.stream){if(t.header=0,t.hr=!1,e.match(/^\s*$/,!0))return y(t),null;if(t.prevLine=t.thisLine,t.thisLine={stream:e},t.taskList=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,!t.localState&&(t.f=t.block,t.f!=_)){var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length;if(t.indentation=n,t.indentationDiff=null,n>0)return null}}return t.f(e,t)},innerMode:function(e){return e.block==_?{state:e.htmlState,mode:n}:e.localState?{state:e.localState,mode:e.localMode}:{state:e,mode:N}},indent:function(e,t,i){return e.block==_&&n.indent?n.indent(e.htmlState,t,i):e.localState&&e.localMode.indent?e.localMode.indent(e.localState,t,i):o.default.Pass},blankLine:y,getType:w,closeBrackets:"()[]{}''\"\"``",fold:"markdown"};return N},"xml"),o.default.defineMIME("text/markdown","markdown"),o.default.defineMIME("text/x-markdown","markdown")},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};o.default.defineMode("gfm",function(e,t){var n=0;var i={startState:function(){return{code:!1,codeBlock:!1,ateSpace:!1}},copyState:function(e){return{code:e.code,codeBlock:e.codeBlock,ateSpace:e.ateSpace}},token:function(e,t){if(t.combineTokens=null,t.codeBlock)return e.match(/^```+/)?(t.codeBlock=!1,null):(e.skipToEnd(),null);if(e.sol()&&(t.code=!1),e.sol()&&e.match(/^```+/))return e.skipToEnd(),t.codeBlock=!0,null;if("`"===e.peek()){e.next();var i=e.pos;e.eatWhile("`");var r=1+e.pos-i;return t.code?r===n&&(t.code=!1):(n=r,t.code=!0),null}return t.code?(e.next(),null):e.eatSpace()?(t.ateSpace=!0,null):(e.next(),null)},blankLine:function(e){return e.code=!1,null}},r={taskLists:!0,strikethrough:!0,emoji:!0};for(var a in t)r[a]=t[a];return r.name="markdown",o.default.overlayMode(o.default.getMode(e,r),i)},"markdown"),o.default.defineMIME("text/x-gfm","gfm")},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};var a=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,l=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,s=/[*+-]\s/;function u(e,t){var n=t.line,i=0,r=0,o=a.exec(e.getLine(n)),l=o[1];do{var s=n+(i+=1),u=e.getLine(s),c=a.exec(u);if(c){var d=c[1],f=parseInt(o[3],10)+i-r,h=parseInt(c[3],10),p=h;if(l!==d||isNaN(h)){if(l.length>d.length)return;if(l.length<d.length&&1===i)return;r+=1}else f===h&&(p=h+1),f>h&&(p=f+1),e.replaceRange(u.replace(a,d+p+c[4]+c[5]),{line:s,ch:0},{line:s,ch:u.length})}}while(c)}o.default.commands.indentOrderedList=function(e){if(e.getOption("disableInput"))return o.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n].head,r=e.getLine(i.line).substr(0,i.ch);a.test(r)||e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertSoftTab")}e.execCommand("fixOrderedListNumber")},o.default.commands.newlineAndIndentContinueMarkdownList=function(e){if(e.getOption("disableInput"))return o.default.Pass;for(var t=e.listSelections(),n=[],i=0;i<t.length;i++){var r=t[i].head,c=e.getStateAfter(r.line),d=o.default.innerMode(e.getMode(),c);if("markdown"!==d.mode.name)return void e.execCommand("newlineAndIndent");var f=!1!==(c=d.state).list,h=0!==c.quote,p=e.getLine(r.line),g=a.exec(p),v=/^\s*$/.test(p.slice(0,r.ch));if(!t[i].empty()||!f&&!h||!g||v)return void e.execCommand("newlineAndIndent");if(l.test(p))/>\s*$/.test(p)||e.replaceRange("",{line:r.line,ch:0},{line:r.line,ch:r.ch+1}),n[i]="\n";else{var m=g[1],y=g[5],b=!(s.test(g[2])||g[2].indexOf(">")>=0),_=b?parseInt(g[3],10)+1+g[4]:g[2].replace("x"," ");n[i]="\n"+m+_+y,b&&u(e,r)}}e.replaceSelections(n)}},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};function a(e){return l(e)&&e.anchor.ch===e.head.ch}function l(e){return e.anchor.line===e.head.line}function s(e,t,n,i){var r=e.getLine(n.line),o=e.getLine(n.line+i),l={anchor:t,head:n};e.replaceRange(o,{line:n.line,ch:0},{line:n.line,ch:r.length},"+input"),e.replaceRange(r,{line:n.line+i,ch:0},{line:n.line+i,ch:o.length},"+input"),a(l)?e.setCursor({line:n.line+i,ch:n.ch}):e.setSelection({line:t.line+i,ch:t.ch},{line:n.line+i,ch:n.ch})}function u(e,t,n,i){var r=e.getRange({line:t.line,ch:0},{line:n.line,ch:e.getLine(n.line).length}),o=i>0?n:t,a=e.getLine(o.line+i),l=void 0;l=i>0?t:n,e.replaceRange(a,{line:l.line,ch:0},{line:l.line,ch:e.getLine(l.line).length},"+input"),e.replaceRange(r,{line:t.line+i,ch:0},{line:n.line+i,ch:e.getLine(n.line+i).length},"+input"),e.setSelection({line:t.line+i,ch:t.ch},{line:n.line+i,ch:n.ch})}o.default.commands.replaceLineTextToUpper=function(e){if(e.getOption("disableInput"))return o.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n],r=i.anchor,c=i.head;if(l(i)&&c.line>0)s(e,r,c,-1);else if(!a(i)){var d=r.line<c.line?r.line:c.line;if(d>0)u(e,r.line===d?r:c,r.line===d?c:r,-1)}}},o.default.commands.replaceLineTextToLower=function(e){if(e.getOption("disableInput"))return o.default.Pass;for(var t=e.listSelections(),n=0;n<t.length;n++){var i=t[n],r=i.anchor,c=i.head,d=c.line===e.lastLine();if(l(i)&&!d)s(e,r,c,1);else if(!a(i)){var f=r.line<c.line?r.line:c.line,h=r.line===f?r:c,p=r.line===f?c:r;p.line<e.lastLine()&&u(e,h,p,1)}}}},function(e,t,n){"use strict";var i,r=n(6),o=(i=r)&&i.__esModule?i:{default:i};function a(e){e.state.placeholder&&(e.state.placeholder.parentNode.removeChild(e.state.placeholder),e.state.placeholder=null)}function l(e){a(e);var t=e.state.placeholder=document.createElement("pre");t.style.cssText="height: 0; overflow: visible",t.className="CodeMirror-placeholder";var n=e.getOption("placeholder");"string"==typeof n&&(n=document.createTextNode(n)),t.appendChild(n),e.display.lineSpace.insertBefore(t,e.display.lineSpace.firstChild)}function s(e){c(e)&&l(e)}function u(e){var t=e.getWrapperElement(),n=c(e);t.className=t.className.replace(" CodeMirror-empty","")+(n?" CodeMirror-empty":""),n?l(e):a(e)}function c(e){return 1===e.lineCount()&&""===e.getLine(0)}o.default.defineOption("placeholder","",function(e,t,n){var i=n&&n!=o.default.Init;if(t&&!i)e.on("blur",s),e.on("change",u),e.on("swapDoc",u),u(e);else if(!t&&i){e.off("blur",s),e.off("change",u),e.off("swapDoc",u),a(e);var r=e.getWrapperElement();r.className=r.className.replace(" CodeMirror-empty","")}t&&!e.hasFocus()&&s(e)})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=/^[ \t]*([-*]|[\d]+\.)( \[[ xX]])? /,o=/^[ \t]*([*-] |[\d]+\. )(\[[ xX]] )/,a=/^[ \t]*[-*] .*/,l=/^[ \t]*[\d]+\. \[[ xX]] .*/,s=/([*-] |[\d]+\. )/,u=/([-*] |[\d]+\. )(\[[ xX]] )/,c=/([-*]|[\d]+\.)( \[[ xX]])? /,d=/([-*])( \[[ xX]]) /,f=/([\d])+\.( \[[ xX]])? /,h=/^\|([-\s\w\d\t<>?!@#$%^&*()_=+\\\/'";: \r[\]]*\|+)+/i,p=/^#+\s/,g=/^ {0,3}(```|\||>)/,v=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cm=t.getEditor(),this.doc=this.cm.getDoc(),this.name="list"}return i(e,[{key:"_createSortedLineRange",value:function(e){var t=e.from.line>e.to.line,n={line:t?e.to.line:e.from.line,ch:0},i={line:t?e.from.line:e.to.line,ch:0};return{start:n.line,end:i.line}}},{key:"_calculateOrdinalNumber",value:function(e){for(var t=1,n=e-1;n>=0;n-=1){var i=this._getListDepth(n);if(1===i&&f.exec(this.doc.getLine(n))){t=parseInt(RegExp.$1,10)+1;break}if(0===i)break}return t}},{key:"_isListLine",value:function(e){return!!r.exec(this.doc.getLine(e))}},{key:"_isCanBeList",value:function(e){var t=this.doc.getLine(e);return!g.test(t)&&!h.test(t)&&!p.test(t)}},{key:"_getChangeFn",value:function(e){var t=this,n=void 0;switch(e){case"ol":case"ul":n=function(n){return t._changeToList(n,e)};break;case"task":n=function(e){return t._changeToTask(e)}}return n}},{key:"changeSyntax",value:function(e,t){for(var n=[],i=this._createSortedLineRange(e),r=i.start,o=i.end,a=this._getChangeFn(t),l=r;l<=o&&this._isCanBeList(l);l+=1)this._isListLine(l)||n.push(l),a(l);this._insertBlankLineForNewList(n),this.cm.focus()}},{key:"_replaceLineText",value:function(e,t){this.doc.replaceRange(e,{line:t,ch:0})}},{key:"_changeToList",value:function(e,t){var n=this;this._isListLine(e)?this._changeSameDepthList(e,"ol"===t?function(e,t){n._replaceListTypeToOL(e,t)}:function(e){n._replaceListTypeToUL(e)}):this._replaceLineText("ol"===t?this._calculateOrdinalNumber(e)+". ":"* ",e)}},{key:"_changeToTask",value:function(e){o.exec(this.doc.getLine(e))?this._replaceLineTextByRegexp(e,u,"$1"):this._isListLine(e)?this._replaceLineTextByRegexp(e,s,"$1[ ] "):this._replaceLineText("* [ ] ",e)}},{key:"_getListDepth",value:function(e){return this.doc.getLine(e)?this.doc.cm.getStateAfter(e).base.listStack.length:0}},{key:"_findSameDepthList",value:function(e,t,n){for(var i=this.doc.lineCount(),r=[],o=e,a=void 0;n?o<i-1:o>0;)if(o=n?o+1:o-1,(a=this._getListDepth(o))===t)r.push(o);else if(a<t)break;return r}},{key:"_changeSameDepthList",value:function(e,t){var n=this._getListDepth(e),i=this._findSameDepthList(e,n,!1).reverse(),r=this._findSameDepthList(e,n,!0);i.concat([e]).concat(r).forEach(function(e,n){t(e,n+1)})}},{key:"_replaceLineTextByRegexp",value:function(e,t,n){var i=this.doc.getLine(e),r={line:e,ch:0},o={line:e,ch:i.length};i=i.replace(t,n),this.doc.replaceRange(i,r,o)}},{key:"_replaceListTypeToUL",value:function(e){var t=this.doc.getLine(e);d.exec(t)?this._replaceLineTextByRegexp(e,d,"$1 "):f.exec(t)&&this._replaceLineTextByRegexp(e,f,"* ")}},{key:"_replaceListTypeToOL",value:function(e,t){var n=this.doc.getLine(e);a.exec(n)||l.exec(n)?this._replaceLineTextByRegexp(e,c,t+". "):f.exec(n)&&parseInt(RegExp.$1,10)!==t&&this._replaceLineTextByRegexp(e,f,t+". ")}},{key:"_insertBlankLineForNewList",value:function(e){var t=e.length;if(t){var n=e[0],i=e[t-1];this._isNotBlankNotListLine(i+1)&&this.doc.replaceRange("\n",{line:i,ch:this.doc.getLine(i).length}),n>0&&this._isNotBlankNotListLine(n-1)&&this.doc.replaceRange("\n",{line:n,ch:0})}}},{key:"_isNotBlankNotListLine",value:function(e){return!!this.doc.getLine(e)&&!this._isListLine(e)}}]),e}();t.default=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._mde=t,this.setRange(n||t.getRange())}return i(e,[{key:"_setStart",value:function(e){this._start=e}},{key:"_setEnd",value:function(e){this._end=e}},{key:"setRange",value:function(e){this._setStart(e.start),this._setEnd(e.end)}},{key:"setEndBeforeRange",value:function(e){this._setEnd(e.start)}},{key:"expandStartOffset",value:function(){var e=this._start;0!==e.ch&&(e.ch-=1)}},{key:"expandEndOffset",value:function(){var e=this._end;e.ch<this._mde.getEditor().getDoc().getLine(e.line).length&&(e.ch+=1)}},{key:"getTextContent",value:function(){return this._mde.getEditor().getRange(this._start,this._end)}},{key:"replaceContent",value:function(e){this._mde.getEditor().replaceRange(e,this._start,this._end,"+input")}},{key:"deleteContent",value:function(){this._mde.getEditor().replaceRange("",this._start,this._end,"+delete")}},{key:"peekStartBeforeOffset",value:function(e){var t={line:this._start.line,ch:Math.max(this._start.ch-e,0)};return this._mde.getEditor().getRange(t,this._start)}}]),e}();t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=k(n(0)),o=k(n(1)),a=k(n(4)),l=k(n(58)),s=k(n(61)),u=k(n(62)),c=k(n(38)),d=k(n(39)),f=k(n(63)),h=k(n(64)),p=k(n(65)),g=k(n(40)),v=k(n(66)),m=k(n(19)),y=k(n(68)),b=k(n(37)),_=k(n(69));function k(e){return e&&e.__esModule?e:{default:e}}var w=m.default.getSharedInstance(),C=/<([a-z]+|h\d)>(<br>|<br \/>)<\/\1>/gi,S=/(?:<br>|<br \/>)<\/(.+?)>/gi,T=/\b(H[\d]|LI|P|BLOCKQUOTE|TD|PRE)\b/,E=/<span([^>]*)>[\u0020]/g,x=/[\u0020]<\/span>/g,M=/^(TABLE|H[1-6])$/,L="undefined"!==typeof MutationObserver,O=function(){function e(t,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.componentManager=new b.default(this),this.eventManager=n,this.$editorContainerEl=t,this._height=0,this._silentChange=!1,this._keyEventHandlers={},this._managers={},this._linkAttribute={},this._initEvent(),this._initDefaultKeyEventHandler(),this.debouncedPostProcessForChange=o.default.debounce(function(){return i.postProcessForChange()},0)}return i(e,[{key:"init",value:function(){var e=(0,r.default)("<div />");this.$editorContainerEl.append(e),this.editor=new v.default(e[0],{blockTag:"DIV",leafNodeNames:{HR:!1}}),this.editor.blockCommandShortcuts(),this._clipboardManager=new l.default(this),this._initSquireEvent(),this._clipboardManager.init(),this.get$Body().addClass("tui-editor-contents"),this.$editorContainerEl.css("position","relative"),this._togglePlaceholder(),this.codeBlockGadget=new _.default({eventManager:this.eventManager,container:this.$editorContainerEl,wysiwygEditor:this})}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygKeyEvent",function(t){return e._runKeyEventHandlers(t.data,t.keyMap)}),this.eventManager.listen("wysiwygRangeChangeAfter",function(){return e.scrollIntoCursor()}),this.eventManager.listen("contentChangedFromWysiwyg",function(){e._togglePlaceholder()})}},{key:"addKeyEventHandler",value:function(e,t){var n=this;t||(t=e,e="DEFAULT"),o.default.isArray(e)||(e=[e]),e.forEach(function(e){n._keyEventHandlers[e]||(n._keyEventHandlers[e]=[]),n._keyEventHandlers[e].push(t)})}},{key:"removeKeyEventHandler",value:function(e,t){t||(t=e,e="DEFAULT");var n=this._keyEventHandlers[e];n&&(this._keyEventHandlers[e]=n.filter(function(e){return e!==t}))}},{key:"_runKeyEventHandlers",value:function(e,t){var n=this.getRange(),i=void 0,r=void 0;(i=this._keyEventHandlers.DEFAULT)&&o.default.forEachArray(i,function(i){return r=i(e,n,t)}),(i=this._keyEventHandlers[t])&&!1!==r&&o.default.forEachArray(i,function(i){return i(e,n,t)})}},{key:"_initSquireEvent",value:function(){var e=this,t=this.getEditor(),n=!1;t.addEventListener("copy",function(t){e.eventManager.emit("copy",{source:"wysiwyg",data:t}),o.default.debounce(function(){e.isEditorValid()&&e.eventManager.emit("copyAfter",{source:"wysiwyg",data:t})})()}),t.addEventListener(o.default.browser.msie?"beforecut":"cut",function(t){e.eventManager.emit("cut",{source:"wysiwyg",data:t}),o.default.debounce(function(){e.isEditorValid()&&e.eventManager.emit("cutAfter",{source:"wysiwyg",data:t})})()}),t.addEventListener(o.default.browser.msie?"beforepaste":"paste",function(t){e.eventManager.emit("paste",{source:"wysiwyg",data:t})}),t.addEventListener("dragover",function(e){return e.preventDefault(),!1}),t.addEventListener("drop",function(t){return t.preventDefault(),e.eventManager.emit("drop",{source:"wysiwyg",data:t}),!1}),t.addEventListener("input",o.default.debounce(function(){if(e.isEditorValid()){if(e._silentChange)e._silentChange=!1;else{var t={source:"wysiwyg"};e.eventManager.emit("changeFromWysiwyg",t),e.eventManager.emit("change",t),e.eventManager.emit("contentChangedFromWysiwyg",e)}e.getEditor().preserveLastLine()}},0)),t.addEventListener("keydown",function(t){e.getEditor().getSelection().collapsed||(n=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:t}),e._onKeyDown(t)}),o.default.browser.firefox&&(t.addEventListener("keypress",function(t){var i=t.keyCode;13!==i&&9!==i||(e.getEditor().getSelection().collapsed||(n=!0),e.eventManager.emit("keydown",{source:"wysiwyg",data:t}),e._onKeyDown(t))}),t.addEventListener("keyup",function(){var t=e.getRange();if(a.default.isTextNode(t.commonAncestorContainer)&&a.default.isTextNode(t.commonAncestorContainer.previousSibling)){var n=t.commonAncestorContainer.previousSibling.length,i=t.commonAncestorContainer;t.commonAncestorContainer.previousSibling.appendData(t.commonAncestorContainer.data),t.setStart(t.commonAncestorContainer.previousSibling,n+t.startOffset),t.collapse(!0),i.parentNode.removeChild(i),e.setRange(t),t.detach()}})),t.addEventListener("keyup",function(t){n&&(e.debouncedPostProcessForChange(),n=!1),e.eventManager.emit("keyup",{source:"wysiwyg",data:t})}),this.$editorContainerEl.on("scroll",function(t){e.eventManager.emit("scroll",{source:"wysiwyg",data:t})}),t.addEventListener("click",function(t){e.eventManager.emit("click",{source:"wysiwyg",data:t})}),t.addEventListener("mousedown",function(t){e.eventManager.emit("mousedown",{source:"wysiwyg",data:t})}),t.addEventListener("mouseover",function(t){e.eventManager.emit("mouseover",{source:"wysiwyg",data:t})}),t.addEventListener("mouseout",function(t){e.eventManager.emit("mouseout",{source:"wysiwyg",data:t})}),t.addEventListener("mouseup",function(t){e.eventManager.emit("mouseup",{source:"wysiwyg",data:t})}),t.addEventListener("contextmenu",function(t){e.eventManager.emit("contextmenu",{source:"wysiwyg",data:t})}),t.addEventListener("focus",function(){e.eventManager.emit("focus",{source:"wysiwyg"})}),t.addEventListener("blur",function(){e.fixIMERange(),e.eventManager.emit("blur",{source:"wysiwyg"})}),t.addEventListener("pathChange",function(t){var n={bold:/(>B|>STRONG|^B$|^STRONG$)/.test(t.path),italic:/(>I|>EM|^I$|^EM$)/.test(t.path),strike:/(^S>|>S$|>S>|^S$)/.test(t.path),code:/CODE/.test(t.path),codeBlock:/PRE/.test(t.path),quote:/BLOCKQUOTE/.test(t.path),list:/LI(?!.task-list-item)/.test(e._getLastLiString(t.path)),task:/LI.task-list-item/.test(e._getLastLiString(t.path)),source:"wysiwyg"};e.eventManager.emit("stateChange",n)}),t.addEventListener("willPaste",function(t){t.fragment&&e.eventManager.emit("willPaste",{source:"wysiwyg",data:t})})}},{key:"_togglePlaceholder",value:function(){var e=this.getEditor();e.modifyDocument(function(){var t=e.getRoot();t.textContent||t.childNodes.length>1?t.classList.remove("tui-editor-contents-placeholder"):t.classList.add("tui-editor-contents-placeholder")})}},{key:"_getLastLiString",value:function(e){var t=/LI[^UO]*$/.exec(e);return t?t[0]:""}},{key:"_onKeyDown",value:function(e){var t=w.convert(e);e.keyCode&&(this.eventManager.emit("keyMap",{source:"wysiwyg",keyMap:t,data:e}),e.defaultPrevented||this.eventManager.emit("wysiwygKeyEvent",{keyMap:t,data:e}))}},{key:"_initDefaultKeyEventHandler",value:function(){var e=this;this.addKeyEventHandler("ENTER",function(t,n){e._isInOrphanText(n)&&e.defer(function(){e._wrapDefaultBlockToOrphanTexts(),e.breakToNewDefaultBlock(n,"before")}),e.defer(function(){return e.scrollIntoCursor()})}),this.addKeyEventHandler("TAB",function(t){var n=e.getEditor(),i=n.getSelection(),r=i.collapsed&&e._isCursorNotInRestrictedAreaOfTabAction(n),o=!i.collapsed&&a.default.isTextNode(i.commonAncestorContainer);return t.preventDefault(),!r&&!o||(n.insertPlainText("\xa0\xa0\xa0\xa0"),!1)}),this.addKeyEventHandler("BACK_SPACE",function(t,n,i){return e._handleRemoveKeyEvent(t,n,i)}),this.addKeyEventHandler("DELETE",function(t,n,i){return e._handleRemoveKeyEvent(t,n,i)})}},{key:"_handleRemoveKeyEvent",value:function(e,t,n){var i=this.getEditor();if(this._isStartHeadingOrTableAndContainsThem(t)){var r="BACK_SPACE"===n?"backspace":"delete";return i.removeAllFormatting(),i._keyHandlers[r](i,e,i.getSelection()),i.removeLastUndoStack(),!1}return!0}},{key:"_isStartHeadingOrTableAndContainsThem",value:function(e){var t=e.startContainer,n=e.startOffset,i=e.commonAncestorContainer,r=e.collapsed,o=this.getEditor().getRoot(),l=!1;return r||i!==o||(t===o?l=M.test(a.default.getChildNodeByOffset(t,n).nodeName):0===n&&(l=M.test(a.default.getParentUntil(t,o).nodeName))),l}},{key:"_wrapDefaultBlockToOrphanTexts",value:function(){this.get$Body().contents().filter(this.findTextNodeFilter).each(function(e,t){t.nextSibling&&"BR"===t.nextSibling.tagName&&(0,r.default)(t.nextSibling).remove(),(0,r.default)(t).wrap("<div />")})}},{key:"_isInOrphanText",value:function(e){return e.startContainer.nodeType===Node.TEXT_NODE&&e.startContainer.parentNode===this.get$Body()[0]}},{key:"_wrapDefaultBlockTo",value:function(e){this.saveSelection(e),this._joinSplitedTextNodes(),this.restoreSavedSelection();var t=(e=this.getRange()).startContainer,n=e.startOffset,i=this.getEditor().createDefaultBlock([e.startContainer]),r=a.default.getChildNodeByOffset(e.startContainer,e.startOffset);r?e.setStartBefore(r):e.selectNodeContents(e.startContainer),e.collapse(!0),e.insertNode(i),e.setStart(t,n),e.collapse(!0),this.setRange(e)}},{key:"findTextNodeFilter",value:function(){return this.nodeType===Node.TEXT_NODE}},{key:"_joinSplitedTextNodes",value:function(){var e=void 0,t=void 0,n=[];this.get$Body().contents().filter(this.findTextNodeFilter).each(function(i,r){e===r.previousSibling?(t.nodeValue+=r.nodeValue,n.push(r)):t=r,e=r}),(0,r.default)(n).remove()}},{key:"saveSelection",value:function(e){e||(e=this.getRange()),this.getEditor()._saveRangeToBookmark(e)}},{key:"setSelectionByContainerAndOffset",value:function(e,t,n,i){var r=this.getEditor(),o=r.getSelection();return o.setStart(e,t),o.setEnd(n,i),r.setSelection(o),o}},{key:"restoreSavedSelection",value:function(){this.setRange(this.getEditor()._getRangeAndRemoveBookmark())}},{key:"reset",value:function(){this.setValue("")}},{key:"changeBlockFormatTo",value:function(e){this.getEditor().changeBlockFormatTo(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"makeEmptyBlockCurrentSelection",value:function(){var e=this;this.getEditor().modifyBlocks(function(t){return t.textContent||(t=e.getEditor().createDefaultBlock()),t})}},{key:"focus",value:function(){var e=this.scrollTop();this.editor.focus(),e!==this.scrollTop()&&this.scrollTop(e)}},{key:"blur",value:function(){this.editor.blur()}},{key:"remove",value:function(){this.$editorContainerEl.off("scroll"),this.getEditor().destroy(),this.editor=null,this.$body=null,this.eventManager=null}},{key:"setHeight",value:function(e){this._height=e,this.$editorContainerEl.css("overflow","auto"),this.$editorContainerEl.css("height","100%"),this.$editorContainerEl.parent().height(e);var t=parseInt(this.$editorContainerEl.css("padding-top"),10)-parseInt(this.$editorContainerEl.css("padding-bottom"),10),n=parseInt(this.get$Body().css("margin-top"),10)-parseInt(this.get$Body().css("margin-bottom"),10);this.get$Body().css("min-height",e-n-t+"px")}},{key:"setMinHeight",value:function(e){this.get$Body().get(0).style.minHeight=e+"px"}},{key:"setPlaceholder",value:function(e){e&&this.getEditor().getRoot().setAttribute("data-placeholder",e)}},{key:"setLinkAttribute",value:function(e){this._linkAttribute=e}},{key:"getLinkAttribute",value:function(){return this._linkAttribute}},{key:"setValue",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e=this.eventManager.emitReduce("wysiwygSetValueBefore",e),this.editor.setHTML(e),this.eventManager.emit("wysiwygSetValueAfter",this),this.eventManager.emit("contentChangedFromWysiwyg",this),t&&this.moveCursorToEnd(),this.getEditor().preserveLastLine(),this.getEditor().removeLastUndoStack(),this.getEditor().saveUndoState()}},{key:"insertText",value:function(e){this.editor.insertPlainText(e)}},{key:"getValue",value:function(){this._prepareGetHTML();var e=this.editor.getHTML();return e=(e=(e=(e=(e=(e=e.replace(C,function(e,t){return"li"===t?e:"td"===t||"th"===t?"<"+t+"></"+t+">":"<br />"})).replace(E,"<span$1>&nbsp;")).replace(x,"&nbsp;</span>")).replace(S,"</$1>")).replace(/<div[^>]*>/g,"")).replace(/<\/div>/g,"<br />"),e=this.eventManager.emitReduce("wysiwygProcessHTMLText",e)}},{key:"_prepareGetHTML",value:function(){var e=this;this.getEditor().modifyDocument(function(){e._joinSplitedTextNodes(),e.eventManager.emit("wysiwygGetValueBefore",e)})}},{key:"postProcessForChange",value:function(){var e=this;this.isEditorValid()&&this.getEditor().modifyDocument(function(){e.eventManager.emit("wysiwygRangeChangeAfter",e)})}},{key:"readySilentChange",value:function(){L&&!this.getEditor().isIgnoreChange()&&(this._silentChange=!0)}},{key:"getEditor",value:function(){return this.editor}},{key:"replaceSelection",value:function(e,t){this.getEditor().replaceSelection(e,t)}},{key:"replaceRelativeOffset",value:function(e,t,n){this.getEditor().replaceRelativeOffset(e,t,n)}},{key:"addWidget",value:function(e,t,n,i){var o=this.getEditor().getSelectionPosition(e,n,i),a=this.$editorContainerEl.offset();this.$editorContainerEl.append(t),(0,r.default)(t).css({position:"absolute",top:o.top-a.top+this.scrollTop(),left:o.left-a.left})}},{key:"get$Body",value:function(){return this.getEditor().get$Body()}},{key:"hasFormatWithRx",value:function(e){return this.getEditor().getPath().match(e)}},{key:"breakToNewDefaultBlock",value:function(e,t){var n=this.editor.createDefaultBlock(),i=a.default.getChildNodeByOffset(e.startContainer,e.startOffset)||a.default.getChildNodeByOffset(e.startContainer,e.startOffset-1),o=a.default.getParentUntil(i,this.get$Body()[0]);"before"===t?(0,r.default)(o).before(n):(0,r.default)(o).after(n),e.setStart(n,0),e.collapse(!0),this.setRange(e)}},{key:"replaceContentText",value:function(e,t,n){var i=(0,r.default)(e).html();(0,r.default)(e).html(i.replace(t,n))}},{key:"unwrapBlockTag",value:function(e){e||(e=function(e){return T.test(e)}),this.getEditor().changeBlockFormat(e),this.eventManager.emit("wysiwygRangeChangeAfter",this)}},{key:"scrollIntoCursor",value:function(){var e=this.scrollTop(),t=this.getEditor().getCursorPosition(),n=t.top,i=t.height,r=this.$editorContainerEl.get(0).getBoundingClientRect(),o=r.top,a=n-o,l=n+i-(o+r.height);a<0?this.scrollTop(e+a):l>0&&this.scrollTop(Math.ceil(e+l))}},{key:"moveCursorToEnd",value:function(){this.getEditor().moveCursorToEnd(),this.scrollIntoCursor(),this._correctRangeAfterMoveCursor("end")}},{key:"moveCursorToStart",value:function(){this.getEditor().moveCursorToStart(),this.scrollTop(0)}},{key:"scrollTop",value:function(e){return o.default.isUndefined(e)?this.$editorContainerEl.scrollTop():this.$editorContainerEl.scrollTop(e)}},{key:"_correctRangeAfterMoveCursor",value:function(e){var t=this.getRange(),n=this.get$Body().get(0);if("start"===e)for(;n.firstChild;)n=n.firstChild;else for(;n.lastChild;)n=n.lastChild;"BR"===n.tagName?t.setStartBefore(n):t.setStartAfter(n),t.collapse(!0),this.setRange(t)}},{key:"getRange",value:function(){return this.getEditor().getSelection().cloneRange()}},{key:"getIMERange",value:function(){var e=void 0,t=getSelection();return t&&t.rangeCount&&(e=t.getRangeAt(0).cloneRange()),e}},{key:"fixIMERange",value:function(){var e=this.getIMERange();e&&(0,r.default)(e.commonAncestorContainer).closest(this.$editorContainerEl).length&&this.setRange(e)}},{key:"setRange",value:function(e){this.getEditor().setSelection(e)}},{key:"isInTable",value:function(e){var t=e.collapsed?e.startContainer:e.commonAncestorContainer;return!!(0,r.default)(t).closest("[contenteditable=true] table").length}},{key:"getTextObject",value:function(e){return new y.default(this,e)}},{key:"defer",value:function(e,t){var n=this;setTimeout(function(){n.isEditorValid()&&e(n)},t||0)}},{key:"isEditorValid",value:function(){return this.getEditor()&&r.default.contains(this.$editorContainerEl[0].ownerDocument,this.$editorContainerEl[0])}},{key:"_isCursorNotInRestrictedAreaOfTabAction",value:function(e){return!e.hasFormat("li")&&!e.hasFormat("blockquote")&&!e.hasFormat("table")}}],[{key:"factory",value:function(t,n,i){var r=new e(t,n,i);return r.init(),r.componentManager.addManager(s.default),r.componentManager.addManager(u.default),r.componentManager.addManager(d.default),r.componentManager.addManager(c.default),r.componentManager.addManager(f.default),r.componentManager.addManager(h.default),r.componentManager.addManager(p.default),r.componentManager.addManager(g.default),r}}]),e}();t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(0)),o=u(n(1)),a=u(n(4)),l=u(n(59)),s=u(n(60));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this._pch=new l.default(this.wwe),this._tablePasteHelper=new s.default(this.wwe),this._selectedSellCount=0,this._$clipboardArea=null}return i(e,[{key:"init",value:function(){var e=this;this.wwe.eventManager.listen("willPaste",function(t){return e._executeHandler(e._onWillPaste.bind(e),t)}),this.wwe.eventManager.listen("copy",function(t){return e._executeHandler(e._onCopyCut.bind(e),t)}),this.wwe.eventManager.listen("copyAfter",function(t){return e._executeHandler(e._onCopyAfter.bind(e),t)}),this.wwe.eventManager.listen("cut",function(t){return e._executeHandler(e._onCopyCut.bind(e),t)}),this.wwe.eventManager.listen("cutAfter",function(t){return e._executeHandler(e._onCutAfter.bind(e),t)}),this.wwe.eventManager.listen("paste",function(t){return e._executeHandler(e._onPasteIntoTable.bind(e),t)})}},{key:"_executeHandler",value:function(e,t){"wysiwyg"===t.source&&e(t)}},{key:"_onCopyCut",value:function(e){var t=this.wwe.componentManager.getManager("tableSelection");if(t.getSelectedCells().length){if(!t.mergedTableSelectionManager)return t.createRangeBySelectedCells(),void t.removeClassAttrbuteFromAllCellsIfNeed();var n=this.wwe.getEditor(),i=e.data,o=n.getSelection().cloneRange(),a=(0,r.default)("<div />");this._extendRange(o),a.append(o.cloneContents()),this._updateCopyDataForListTypeIfNeed(o,a),this.wwe.eventManager.emit("copyBefore",{source:"wysiwyg",$clipboardContainer:a}),this._setClipboardData(i,a.html(),a.text())}}},{key:"_clearClipboardArea",value:function(){this._$clipboardArea&&(this._$clipboardArea.remove(),this._$clipboardArea=null)}},{key:"_onCopyAfter",value:function(){this.wwe.getEditor().get$Body().focus(),this._clearClipboardArea()}},{key:"_onCutAfter",value:function(){this.wwe.getEditor().getSelection().deleteContents(),this.wwe.getEditor().focus(),this._clearClipboardArea()}},{key:"_onPasteIntoTable",value:function(e){var t=e.data,n=this.wwe.getEditor().getSelection();this.wwe.isInTable(n)&&this._isSingleCellSelected(n)&&this._tablePasteHelper.pasteClipboard(t)}},{key:"_isSingleCellSelected",value:function(e){var t=e.startContainer,n=e.endContainer;return this._getCell(t)===this._getCell(n)}},{key:"_getCell",value:function(e){return"TD"===e.nodeName?e:a.default.getParentUntil(e,"TR")}},{key:"_replaceNewLineToBr",value:function(e){a.default.getAllTextNode(e).forEach(function(e){/\n/.test(e.nodeValue)&&(e.parentNode.innerHTML=e.nodeValue.replace(/\n/g,"<br>"))})}},{key:"_onWillPaste",value:function(e){var t=this,n=e.data,i=(0,r.default)("<div>").append(n.fragment.cloneNode(!0));this._preparePaste(i),this._setTableBookmark(i),n.fragment=document.createDocumentFragment(),i.contents().each(function(e,t){n.fragment.appendChild(t)});this.wwe.getEditor().addEventListener("input",function e(){t.wwe.getEditor().removeEventListener("input",e),t.wwe.eventManager.emit("wysiwygRangeChangeAfter",t),t._focusTableBookmark()})}},{key:"_setClipboardData",value:function(e,t,n){o.default.browser.msie?(e.squirePrevented=!0,this._$clipboardArea=this._createClipboardArea(),this._$clipboardArea.html(t),this._$clipboardArea.focus(),window.getSelection().selectAllChildren(this._$clipboardArea[0])):(e.preventDefault(),e.stopPropagation(),e.clipboardData.setData("text/html",t),e.clipboardData.setData("text/plain",n))}},{key:"_createClipboardArea",value:function(){return(0,r.default)("<DIV>").attr({contenteditable:"true",style:"position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"}).appendTo(document.body)}},{key:"_updateCopyDataForListTypeIfNeed",value:function(e,t){var n=e.commonAncestorContainer.nodeName;if("UL"===n||"OL"===n){var i=(0,r.default)("<"+n+" />");i.append(t.html()),t.html(""),t.append(i)}}},{key:"_removeEmptyFontElement",value:function(e){e.children("font").each(function(e,t){var n=(0,r.default)(t);n.text().trim()||n.remove()})}},{key:"_isFromMs",value:function(e){return/<p style="[^>]*mso-/.test(e)}},{key:"_preProcessPtag",value:function(e){var t=e.querySelectorAll("p");o.default.forEachArray(t,function(e){e.lastChild&&"BR"!==e.lastChild.nodeName&&e.appendChild(document.createElement("br")),e.appendChild(document.createElement("br"))})}},{key:"_preparePaste",value:function(e){this._isFromMs(e.html())||this._preProcessPtag(e.get(0)),this._replaceNewLineToBr(e.get(0)),this._removeEmptyFontElement(e),this._pch.preparePaste(e),this.wwe.eventManager.emit("pasteBefore",{source:"wysiwyg",$clipboardContainer:e})}},{key:"_setTableBookmark",value:function(e){var t=(0,r.default)(e[0].childNodes).last();t[0]&&"TABLE"===t[0].nodeName&&t.addClass("tui-paste-table-bookmark")}},{key:"_focusTableBookmark",value:function(){var e=this.wwe.getEditor(),t=e.getSelection().cloneRange(),n=e.get$Body().find(".tui-paste-table-bookmark"),i=e.get$Body().find(".tui-paste-table-cell-bookmark");n.length&&(n.removeClass("tui-paste-table-bookmark"),t.setEndAfter(n[0]),t.collapse(!1),e.setSelection(t)),i.length&&(i.removeClass("tui-paste-table-cell-bookmark"),t.selectNodeContents(i[0]),t.collapse(!1),e.setSelection(t))}},{key:"_extendRange",value:function(e){(!a.default.isTextNode(e.commonAncestorContainer)||0===e.startOffset&&e.commonAncestorContainer.textContent.length===e.endOffset||"TD"===e.commonAncestorContainer.nodeName)&&(0===e.startOffset&&(e=this._extendStartRange(e)),e.endOffset===a.default.getOffsetLength(e.endContainer)&&(e=this._extendEndRange(e)),this._isWholeCommonAncestorContainerSelected(e)&&e.selectNode(e.commonAncestorContainer),this.wwe.getEditor().setSelection(e))}},{key:"_extendStartRange",value:function(e){for(var t=e.startContainer;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&!t.previousSibling;)t=t.parentNode;return e.setStart(t.parentNode,a.default.getNodeOffsetOfParent(t)),e}},{key:"_extendEndRange",value:function(e){for(var t=e.endContainer,n=t.nextSibling;t.parentNode!==e.commonAncestorContainer&&t.parentNode!==this.wwe.get$Body()[0]&&(!n||"BR"===a.default.getNodeName(n)&&t.parentNode.lastChild===n);)n=(t=t.parentNode).nextSibling;return e.setEnd(t.parentNode,a.default.getNodeOffsetOfParent(t)+1),e}},{key:"_isWholeCommonAncestorContainerSelected",value:function(e){return e.commonAncestorContainer.nodeType===Node.ELEMENT_NODE&&e.commonAncestorContainer!==this.wwe.get$Body()[0]&&0===e.startOffset&&e.endOffset===e.commonAncestorContainer.childNodes.length&&e.commonAncestorContainer===e.startContainer&&e.commonAncestorContainer===e.endContainer}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(0)),o=s(n(1)),a=s(n(4)),l=s(n(9));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t}return i(e,[{key:"preparePaste",value:function(e){var t=this.wwe.getEditor().getSelection().cloneRange(),n=this.wwe.componentManager.getManager("codeblock"),i=!1,l=(0,r.default)("<div />"),s=void 0,u=void 0,c=void 0;this._pasteFirstAid(e);for(var d=o.default.toArray(e[0].childNodes);d.length;)u=d[0],c="LI"===(s=a.default.getNodeName(u))||"UL"===s||"OL"===s,n.isInCodeBlock(t)?l.append(n.prepareToPasteOnCodeblock(d)):c?(l.append(this._prepareToPasteList(d,t,i)),i=!0):l.append(d.shift());e.html(l.html())}},{key:"_wrapOrphanNodeWithDiv",value:function(e){var t=(0,r.default)("<div />"),n=o.default.toArray(e[0].childNodes),i=void 0;return o.default.forEachArray(n,function(e){var n=3===e.nodeType,o=/^(SPAN|A|CODE|EM|I|STRONG|B|S|U|ABBR|ACRONYM|CITE|DFN|KBD|SAMP|VAR|BDO|Q|SUB|SUP)$/gi.test(e.tagName),a="BR"===e.nodeName;n||o||a?(i||(i=document.createElement("div"),t.append(i)),i.appendChild(e),a&&(i=null)):(i&&"BR"!==i.lastChild.tagName&&i.appendChild((0,r.default)("<br/>")[0]),i=null,t.append(e))}),t.html()}},{key:"_pasteFirstAid",value:function(e){var t=this,n="div, section, article, aside, nav, menus, p";e.html((0,l.default)(e.html(),!0)),e.find("*").each(function(e,n){t._removeStyles(n)}),this._unwrapIfNonBlockElementHasBr(e),this._unwrapNestedBlocks(e,n),this._removeUnnecessaryBlocks(e,n),e.html(this._wrapOrphanNodeWithDiv(e)),this._preElementAid(e),this._tableElementAid(e),e.children("br").remove()}},{key:"_preElementAid",value:function(e){this.wwe.componentManager.getManager("codeblock").modifyCodeBlockForWysiwyg(e)}},{key:"_unwrapIfNonBlockElementHasBr",value:function(e){e.find("span, a, b, em, i, s").each(function(e,t){var n=(0,r.default)(t).children("br");n.length&&"LI"!==t.nodeName&&"UL"!==t.nodeName&&n.eq(0).unwrap()})}},{key:"_unwrapNestedBlocks",value:function(e,t){e.find(":not(:has(*))").not("b,s,i,em,code,span,hr").each(function(n,i){for(var o="BR"===i.nodeName?(0,r.default)(i.parentNode):(0,r.default)(i);o.parents(t).length;){var a=o.parent(t);a.length&&a[0]!==e[0]?o.unwrap():o=o.parent()}})}},{key:"_removeUnnecessaryBlocks",value:function(e,t){e.find(t).each(function(e,n){var i=(0,r.default)(n),o="DIV"===n.tagName,a=0!==i.parent("li").length,l=0!==i.parent("blockquote").length,s=i.children(t).length;o&&(a||l||!s)||(n.lastChild&&"BR"!==n.lastChild.nodeName&&i.append(document.createElement("br")),i.replaceWith(i.html()))})}},{key:"_removeStyles",value:function(e){var t=(0,r.default)(e),n=void 0;"SPAN"!==a.default.getNodeName(t[0])?t.removeAttr("style"):(t.attr("style")&&(n=t.css("color")),t.removeAttr("style"),n?t.css("color",n):t.contents().unwrap())}},{key:"_prepareToPasteList",value:function(e,t,n){var i=a.default.getNodeName(e[0]),o=e.shift(),l=this.wwe.getEditor().getDocument().createDocumentFragment();if("LI"!==i&&e.length&&"LI"===e[0].tagName&&(i="LI",o=this._makeNodeAndAppend({tagName:i},o)),"OL"===i||"UL"===i)!n&&this.wwe.getEditor().hasFormat("LI")?(0,r.default)(l).append(this._wrapCurrentFormat(o)):(0,r.default)(l).append(o);else if("LI"===i){var s=this.wwe.getEditor().getDocument().createDocumentFragment();for(s.appendChild(o);e.length&&"LI"===e[0].tagName;)s.appendChild(e.shift());!n&&this.wwe.getEditor().hasFormat("LI")?(0,r.default)(l).append(this._wrapCurrentFormat(s)):!t||"UL"!==t.commonAncestorName&&"OL"!==t.commonAncestorName?(0,r.default)(l).append(this._makeNodeAndAppend({tagName:"UL"},s)):(0,r.default)(l).append(this._makeNodeAndAppend({tagName:t.commonAncestorName},s))}return l}},{key:"_unwrapFragmentFirstChildForPasteAsInline",value:function(e){return(0,r.default)(e).find("br").remove(),e.childNodes}},{key:"_wrapCurrentFormat",value:function(e){var t=this,n=void 0;return this._eachCurrentPath(function(i){"DIV"!==i.tagName&&(n=a.default.isElemNode(e)?e.tagName:e.firstChild.tagName,i.tagName!==n&&(e=t._makeNodeAndAppend(i,e)))}),e}},{key:"_eachCurrentPath",value:function(e){for(var t=a.default.getPath(this.wwe.getEditor().getSelection().startContainer,this.wwe.get$Body()[0]),n=t.length-1;n>-1;n-=1)e(t[n])}},{key:"_makeNodeAndAppend",value:function(e,t){var n=(0,r.default)("<"+e.tagName+"/>");return n.append(t),e.id&&n.attr("id",e.id),e.className&&n.addClass(e.className),n[0]}},{key:"_tableElementAid",value:function(e){this._removeColgroup(e),this._completeTableIfNeed(e),this._updateTableIDClassName(e)}},{key:"_removeColgroup",value:function(e){e.find("colgroup").remove()}},{key:"_completeTableIfNeed",value:function(e){var t=this.wwe.componentManager.getManager("table"),n=t.wrapDanglingTableCellsIntoTrIfNeed(e);n&&e.append(n);var i=t.wrapTrsIntoTbodyIfNeed(e);i&&e.append(i);var r=t.wrapTheadAndTbodyIntoTableIfNeed(e);r&&e.append(r)}},{key:"_updateTableIDClassName",value:function(e){var t=this.wwe.componentManager.getManager("table");e.find("table").each(function(e,t){(0,r.default)(t).removeClass(function(e,t){return t.replace(/.*\s*(te-content-table-\d+)\s*.*/,"$1")})}),e.find("table").each(function(e,n){(0,r.default)(n).addClass(t.getTableIDClassName())})}}]),e}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(1)),o=l(n(4)),a=l(n(9));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t}return i(e,[{key:"pasteClipboard",value:function(e){var t=e.clipboardData||window.clipboardData,n=t&&t.items;n?(this._pasteClipboardItem(n),e.preventDefault()):(this._pasteClipboardUsingPasteArea(),e.squirePrevented=!0)}},{key:"_pasteClipboardUsingPasteArea",value:function(){var e=this,t=this.wwe.getEditor(),n=t.getSelection(),i=n.startContainer,r=n.startOffset,o=n.endContainer,a=n.endOffset,l=document.createElement("div"),s=document.body;l.setAttribute("contenteditable",!0),l.setAttribute("style","position:fixed; overflow:hidden; top:0; right:100%; width:1px; height:1px;"),s.appendChild(l),n.selectNodeContents(l),t.setSelection(n),setTimeout(function(){var u=s.removeChild(l);n.setStart(i,r),n.setEnd(o,a),t.focus(),t.setSelection(n),e._pasteClipboardHtml(u.innerHTML)})}},{key:"_pasteClipboardItem",value:function(e){var t=this,n=null,i=null;r.default.forEachArray(e,function(e){"text/html"===e.type?i=e:"text/plain"===e.type&&(n=e)}),i?i.getAsString(function(e){t._pasteClipboardHtml(e)}):n&&n.getAsString(function(e){t._pasteClipboardContainer(document.createTextNode(e))})}},{key:"_pasteClipboardHtml",value:function(e){var t=document.createDocumentFragment(),n=e.indexOf("\x3c!--StartFragment--\x3e"),i=e.lastIndexOf("\x3c!--EndFragment--\x3e");n>-1&&i>-1&&(e=e.slice(n+"\x3c!--StartFragment--\x3e".length,i)),/<\/td>((?!<\/tr>)[\s\S])*$/i.test(e)&&(e="<TR>"+e+"</TR>"),/<\/tr>((?!<\/table>)[\s\S])*$/i.test(e)&&(e="<TABLE>"+e+"</TABLE>"),t.appendChild((0,a.default)(e)),this._pasteClipboardContainer(t)}},{key:"_pasteClipboardContainer",value:function(e){var t=this.wwe.getEditor(),n=e.childNodes;if(1===n.length&&"TABLE"===n[0].nodeName){this.wwe.componentManager.getManager("table").pasteTableData(e)}else{var i=t.getSelection().cloneRange(),r=this._preparePasteDocumentFragment(e);t.saveUndoState(i),i.collapsed||this._deleteContentsRange(i),o.default.isTextNode(i.startContainer)?this._pasteIntoTextNode(i,r):this._pasteIntoElements(i,r),t.setSelection(i)}}},{key:"_preparePasteDocumentFragment",value:function(e){var t=e.childNodes,n=document.createDocumentFragment();return t.length?n.appendChild(this._unwrapBlock(e)):this._isPossibleInsertToTable(e)&&n.appendChild(e),n}},{key:"_unwrapBlock",value:function(e){for(var t=document.createDocumentFragment(),n=r.default.toArray(e.childNodes);n.length;){var i=n.shift();if(this._isPossibleInsertToTable(i))t.appendChild(i);else{t.appendChild(this._unwrapBlock(i));var o=t.lastChild;n.length&&o&&"BR"!==o.nodeName&&t.appendChild(document.createElement("br"))}}return t}},{key:"_isPossibleInsertToTable",value:function(e){var t=e.nodeName;return!("CODE"===t&&e.childNodes.length>1)&&("UL"===t||"OL"===t||o.default.isMDSupportInlineNode(e)||o.default.isTextNode(e))}},{key:"_pasteIntoElements",value:function(e,t){var n=e.startContainer,i=e.startOffset,r=o.default.getChildNodeByOffset(n,i);if(r)n.insertBefore(t,r),e.setStart(r,0);else if("TD"===n.nodeName)n.appendChild(t),e.setStart(n,n.childNodes.length);else{var a=n.parentNode,l=n.nextSibling;a.insertBefore(t,l),l?e.setStart(l,0):e.setStartAfter(a.lastChild)}e.collapse(!0)}},{key:"_pasteIntoTextNode",value:function(e,t){var n=e.startContainer,i=e.startOffset,a=n.parentNode,l=n.textContent,s=l.slice(0,i),u=l.slice(i,l.length),c=t.childNodes,d=c[0],f=1===c.length&&o.default.isTextNode(d);if(s)if(u)if(f){var h=d.textContent;n.textContent=""+s+h+u,e.setStart(n,s.length+h.length)}else{var p=document.createDocumentFragment();p.appendChild(document.createTextNode(s)),p.appendChild(t),p.appendChild(document.createTextNode(u)),a.replaceChild(p,n);var g=r.default.toArray(a.childNodes),v=0;g.forEach(function(e,t){e.textContent===u&&(v=t)}),e.setStart(a.childNodes[v],0)}else{var m=n.nextSibling;a.insertBefore(t,m),e.setStartAfter(m)}else a.insertBefore(t,n),e.setStart(n,0);e.collapse(!0)}},{key:"_deleteContentsRange",value:function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset;t===i?(this._deleteContentsByOffset(t,n,r),e.setStart(t,n),e.collapse(!0)):this._deleteNotCollapsedRangeContents(e)}},{key:"_deleteNotCollapsedRangeContents",value:function(e){var t=e.startContainer,n=e.startOffset,i=e.endContainer,r=e.endOffset,a=e.commonAncestorContainer,l=this._getBlock(t,a,n),s=this._getBlock(i,a,r-1);if(l===s)this._removeInSameBlock(l,t,i,n,r),s=i!==s?null:s;else{var u=l.nextSibling;"TD"===t.nodeName?u=this._removeOneLine(l):(this._deleteContentsByOffset(t,n,o.default.getOffsetLength(t)),o.default.removeNodesByDirection(l,t,!1)),"TD"===i.nodeName?s=this._removeOneLine(s):(this._deleteContentsByOffset(i,0,r),o.default.removeNodesByDirection(s,i,!0)),o.default.removeChildFromStartToEndNode(a,u,s)}s?e.setStart(s,0):e.setStartAfter(l),e.collapse(!0)}},{key:"_removeInSameBlock",value:function(e,t,n,i,r){var a=t===e?i:0,l=n===e?r:o.default.getOffsetLength(e);this._deleteContentsByOffset(e,a,l)}},{key:"_removeOneLine",value:function(e){var t=e.nextSibling,n=e.parentNode,i=t;return n.removeChild(e),t&&"BR"===t.nodeName&&(i=t.nextSibling,n.removeChild(t)),i}},{key:"_getBlock",value:function(e,t,n){return o.default.getParentUntil(e,t)||o.default.getChildNodeByOffset(e,n)}},{key:"_deleteContentsByOffset",value:function(e,t,n){if(o.default.isTextNode(e)){var i=e.textContent,r=i.slice(0,t),a=i.slice(n,i.length);e.textContent=""+r+a}else{var l=o.default.getChildNodeByOffset(e,t),s=o.default.getChildNodeByOffset(e,n);l&&o.default.removeChildFromStartToEndNode(e,l,s||null)}}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(1)),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=/<li/i,u=/(<td[^>]*>)(.*?)(<\/td>)/g,c=/<(ul|ol)([^>]*)>(.*?)(<\/\1>)/g,d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="list",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._convertToArbitraryNestingList(t)}),this.eventManager.listen("wysiwygRangeChangeAfter",function(){e._findAndRemoveEmptyList(),e._removeBranchListAll()}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeBranchListAll()}),this.eventManager.listen("wysiwygProcessHTMLText",function(t){return t=e._insertBlankToBetweenSameList(t),t=e._convertFromArbitraryNestingList(t)}),this.eventManager.listen("convertorBeforeHtmlToMarkdownConverted",function(t){return e._insertDataToMarkPassForListInTable(t)}),this.eventManager.listen("convertorAfterHtmlToMarkdownConverted",function(e){return e.replace(/:BLANK_LINE:\n/g,"")})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler(["TAB","CTRL+]","META+]"],function(t){var n=void 0;return e.wwe.getEditor().hasFormat("LI")&&(t.preventDefault(),e.eventManager.emit("command","Indent"),n=!1),n}),this.wwe.addKeyEventHandler(["SHIFT+TAB","CTRL+[","META+["],function(t,n){var i=void 0;if(e.wwe.getEditor().hasFormat("LI")){t.preventDefault();var o=(0,r.default)(n.startContainer).closest("li").children("OL,UL");e.eventManager.emit("command","Outdent"),o.length&&!o.prev().length&&e._removeBranchList(o),i=!1}return i}),this.wwe.addKeyEventHandler("ENTER",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){var t=e.wwe.getRange(),n=(0,r.default)(t.startContainer).parents("li").eq(0);e._removeBranchListAll(n)})}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){n.collapsed&&e.wwe.getEditor().hasFormat("LI")&&e.wwe.defer(function(){e._removeBranchListAll()})})}},{key:"_findAndRemoveEmptyList",value:function(){this.wwe.get$Body().find("OL,UL").each(function(e,t){s.test(t.innerHTML)||(0,r.default)(t).remove()})}},{key:"_removeBranchListAll",value:function(e){var t=this;(e=e?(0,r.default)(e):this.wwe.get$Body()).find("li ul, li ol").each(function(e,n){n&&!n.previousSibling&&t._removeBranchList(n)})}},{key:"_removeBranchList",value:function(e){for(var t=(0,r.default)(e),n=t;!n[0].previousSibling&&n[0].parentElement.tagName.match(/UL|OL|LI/g);)n=n.parent();var i=n.children("li").eq(0);n.prepend(t.children().unwrap()),i.remove()}},{key:"_insertBlankToBetweenSameList",value:function(e){return e.replace(/<\/(ul|ol)>(<br \/>|<br>){0,}<\1>/g,"</$1>:BLANK_LINE:<$1>")}},{key:"_convertToArbitraryNestingList",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.querySelector("li > ul, li > ol");null!==n;){var i=n.parentNode;i.parentNode.insertBefore(n,i.nextElementSibling),n=t.querySelector("li > ul, li > ol")}return t.innerHTML}},{key:"_convertFromArbitraryNestingList",value:function(e){var t=document.createElement("div");t.innerHTML=e;for(var n=t.querySelector("ol > ol, ol > ul, ul > ol, ul > ul");null!==n;){for(var i=n.previousElementSibling;i&&"LI"!==i.tagName;)i=i.previousElementSibling;i?i.appendChild(n):this._unwrap(n),n=t.querySelector("ol > ol, ol > ul, ul > ol, ul > ul")}return t.innerHTML}},{key:"_unwrap",value:function(e){for(var t=document.createDocumentFragment();e.firstChild;)t.appendChild(e.firstChild);e.parentNode.replaceChild(t,e)}},{key:"_insertDataToMarkPassForListInTable",value:function(e){return e.replace(u,function(e,t,n,i){return""+t+n.replace(c,'<$1 data-tomark-pass="" $2>$3$4')+i})}},{key:"getLinesOfSelection",value:function(e,t){var n=[],i=!1,o=!0,l=void 0;a.default.isTextNode(e)&&(e=(0,r.default)(e).parents("DIV,LI").first().get(0)),a.default.isTextNode(t)&&(t=(0,r.default)(t).parents("DIV,LI").first().get(0));for(var s=e;o&&(0,r.default)(s).is("DIV,LI");s=l)n.push(s),s===t?i=!0:l=this._getNextLine(s,t),o=l&&!i;return n}},{key:"_getNextLine",value:function(e,t){var n=e.nextElementSibling;return n?(0,r.default)(n).is("OL,UL")&&(n=n.querySelector("li")):n=e.parentNode.nextElementSibling,(0,r.default)(n).is("DIV,LI")||n===t?n:this._getNextLine(n)}},{key:"mergeList",value:function(e){var t=e.parentNode,n=t.previousElementSibling,i=t.nextElementSibling;t.firstElementChild===e&&n&&(0,r.default)(n).is("OL,UL")&&(this._mergeList(t,n),t=n),t.lastElementChild===e&&i&&(0,r.default)(i).is("OL,UL")&&this._mergeList(i,t)}},{key:"_mergeList",value:function(e,t){var n=e.firstElementChild;if(t&&(0,r.default)(t).is("OL,UL")){for(;n;){var i=n.nextElementSibling;t.appendChild(n),n=i}e.parentNode.removeChild(e)}}},{key:"isAvailableMakeListInTable",value:function(){var e=this.wwe.componentManager.getManager("tableSelection").getSelectedCells(),t=this.wwe.getEditor();return 0===e.length&&t.hasFormat("table")&&!t.hasFormat("OL")&&!t.hasFormat("UL")}},{key:"_getParentNodeBeforeTD",value:function(e,t){var n=a.default.getParentUntil(e,"TD");if(!n){var i=e.childNodes,r=i?i.length:0,o=t>0&&t===r?t-1:t;n=a.default.getChildNodeByOffset(e,o)}return n}},{key:"_findLINodeInsideTD",value:function(e,t){var n=null,i=a.default.getParentUntilBy(e,function(e){return e&&a.default.isListNode(e)},function(e){return e&&"TD"===e.nodeName});if(i)n=i;else if("LI"===e.nodeName)n=e;else if(a.default.isListNode(e)){var r=e.childNodes.length;n=e.childNodes[t>=r?r-1:t]}return n}},{key:"_getFirstNodeInLineOfTable",value:function(e,t){var n=this._findLINodeInsideTD(e,t);if(!n)for(var i=(n=this._getParentNodeBeforeTD(e,t)).previousSibling;i&&"BR"!==i.nodeName&&!a.default.isListNode(i);)i=(n=i).previousSibling;return n}},{key:"_getLastNodeInLineOfTable",value:function(e,t){var n=this._findLINodeInsideTD(e,t);if(!n)for(n=this._getParentNodeBeforeTD(e,t);n.nextSibling&&"BR"!==n.nodeName&&!a.default.isListNode(n);)n=n.nextSibling;return n}},{key:"_isLastNodeInLineOfTable",value:function(e){var t=e.nodeName;return"LI"===t||"BR"===t}},{key:"_getNextNodeInLineOfTable",value:function(e){var t=e.nextSibling;if("LI"!==e.nodeName||t)a.default.isListNode(t)&&(t=t.firstChild);else for(var n=e.parentNode;"TD"!==n.nodeName;){if(n.nextSibling){t=n.nextSibling;break}n=n.parentNode}return t}},{key:"_getLinesOfSelectionInTable",value:function(e){for(var t=e.startContainer,n=e.endContainer,i=e.startOffset,r=e.endOffset,o=this._getFirstNodeInLineOfTable(t,i),a=this._getLastNodeInLineOfTable(n,r),l=[],s=[];o;){if(s.push(o),this._isLastNodeInLineOfTable(o)&&(l.push(s),s=[]),o===a){s.length&&l.push(s);break}o=this._getNextNodeInLineOfTable(o)}return l}},{key:"_createListElement",value:function(e){return document.createElement("TASK"===e?"UL":e)}},{key:"_createListItemElement",value:function(e,t){var n=document.createElement("li");(e.forEach(function(e){n.appendChild(e)}),"TASK"===t)&&this.wwe.componentManager.getManager("task").formatTask(n);return n}},{key:"_mergeListWithPreviousSibiling",value:function(e){var t=e.previousSibling,n=e;return t&&e.nodeName===t.nodeName&&(this._mergeList(e,t),n=t),n}},{key:"_mergeListWithNextSibiling",value:function(e){var t=e.nextSibling;return t&&e.nodeName===t.nodeName&&this._mergeList(t,e),e}},{key:"createListInTable",value:function(e,t){var n=this,i=this._getLinesOfSelectionInTable(e),r=i[i.length-1],a=r[r.length-1],l=a.nextSibling,s=a.parentNode,u=this._createListElement(t),c=u.nodeName,d=[];return i.forEach(function(e){var i=e[0],r=void 0;if("LI"===i.nodeName){var a=i.parentNode;if(r=i,a.nodeName!==c){var l=a.childNodes;o.default.forEachArray(l,function(){u.appendChild(a.firstChild)}),a.parentNode.replaceChild(u,a)}u=r.parentNode}else r=n._createListItemElement(e,t),u.appendChild(r);d.push(r)}),u.parentNode||s.insertBefore(u,l),u=this._mergeListWithPreviousSibiling(u),this._mergeListWithNextSibiling(u),d}},{key:"adjustRange",value:function(e,t,n,i,r){var o=a.default.containsNode(r[0],e)?e:r[0],l=a.default.containsNode(r[r.length-1],t)?t:r[r.length-1],s="TD"===e.nodeName?0:n,u="TD"===t.nodeName?0:i;this.wwe.setSelectionByContainerAndOffset(o,s,l,u)}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="task",this._init()}return i(e,[{key:"_init",value:function(){this._initKeyHandler(),this._initEvent(),this.wwe.getEditor().addEventListener("mousedown",function(e){var t=getComputedStyle(e.target,":before");e.target.hasAttribute("data-te-task")&&o.default.isInsideTaskBox(t,e.offsetX,e.offsetY)&&(e.preventDefault(),(0,r.default)(e.target).toggleClass("checked"))})}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._removeTaskListClass()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){e.isInTaskList(n)&&e.wwe.defer(function(){var t=e.wwe.getRange();(0,r.default)(t.startContainer).closest("li").removeClass("checked")})})}},{key:"isInTaskList",value:function(e){var t=void 0;return e||(e=this.wwe.getEditor().getSelection().cloneRange()),t=e.startContainer.nodeType===Node.ELEMENT_NODE&&"LI"===e.startContainer.tagName?e.startContainer:(0,r.default)(e.startContainer).parents("li").get(0),(0,r.default)(t).hasClass("task-list-item")}},{key:"unformatTask",value:function(e){var t=(0,r.default)(e).closest("li");t.removeClass("task-list-item"),t.removeClass("checked"),t.removeAttr("data-te-task"),t.attr("class")||t.removeAttr("class")}},{key:"formatTask",value:function(e){var t=(0,r.default)(e).closest("li");t.addClass("task-list-item"),t.attr("data-te-task","")}},{key:"_formatTaskIfNeed",value:function(){var e=this.wwe.getEditor().getSelection().cloneRange();this.isInTaskList(e)&&this.formatTask(e.startContainer)}},{key:"_removeTaskListClass",value:function(){this.wwe.get$Body().find(".task-list").each(function(e,t){(0,r.default)(t).removeClass("task-list")})}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(1)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="hr",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._insertEmptyLineIfNeed(),e._changeHRForWysiwyg()})}},{key:"_insertEmptyLineIfNeed",value:function(){var e=this.wwe.get$Body()[0],t=e.firstChild,n=e.lastChild;t&&"HR"===t.nodeName?e.insertBefore(o.default.createEmptyLine(),t):n&&"HR"===n.nodeName&&e.appendChild(o.default.createEmptyLine())}},{key:"_changeHRForWysiwyg",value:function(){var e=this.wwe.get$Body()[0].querySelectorAll("hr");r.default.forEachArray(e,function(e){e.parentNode.replaceChild(o.default.createHorizontalRule(),e)})}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};var l=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="p",this._initEvent()}return r(e,[{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueBefore",function(t){return e._splitPtagContentLines(t)}),this.eventManager.listen("wysiwygSetValueAfter",function(){e._ensurePtagContentWrappedWithDiv(),e._unwrapPtags()})}},{key:"_splitPtagContentLines",value:function(e){if(e){var t=(0,a.default)("<div />");t.html(e),t.find("p").each(function(e,t){var n=t.innerHTML.split(/<br>/gi),i=n.length-1,r=t.nextElementSibling||t.nextSibling,o="";o=n.map(function(e,t){var n="";return t>0&&t<i&&(e=e||"<br>"),e&&(n="<div>"+e+"</div>"),n}),r&&"P"===r.nodeName&&o.push("<div><br></div>"),(0,a.default)(t).replaceWith((0,a.default)(o.join("")))}),e=t.html()}return e}},{key:"_ensurePtagContentWrappedWithDiv",value:function(){this.wwe.get$Body().find("p").each(function(e,t){(0,a.default)(t).find("div").length<=0&&(0,a.default)(t).wrapInner("<div />"),(0,a.default)(t).next().is("p")&&(0,a.default)(t).append("<div><br></div>")})}},{key:"_unwrapPtags",value:function(){this.wwe.get$Body().find("div").each(function(e,t){(0,a.default)(t).parent().is("p")&&(0,a.default)(t).unwrap()})}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=/h[\d]/i,s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.wwe=t,this.eventManager=t.eventManager,this.name="heading",this._init()}return i(e,[{key:"_init",value:function(){this._initEvent(),this._initKeyHandler()}},{key:"_initEvent",value:function(){var e=this;this.eventManager.listen("wysiwygSetValueAfter",function(){e._wrapDefaultBlockToHeadingInner()})}},{key:"_initKeyHandler",value:function(){var e=this;this.wwe.addKeyEventHandler("ENTER",function(t,n){return!e.wwe.hasFormatWithRx(l)||(e._onEnter(t,n),!1)}),this.wwe.addKeyEventHandler("BACK_SPACE",function(t,n){return!e.wwe.hasFormatWithRx(l)||(e._removePrevTopNodeIfNeed(t,n),!1)})}},{key:"_wrapDefaultBlockToHeadingInner",value:function(){this.wwe.get$Body().find("h1, h2, h3, h4, h5, h6").each(function(e,t){(0,r.default)(t).children("div, p").length<=0&&(0,r.default)(t).wrapInner("<div />")})}},{key:"_unwrapHeading",value:function(){this.wwe.unwrapBlockTag(function(e){return l.test(e)})}},{key:"_onEnter",value:function(e,t){var n=this;t.startOffset>0?this.wwe.defer(function(e){n._unwrapHeading(),e.getEditor().removeLastUndoStack()}):(e.preventDefault(),this._insertEmptyBlockToPrevious(t))}},{key:"_insertEmptyBlockToPrevious",value:function(e){this.wwe.getEditor().saveUndoState(e),(0,r.default)("<div><br></div>").insertBefore(o.default.getParentUntil(e.startContainer,this.wwe.get$Body()[0]))}},{key:"_removePrevTopNodeIfNeed",value:function(e,t){var n=!1;if(t.collapsed&&0===t.startOffset){var i=t.startContainer,a=o.default.getTopPrevNodeUnder(i,this.wwe.get$Body()[0]),l=a&&0===a.textContent.length,s=this.wwe.getEditor();0===i.textContent.length?n=this._removeHedingAndChangeSelection(e,t,a):l&&(e.preventDefault(),s.saveUndoState(t),(0,r.default)(a).remove(),n=!0)}return n}},{key:"_removeHedingAndChangeSelection",value:function(e,t,n){var i=t.startContainer,a=this.wwe.getEditor(),s=this.wwe.get$Body(),u=l.test(o.default.getNodeName(i))?i:(0,r.default)(i).parents("h1,h2,h3,h4,h5,h6")[0],c=n,d=1;return e.defaultPrevented||(e.preventDefault(),a.saveUndoState(t)),(0,r.default)(u).remove(),n||(c=s.children("div").first().get(0),d=0),t.setStart(c,d),t.collapse(!0),a.setSelection(t),!0}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=u(n(0)),o=u(n(1)),a=u(n(67)),l=u(n(4)),s=n(14);function u(e){return e&&e.__esModule?e:{default:e}}var c=/\b(H[\d]|LI|P|BLOCKQUOTE|TD)\b/,d=/Trident\/[456]\./.test(navigator.userAgent),f=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(i)));return a._decorateHandlerToCancelable("copy"),a._decorateHandlerToCancelable(d?"beforecut":"cut"),a._decorateHandlerToCancelable(d?"beforepaste":"paste"),a.get$Body=function(){return a.$body=a.$body||(0,r.default)(a.getRoot()),a.$body},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_decorateHandlerToCancelable",value:function(e){var t=this._events[e];if(t.length>1)throw new Error("too many"+e+"handlers in squire");var n=t[0].bind(this);t[0]=function(e){e.defaultPrevented||e.squirePrevented||n(e)}}},{key:"changeBlockFormat",value:function(e,t){var n=this;this.modifyBlocks(function(i){var r=void 0,a=void 0,s=void 0,u=void 0,c=void 0,d=void 0,f=void 0;if(i.childNodes.length?r=i.childNodes.item(0):(r=n.createDefaultBlock(),i.appendChild(r)),e){for(;r.firstChild;)r=r.firstChild;for(f=function(e){u.appendChild(e)};r!==i;){if(c=r.tagName,o.default.isFunction(e)?e(c):c===e){u=r.childNodes.item(0),(!l.default.isElemNode(u)||r.childNodes.length>1)&&(u=n.createDefaultBlock(),o.default.forEachArray(o.default.toArray(r.childNodes),f),(d=u.lastChild)&&"BR"===l.default.getNodeName(d)&&u.removeChild(d)),s=t?n.createElement(t,[u]):u,(a=n.getDocument().createDocumentFragment()).appendChild(s),i=a;break}r=r.parentNode}}return a&&e||!t||"DIV"!==l.default.getNodeName(i.childNodes[0])||(i=n.createElement(t,[i.childNodes[0]])),i})}},{key:"changeBlockFormatTo",value:function(e){this.changeBlockFormat(function(e){return c.test(e)},e)}},{key:"getCaretPosition",value:function(){return this.getCursorPosition()}},{key:"replaceSelection",value:function(e,t){t&&this.setSelection(t),this._ignoreChange=!0,this.insertHTML(e)}},{key:"replaceRelativeOffset",value:function(e,t,n){var i=this.getSelection().cloneRange();this._replaceRelativeOffsetOfSelection(e,t,n,i)}},{key:"_replaceRelativeOffsetOfSelection",value:function(e,t,n,i){var r=void 0,o=void 0,a=void 0,s=i.endContainer,u=i.endOffset;"TEXT"!==l.default.getNodeName(s)&&(s=this._getClosestTextNode(s,u))&&(u=l.default.isTextNode(s)?s.nodeValue.length:s.textContent.length),s?(r=this.getSelectionInfoByOffset(s,u+t),i.setStart(r.element,r.offset),a=u+(t+n),o=this.getSelectionInfoByOffset(s,a),i.setEnd(o.element,o.offset),this.replaceSelection(e,i)):this.replaceSelection(e)}},{key:"_getClosestTextNode",value:function(e,t){var n=l.default.getChildNodeByOffset(e,t-1);return"TEXT"!==l.default.getNodeName(n)&&(n=n.previousSibling),n}},{key:"getSelectionInfoByOffset",value:function(e,t){var n=void 0,i=void 0,r=void 0,o=void 0,a=t>=0?"next":"previous",s=Math.abs(t),u=n;for(n="next"===a?e:e.previousSibling,r=s,o=0;n&&!(s<=(o+=i=l.default.isTextNode(n)?n.nodeValue.length:n.textContent.length));)r-=i,l.default.getTextLength(n)>0&&(u=n),n=n[a+"Sibling"];return n||(n=u,r=l.default.getTextLength(n)),"previous"===a&&(r=l.default.getTextLength(n)-r),{element:n,offset:r}}},{key:"getSelectionPosition",value:function(e,t,n){var i=this.createElement("INPUT"),o=e.cloneRange(),a=this.getSelectionInfoByOffset(e.endContainer,e.endOffset+(n||0));o.setStart(o.startContainer,o.startOffset),o.setEnd(a.element,a.offset),this._ignoreChange=!0,this.insertElement(i,o);var l=(0,r.default)(i).offset();return"over"!==t&&(l.top+=(0,r.default)(i).outerHeight()),i.parentNode.removeChild(i),e.setStart(e.endContainer,e.endOffset),e.collapse(!0),this.setSelection(e),l}},{key:"removeLastUndoStack",value:function(){this._undoStack.length&&(this._undoStackLength-=1,this._undoIndex-=1,this._undoStack.pop(),this._isInUndoState=!1)}},{key:"replaceParent",value:function(e,t,n){var i=(0,r.default)(e).closest(t);i.length&&(i.wrapInner("<"+n+"/>"),i.children().unwrap())}},{key:"preserveLastLine",value:function(){var e=this.get$Body().children().last();"DIV"!==l.default.getNodeName(e[0])&&(this._ignoreChange=!0,(0,r.default)(this.createDefaultBlock()).insertAfter(e))}},{key:"scrollTop",value:function(e){return o.default.isUndefined(e)?this.get$Body().scrollTop():this.get$Body().scrollTop(e)}},{key:"isIgnoreChange",value:function(){return this._ignoreChange}},{key:"focus",value:function(){a.default.prototype.focus.call(this)}},{key:"blockCommandShortcuts",value:function(){var e=this,t=s.isMac?"meta":"ctrl";["b","i","u","shift-7","shift-5","shift-6","shift-8","shift-9","[","]","d"].forEach(function(n){e.setKeyHandler(t+"-"+n,function(e,t){t.preventDefault()})})}}]),t}();t.default=f},function(e,t){e.exports=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(1)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=r.default.browser.msie&&11===r.default.browser.version,s=-1!==navigator.appVersion.indexOf("Win")&&r.default.browser.chrome,u=/Windows (NT )?10/g.test(navigator.appVersion),c=l||s&&!u,d=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._wwe=t,c&&(this.isComposition=!1,this._initCompositionEvent()),this.setRange(n||this._wwe.getRange())}return i(e,[{key:"_initCompositionEvent",value:function(){var e=this;this._wwe.getEditor().addEventListener("compositionstart",function(){e.isComposition=!0}),this._wwe.getEditor().addEventListener("compositionend",function(){e.isComposition=!1})}},{key:"setRange",value:function(e){this._range&&this._range.detach(),this._range=e}},{key:"expandStartOffset",value:function(){var e=this._range;o.default.isTextNode(e.startContainer)&&e.startOffset>0&&e.setStart(e.startContainer,e.startOffset-1)}},{key:"expandEndOffset",value:function(){var e=this._range;o.default.isTextNode(e.endContainer)&&e.endOffset<e.endContainer.nodeValue.length&&e.setEnd(e.endContainer,e.endOffset+1)}},{key:"setEndBeforeRange",value:function(e){var t=e.startOffset;this.isComposition&&(t+=1),this._range.setEnd(e.startContainer,t)}},{key:"getTextContent",value:function(){return this._range.cloneContents().textContent}},{key:"replaceContent",value:function(e){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(e),this._wwe.isInTable(this._range)&&this._wwe.eventManager.emit("wysiwygRangeChangeAfter",this._wwe),this._range=this._wwe.getRange()}},{key:"deleteContent",value:function(){this._wwe.getEditor().setSelection(this._range),this._wwe.getEditor().insertHTML(""),this._range=this._wwe.getRange()}},{key:"peekStartBeforeOffset",value:function(e){var t=this._range.cloneRange();return t.setStart(t.startContainer,Math.max(t.startOffset-e,0)),t.setEnd(this._range.startContainer,this._range.startOffset),t.cloneContents().textContent}}]),e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=l(n(0)),a=l(n(70));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){var n=e.eventManager,i=e.container,r=e.wysiwygEditor;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{eventManager:n,container:i,attachedSelector:"pre"}));return o._wysiwygEditor=r,o._popupCodeBlockLanguages=null,o._initDOM(),o._initDOMEvent(),o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_initDOM",value:function(){var e=this;this.$el.addClass("code-block-header"),this._$languageLabel=(0,o.default)("<span>text</span>"),this.$el.append(this._$languageLabel),this._$buttonOpenModalEditor=(0,o.default)('<button type="button">Editor</button>'),this.$el.append(this._$buttonOpenModalEditor),this._eventManager.emit("removeEditor",function(){e._$buttonOpenModalEditor.off("click"),e._$buttonOpenModalEditor=null})}},{key:"_initDOMEvent",value:function(){var e=this;this._$buttonOpenModalEditor.on("click",function(){return e._openPopupCodeBlockEditor()})}},{key:"_openPopupCodeBlockEditor",value:function(){this._eventManager.emit("openPopupCodeBlockEditor",this.getAttachedElement())}},{key:"_updateLanguage",value:function(){var e=this.getAttachedElement(),t=e?e.getAttribute("data-language"):null;this._$languageLabel.text(t||"text")}},{key:"syncLayout",value:function(){var e=(0,o.default)(this.getAttachedElement()),t=e.offset();t.left=t.left+(e.outerWidth()-250),this.$el.offset(t),this.$el.height(30),this.$el.width(250)}},{key:"onShow",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onShow",this).call(this),this._onAttachedElementChange=function(){return e._updateLanguage()},(0,o.default)(this.getAttachedElement()).on("language-changed",this._onAttachedElementChange),this._updateLanguage()}},{key:"onHide",value:function(){(0,o.default)(this.getAttachedElement()).off("language-changed",this._onAttachedElementChange),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onHide",this).call(this)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};var l=function(){function e(t){var n=t.eventManager,i=t.container,r=t.attachedSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventManager=n,this._attachedSelector="[contenteditable=true] "+r,this._$container=(0,a.default)(i),this._$attachedElement=null,this.active=!1,this._createElement(),this._initEvent()}return r(e,[{key:"_createElement",value:function(){this.$el=(0,a.default)('<div class="te-ww-block-overlay">'),this.$el.css({position:"absolute",display:"none","z-index":1}),this._$container.append(this.$el)}},{key:"_initEvent",value:function(){var e=this;this._eventManager.listen("change",this._onChange.bind(this)),this._eventManager.listen("mouseover",this._onMouseOver.bind(this)),this._eventManager.listen("focus",function(){e.setVisibility(!1)}),this._eventManager.listen("mousedown",function(){e.setVisibility(!1)})}},{key:"_onChange",value:function(){this._$attachedElement&&a.default.contains(document,this._$attachedElement[0])?this.syncLayout():this.setVisibility(!1)}},{key:"_onMouseOver",value:function(e){var t=e.data,n=(0,a.default)(t.target),i=n.closest(this._attachedSelector);i.length?(this._$attachedElement=i,this.setVisibility(!0)):n.closest(this.$el).length?this.setVisibility(!0):this.active||this.setVisibility(!1)}},{key:"syncLayout",value:function(){this.$el.offset(this._$attachedElement.offset()),this.$el.width(this._$attachedElement.outerWidth()),this.$el.height(this._$attachedElement.outerHeight())}},{key:"getAttachedElement",value:function(){return this._$attachedElement?this._$attachedElement.get(0):null}},{key:"getVisibility",value:function(){return"block"===this.$el.css("display")}},{key:"setVisibility",value:function(e){e&&this._$attachedElement?this.getVisibility()||(this.$el.css("display","block"),this.syncLayout(),this.onShow()):e||this.getVisibility()&&(this.$el.css("display","none"),this.onHide())}},{key:"onShow",value:function(){}},{key:"onHide",value:function(){this.active=!1,this._$attachedElement=null}}]),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),a=(i=o)&&i.__esModule?i:{default:i};var l=['<div class="tui-editor">','<div class="te-md-container">','<div class="te-editor" />','<div class="te-md-splitter" />','<div class="te-preview" />',"</div>",'<div class="te-ww-container">','<div class="te-editor" />',"</div>","</div>"].join(""),s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=(0,a.default)(t.el),this.height=t.height,this.type=t.initialEditType,this.eventManager=n,this.init(),this._initEvent()}return r(e,[{key:"init",value:function(){this._renderLayout(),this._initMarkdownAndPreviewSection(),this._initWysiwygSection()}},{key:"_initEvent",value:function(){this.eventManager.listen("hide",this.hide.bind(this)),this.eventManager.listen("show",this.show.bind(this))}},{key:"_renderLayout",value:function(){this.$el.css("box-sizing","border-box"),this.$containerEl=(0,a.default)(l).appendTo(this.$el)}},{key:"switchToWYSIWYG",value:function(){this.$containerEl.removeClass("te-md-mode"),this.$containerEl.addClass("te-ww-mode")}},{key:"switchToMarkdown",value:function(){this.$containerEl.removeClass("te-ww-mode"),this.$containerEl.addClass("te-md-mode")}},{key:"_initMarkdownAndPreviewSection",value:function(){this.$mdEditorContainerEl=this.$containerEl.find(".te-md-container .te-editor"),this.$previewEl=this.$containerEl.find(".te-md-container .te-preview")}},{key:"_initWysiwygSection",value:function(){this.$wwEditorContainerEl=this.$containerEl.find(".te-ww-container .te-editor")}},{key:"_verticalSplitStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-tab"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-vertical")}},{key:"_tabStyle",value:function(){this.$containerEl.find(".te-md-container").removeClass("te-preview-style-vertical"),this.$containerEl.find(".te-md-container").addClass("te-preview-style-tab")}},{key:"changePreviewStyle",value:function(e){"tab"===e?this._tabStyle():"vertical"===e&&this._verticalSplitStyle()}},{key:"hide",value:function(){this.$el.find(".tui-editor").addClass("te-hide")}},{key:"show",value:function(){this.$el.find(".tui-editor").removeClass("te-hide")}},{key:"remove",value:function(){this.$el.find(".tui-editor").remove()}},{key:"getEditorEl",value:function(){return this.$containerEl}},{key:"getPreviewEl",value:function(){return this.$previewEl}},{key:"getMdEditorContainerEl",value:function(){return this.$mdEditorContainerEl}},{key:"getWwEditorContainerEl",value:function(){return this.$wwEditorContainerEl}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=y(n(0)),o=y(n(73)),a=y(n(44)),l=y(n(5)),s=y(n(78)),u=y(n(79)),c=y(n(80)),d=y(n(81)),f=y(n(82)),h=y(n(83)),p=y(n(84)),g=y(n(85)),v=y(n(3)),m=y(n(35));function y(e){return e&&e.__esModule?e:{default:e}}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"name",{enumerable:!0,writable:!0,value:"default"}),Object.defineProperty(this,"_popups",{enumerable:!0,writable:!0,value:[]}),this._editor=t,this._initialEditType=t.options.initialEditType,this._init(t.options),this._initEvent()}return i(e,[{key:"_init",value:function(e){var t=e.el,n=e.toolbarItems,i=e.hideModeSwitch;this.$el=(0,r.default)('\n    <div class="tui-editor-defaultUI">\n        <div class="te-toolbar-section"><div class="te-markdown-tab-section"></div></div>\n        <div class="te-editor-section"></div>\n        <div class="te-mode-switch-section"></div>\n    </div>\n').appendTo(t),this._container=t,this._editorSection=this.$el.find(".te-editor-section").get(0),this._editorSection.appendChild(this._editor.layout.getEditorEl().get(0)),this._initToolbar(this._editor.eventManager,n),this._initModeSwitch(i),this._initPopupAddLink(),this._initPopupAddImage(),this._initPopupAddTable(),this._initPopupAddHeading(),this._initPopupTableUtils(),this._initPopupCodeBlockLanguages(),this._initPopupCodeBlockEditor(),this._initMarkdownTab()}},{key:"_initEvent",value:function(){this._editor.eventManager.listen("hide",this.hide.bind(this)),this._editor.eventManager.listen("show",this.show.bind(this)),this._editor.eventManager.listen("changeMode",this._markdownTabControl.bind(this)),this._editor.eventManager.listen("changePreviewStyle",this._markdownTabControl.bind(this))}},{key:"_initToolbar",value:function(e,t){var n=new o.default(e,t);this._toolbar=n,this.$el.find(".te-toolbar-section").append(n.$el)}},{key:"_initModeSwitch",value:function(e){var t=this,n=this.$el.find(".te-mode-switch-section"),i="markdown"===this._initialEditType?s.default.TYPE.MARKDOWN:s.default.TYPE.WYSIWYG,r=new s.default(n,i);this._modeSwitch=r,e&&r.hide(),r.on("modeSwitched",function(e,n){return t._editor.changeMode(n)})}},{key:"_initMarkdownTab",value:function(){var e=this._editor;this._markdownTab=new a.default({initName:v.default.get("Write"),items:[v.default.get("Write"),v.default.get("Preview")],sections:[e.layout.getMdEditorContainerEl(),e.layout.getPreviewEl()]}),this._$markdownTabSection=this.$el.find(".te-markdown-tab-section"),this._$markdownTabSection.append(this._markdownTab.$el),this._markdownTab.on("itemClick",function(t,n){n===v.default.get("Preview")?(e.eventManager.emit("previewNeedsRefresh"),e.eventManager.emit("changePreviewTabPreview"),e.eventManager.emit("closeAllPopup")):(e.getCodeMirror().focus(),e.eventManager.emit("changePreviewTabWrite"))})}},{key:"_markdownTabControl",value:function(){this._editor.isMarkdownMode()&&"tab"===this._editor.getCurrentPreviewStyle()?(this._$markdownTabSection.show(),this._markdownTab.activate(v.default.get("Write"))):this._$markdownTabSection.hide()}},{key:"_initPopupAddLink",value:function(){this._popups.push(new u.default({$target:this.$el,editor:this._editor}))}},{key:"_initPopupAddImage",value:function(){this._popups.push(new c.default({$target:this.$el,eventManager:this._editor.eventManager}))}},{key:"_initPopupAddTable",value:function(){this._popups.push(new f.default({$target:this._toolbar.$el,eventManager:this._editor.eventManager,$button:this.$el.find("button.tui-table"),css:{position:"absolute"}}))}},{key:"_initPopupAddHeading",value:function(){this._popups.push(new h.default({$target:this._toolbar.$el,eventManager:this._editor.eventManager,$button:this.$el.find("button.tui-heading"),css:{position:"absolute"}}))}},{key:"_initPopupTableUtils",value:function(){var e=this;this._editor.eventManager.listen("contextmenu",function(t){(0,r.default)(t.data.target).parents("[contenteditable=true] table").length>0&&(t.data.preventDefault(),e._editor.eventManager.emit("openPopupTableUtils",t.data))}),this._popups.push(new d.default({$target:this.$el,eventManager:this._editor.eventManager}))}},{key:"_initPopupCodeBlockLanguages",value:function(){var e=this._editor;this._popups.push(new p.default({$target:this.$el,eventManager:e.eventManager,languages:e.options.codeBlockLanguages}))}},{key:"_initPopupCodeBlockEditor",value:function(){this._popups.push(new g.default({$target:this.$el,eventManager:this._editor.eventManager,convertor:this._editor.convertor}))}},{key:"getToolbar",value:function(){return this._toolbar}},{key:"setToolbar",value:function(e){this._toolbar.destroy(),this._toolbar=e}},{key:"getModeSwitch",value:function(){return this._modeSwitch}},{key:"getEditorSectionHeight",value:function(){var e=this._editorSection.getBoundingClientRect();return e.bottom-e.top}},{key:"getEditorHeight",value:function(){var e=this._container.getBoundingClientRect();return e.bottom-e.top}},{key:"getPopupTableUtils",value:function(){var e=void 0;return this._popups.forEach(function(t){t instanceof d.default&&(e=t)}),e}},{key:"hide",value:function(){this.$el.addClass("te-hide")}},{key:"show",value:function(){this.$el.removeClass("te-hide")}},{key:"remove",value:function(){this.$el.remove(),this._markdownTab.remove(),this._modeSwitch.remove(),this._toolbar.destroy(),this._popups.forEach(function(e){return e.remove()}),this._popups=[],m.default.hide()}},{key:"createPopup",value:function(e){return new l.default(e)}}]),e}();t.default=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=c(n(74)),a=c(n(3)),l=c(n(41)),s=c(n(77)),u=c(n(43));function c(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i._init(e),i._bindWidthChangedEvent(),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"insertItem",value:function(e,n){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",this).call(this,e,n),this._arrangeMoreButton()}},{key:"_init",value:function(e){var t=u.default.create("button",{name:"more",className:"tui-more",tooltip:a.default.get("More"),event:s.default.OPEN_EVENT});this._moreButton=t,this._popupDropdownToolbar=new s.default({eventManager:e,$target:this.$el,$button:t.$el}),this.addItem(t)}},{key:"_bindWidthChangedEvent",value:function(){var e=this;this._observer=new o.default(function(){e._popupDropdownToolbar.hide(),e._balanceButtons()}),this._observer.observe(this.$el.get(0))}},{key:"_balanceButtons",value:function(){var e=this;this._popupDropdownToolbar.getItems().forEach(function(n){e._popupDropdownToolbar.removeItem(n,!1);var i=e.getItems().length;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",e).call(e,i,n)}),this.removeItem(this._moreButton,!1),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",this).call(this,0,this._moreButton);var n=this.$el.height();this.getItems().filter(function(e){return e.$el.position().top>n}).forEach(function(t){e.removeItem(t,!1),e._popupDropdownToolbar.addItem(t)}),this._arrangeMoreButton()}},{key:"_arrangeMoreButton",value:function(){if(this._popupDropdownToolbar){this.removeItem(this._moreButton,!1);var e=this._popupDropdownToolbar.getItems().length>0,n=this.getItems().length;e&&r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"insertItem",this).call(this,n,this._moreButton)}}},{key:"destroy",value:function(){this._observer&&(this._observer.disconnect(),this._observer=null)}}]),t}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){var n=function(){if("undefined"!==typeof Map)return Map;function e(e,t){var n=-1;return e.some(function(e,i){return e[0]===t&&(n=i,!0)}),n}return function(){function t(){this.__entries__=[]}var n={size:{configurable:!0}};return n.size.get=function(){return this.__entries__.length},t.prototype.get=function(t){var n=e(this.__entries__,t),i=this.__entries__[n];return i&&i[1]},t.prototype.set=function(t,n){var i=e(this.__entries__,t);~i?this.__entries__[i][1]=n:this.__entries__.push([t,n])},t.prototype.delete=function(t){var n=this.__entries__,i=e(n,t);~i&&n.splice(i,1)},t.prototype.has=function(t){return!!~e(this.__entries__,t)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(e,t){void 0===t&&(t=null);for(var n=0,i=this.__entries__;n<i.length;n+=1){var r=i[n];e.call(t,r[1],r[0])}},Object.defineProperties(t.prototype,n),t}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,r="undefined"!==typeof e&&e.Math===Math?e:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")(),o="function"===typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)},a=2,l=["top","right","bottom","left","width","height","size","weight"],s="undefined"!==typeof MutationObserver,u=function(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=function(e,t){var n=!1,i=!1,r=0;function l(){n&&(n=!1,e()),i&&u()}function s(){o(l)}function u(){var e=Date.now();if(n){if(e-r<a)return;i=!0}else n=!0,i=!1,setTimeout(s,t);r=e}return u}(this.refresh.bind(this),20)};u.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},u.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},u.prototype.refresh=function(){this.updateObservers_()&&this.refresh()},u.prototype.updateObservers_=function(){var e=this.observers_.filter(function(e){return e.gatherActive(),e.hasActive()});return e.forEach(function(e){return e.broadcastActive()}),e.length>0},u.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),s?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},u.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},u.prototype.onTransitionEnd_=function(e){var t=e.propertyName;void 0===t&&(t=""),l.some(function(e){return!!~t.indexOf(e)})&&this.refresh()},u.getInstance=function(){return this.instance_||(this.instance_=new u),this.instance_},u.instance_=null;var c=function(e,t){for(var n=0,i=Object.keys(t);n<i.length;n+=1){var r=i[n];Object.defineProperty(e,r,{value:t[r],enumerable:!1,writable:!1,configurable:!0})}return e},d=function(e){return e&&e.ownerDocument&&e.ownerDocument.defaultView||r},f=y(0,0,0,0);function h(e){return parseFloat(e)||0}function p(e){for(var t=[],n=arguments.length-1;n-- >0;)t[n]=arguments[n+1];return t.reduce(function(t,n){return t+h(e["border-"+n+"-width"])},0)}function g(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return f;var i=d(e).getComputedStyle(e),r=function(e){for(var t={},n=0,i=["top","right","bottom","left"];n<i.length;n+=1){var r=i[n],o=e["padding-"+r];t[r]=h(o)}return t}(i),o=r.left+r.right,a=r.top+r.bottom,l=h(i.width),s=h(i.height);if("border-box"===i.boxSizing&&(Math.round(l+o)!==t&&(l-=p(i,"left","right")+o),Math.round(s+a)!==n&&(s-=p(i,"top","bottom")+a)),!function(e){return e===d(e).document.documentElement}(e)){var u=Math.round(l+o)-t,c=Math.round(s+a)-n;1!==Math.abs(u)&&(l-=u),1!==Math.abs(c)&&(s-=c)}return y(r.left,r.top,l,s)}var v="undefined"!==typeof SVGGraphicsElement?function(e){return e instanceof d(e).SVGGraphicsElement}:function(e){return e instanceof d(e).SVGElement&&"function"===typeof e.getBBox};function m(e){return i?v(e)?function(e){var t=e.getBBox();return y(0,0,t.width,t.height)}(e):g(e):f}function y(e,t,n,i){return{x:e,y:t,width:n,height:i}}var b=function(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=y(0,0,0,0),this.target=e};b.prototype.isActive=function(){var e=m(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},b.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e};var _=function(e,t){var n=function(e){var t=e.x,n=e.y,i=e.width,r=e.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return c(a,{x:t,y:n,width:i,height:r,top:n,right:t+i,bottom:r+n,left:t}),a}(t);c(this,{target:e,contentRect:n})},k=function(e,t,i){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof e)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=i};k.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new b(e)),this.controller_.addObserver(this),this.controller_.refresh())}},k.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(e instanceof d(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},k.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},k.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},k.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(e){return new _(e.target,e.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},k.prototype.clearActive=function(){this.activeObservations_.splice(0)},k.prototype.hasActive=function(){return this.activeObservations_.length>0};var w="undefined"!==typeof WeakMap?new WeakMap:new n,C=function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=u.getInstance(),i=new k(t,n,this);w.set(this,i)};["observe","unobserve","disconnect"].forEach(function(e){C.prototype[e]=function(){return(t=w.get(this))[e].apply(t,arguments);var t}});var S="undefined"!==typeof r.ResizeObserver?r.ResizeObserver:C;t.default=S}.call(t,n(75))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(i){"object"===typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(18),o=(i=r)&&i.__esModule?i:{default:i};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=s(n(1)),a=s(n(5)),l=s(n(41));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=o.default.extend({header:!1,className:"te-dropdown-toolbar"},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"getToolbar",value:function(){return this._toolbar}},{key:"getItems",value:function(){return this.getToolbar().getItems()}},{key:"getItem",value:function(e){return this.getToolbar().getItem(e)}},{key:"setItems",value:function(e){this.getToolbar().setItems(e)}},{key:"addItem",value:function(e){this.getToolbar().addItem(e)}},{key:"insertItem",value:function(e,t){this.getToolbar().insertItem(e,t)}},{key:"indexOfItem",value:function(e){return this.getToolbar().indexOfItem(e)}},{key:"removeItem",value:function(e,t){return this.getToolbar().removeItem(e,t)}},{key:"removeAllItems",value:function(){this.getToolbar().removeAllItems()}},{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e);var n=e.$button,i=e.eventManager;this._$button=n,this._eventManager=i,this._toolbar=new l.default(i)}},{key:"_initDOM",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this),this.setContent(this._toolbar.$el)}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",function(){return e.hide()}),this._eventManager.listen("closeAllPopup",function(){return e.hide()}),this._eventManager.listen(t.OPEN_EVENT,function(){var t=e.isShow();e._eventManager.emit("closeAllPopup"),t||e.show(),e.$el.css({left:"-1000px"});var n=e._$button,i=n.position(),r=n.outerHeight(!0),o=(r-n.outerHeight())/2,a=i.top+r-o,l=i.left+n.outerWidth(!0)-e.$el.outerWidth(!0);e.$el.css({top:a,left:l})})}}]),t}();Object.defineProperty(u,"OPEN_EVENT",{enumerable:!0,writable:!0,value:"openDropdownToolbar"}),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=s(n(0)),o=s(n(1)),a=s(n(8)),l=s(n(3));function s(e){return e&&e.__esModule?e:{default:e}}var u="markdown",c=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{tagName:"div",className:"te-mode-switch"}));return Object.defineProperty(i,"_buttons",{enumerable:!0,writable:!0,value:{}}),i._render(e),i._switchType(o.default.isExisty(n)?n:u),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"isShown",value:function(){return"block"===this._$rootElement.css("display")}},{key:"show",value:function(){this._$rootElement.css("display","block")}},{key:"hide",value:function(){this._$rootElement.css("display","none")}},{key:"_render",value:function(e){this._buttons.$markdown=(0,r.default)('<button class="te-switch-button markdown" type="button">'+l.default.get("Markdown")+"</button>"),this._buttons.$wysiwyg=(0,r.default)('<button class="te-switch-button wysiwyg" type="button">'+l.default.get("WYSIWYG")+"</button>"),this.$el.append(this._buttons.$markdown),this.$el.append(this._buttons.$wysiwyg),e&&(e.append(this.$el),this._$rootElement=e),this.on("click .markdown",this._changeMarkdown.bind(this)),this.on("click .wysiwyg",this._changeWysiwyg.bind(this)),this.show()}},{key:"_changeMarkdown",value:function(){this._switchType(u)}},{key:"_changeWysiwyg",value:function(){this._switchType("wysiwyg")}},{key:"_setActiveButton",value:function(e){this._buttons.$markdown.removeClass("active"),this._buttons.$wysiwyg.removeClass("active"),this._buttons["$"+e].addClass("active")}},{key:"_switchType",value:function(e){this._type!==e&&(this._type=e,this._setActiveButton(e),this.trigger("modeSwitched",this._type))}}]),t}();Object.defineProperty(c,"TYPE",{enumerable:!0,writable:!0,value:{MARKDOWN:u,WYSIWYG:"wysiwyg"}}),t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=u(n(0)),a=u(n(1)),l=u(n(5)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})(\/([^\s]*))?$/,d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n='\n            <label for="url">'+s.default.get("URL")+'</label>\n            <input type="text" class="te-url-input" />\n            <label for="linkText">'+s.default.get("Link text")+'</label>\n            <input type="text" class="te-link-text-input" />\n            <div class="te-button-section">\n                <button type="button" class="te-ok-button">'+s.default.get("OK")+'</button>\n                <button type="button" class="te-close-button">'+s.default.get("Cancel")+"</button>\n            </div>\n        ";return e=a.default.extend({header:!0,title:s.default.get("Insert link"),className:"te-popup-add-link tui-editor-popup",content:n},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._editor=e.editor,this._eventManager=e.editor.eventManager}},{key:"_initDOM",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this);var e=this.$el.get(0);this._inputText=e.querySelector(".te-link-text-input"),this._inputURL=e.querySelector(".te-url-input")}},{key:"_initDOMEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click .te-close-button",function(){return e.hide()}),this.on("click .te-ok-button",function(){return e._addLink()}),this.on("shown",function(){var t=e._inputText,n=e._inputURL,i=e._editor.getSelectedText().trim();t.value=i,c.exec(i)&&(n.value=i),n.focus()}),this.on("hidden",function(){e._resetInputs()})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this);var n=this._eventManager;n.listen("focus",function(){return e.hide()}),n.listen("closeAllPopup",function(){return e.hide()}),n.listen("openPopupAddLink",function(){n.emit("closeAllPopup"),e.show()})}},{key:"_addLink",value:function(){var e=this._getValue(),t=e.url,n=e.linkText;this._clearValidationStyle(),n.length<1?(0,o.default)(this._inputText).addClass("wrong"):t.length<1?(0,o.default)(this._inputURL).addClass("wrong"):(this._eventManager.emit("command","AddLink",{linkText:n,url:t}),this.hide())}},{key:"_getValue",value:function(){return{url:this._inputURL.value,linkText:this._inputText.value}}},{key:"_clearValidationStyle",value:function(){(0,o.default)(this._inputURL).removeClass("wrong"),(0,o.default)(this._inputText).removeClass("wrong")}},{key:"_resetInputs",value:function(){this._inputText.value="",this._inputURL.value="",this._clearValidationStyle()}}]),t}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=u(n(1)),a=u(n(5)),l=u(n(44)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c="te-image-url-input",d="te-image-file-input",f="te-alt-text-input",h="te-ok-button",p="te-close-button",g="te-file-type",v="te-url-type",m="te-tab-section",y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n='\n            <div class="'+m+'"></div>\n            <div class="'+v+'">\n                <label for="">'+s.default.get("Image URL")+'</label>\n                <input type="text" class="'+c+'" />\n            </div>\n            <form enctype="multipart/form-data" class="'+g+'">\n                <label for="">'+s.default.get("Select image file")+'</label>\n                <input type="file" class="'+d+'" accept="image/*" />\n            </form>\n            <label for="url">'+s.default.get("Description")+'</label>\n            <input type="text" class="'+f+'" />\n            <div class="te-button-section">\n                <button type="button" class="'+h+'">'+s.default.get("OK")+'</button>\n                <button type="button" class="'+p+'">'+s.default.get("Cancel")+"</button>\n            </div>\n        ";return e=o.default.extend({header:!0,title:s.default.get("Insert image"),className:"te-popup-add-image tui-editor-popup",content:n},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager}},{key:"_initDOM",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this);var e=this.$el;this._$imageUrlInput=e.find("."+c),this._$imageFileInput=e.find("."+d),this._$altTextInput=e.find("."+f);var n=e.find("."+g),i=e.find("."+v),o=this.$body.find("."+m);this.tab=new l.default({initName:s.default.get("File"),items:[s.default.get("File"),s.default.get("URL")],sections:[n,i]}),o.append(this.tab.$el)}},{key:"_initDOMEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("shown",function(){return e._$imageUrlInput.focus()}),this.on("hidden",function(){return e._resetInputs()}),this.on("change ."+d,function(){var t=e._$imageFileInput.val().split("\\").pop();e._$altTextInput.val(t)}),this.on("click ."+p,function(){return e.hide()}),this.on("click ."+h,function(){var t=e._$imageUrlInput.val(),n=e._$altTextInput.val();if(t)e._applyImage(t,n);else{var i=e._$imageFileInput.get(0).files;if(i.length){var r=i.item(0);e.eventManager.emit("addImageBlobHook",r,function(t,i){return e._applyImage(t,i||n)},"ui")}}e.hide()}),this.tab.on("itemClick",function(){return e._resetInputs()})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("openPopupAddImage",function(){e.eventManager.emit("closeAllPopup"),e.show()})}},{key:"_applyImage",value:function(e,t){this.eventManager.emit("command","AddImage",{imageUrl:e,altText:t||"image"}),this.hide()}},{key:"_resetInputs",value:function(){this.$el.find("input").val("")}},{key:"remove",value:function(){this.tab.remove(),r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"remove",this).call(this)}}]),t}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=u(n(0)),a=u(n(1)),l=u(n(5)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n='\n            <button type="button" class="te-table-add-row">'+s.default.get("Add row")+'</button>\n            <button type="button" class="te-table-add-col">'+s.default.get("Add col")+'</button>\n            <button type="button" class="te-table-remove-row">'+s.default.get("Remove row")+'</button>\n            <button type="button" class="te-table-remove-col">'+s.default.get("Remove col")+'</button>\n            <hr/>\n            <button type="button" class="te-table-col-align-left">'+s.default.get("Align left")+'</button>\n            <button type="button" class="te-table-col-align-center">'+s.default.get("Align center")+'</button>\n            <button type="button" class="te-table-col-align-right">'+s.default.get("Align right")+'</button>\n            <hr/>\n            <button type="button" class="te-table-remove">'+s.default.get("Remove table")+"</button>\n        ";return e=a.default.extend({header:!1,className:"te-popup-table-utils",content:n},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager}},{key:"_initDOMEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click .te-table-add-row",function(){return e.eventManager.emit("command","AddRow")}),this.on("click .te-table-add-col",function(){return e.eventManager.emit("command","AddCol")}),this.on("click .te-table-remove-row",function(){return e.eventManager.emit("command","RemoveRow")}),this.on("click .te-table-col-align-left",function(){return e.eventManager.emit("command","AlignCol","left")}),this.on("click .te-table-col-align-center",function(){return e.eventManager.emit("command","AlignCol","center")}),this.on("click .te-table-col-align-right",function(){return e.eventManager.emit("command","AlignCol","right")}),this.on("click .te-table-remove-col",function(){return e.eventManager.emit("command","RemoveCol")}),this.on("click .te-table-remove",function(){return e.eventManager.emit("command","RemoveTable")})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("mousedown",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("openPopupTableUtils",function(t){var n=e.$el.parent().offset(),i=t.clientX-n.left,r=t.clientY-n.top+(0,o.default)(window).scrollTop();e.$el.css({position:"absolute",top:r+5,left:i+10}),e.eventManager.emit("closeAllPopup"),e.show()})}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=l(n(1)),a=l(n(5));function l(e){return e&&e.__esModule?e:{default:e}}var s='\n    <div class="te-table-selection">\n        <div class="te-table-header"></div>\n        <div class="te-table-body"></div>\n        <div class="te-selection-area"></div>\n    </div>\n    <p class="te-description"></p>\n',u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=o.default.extend({header:!1,className:"te-popup-add-table",content:s},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._selectedBound={},this._tableBound={},this._eventManager=e.eventManager,this._$button=e.$button}},{key:"_initDOM",value:function(){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this),this._cacheElements(),this._setTableSizeByBound(5,7)}},{key:"_initDOMEvent",value:function(e){var n=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this,e),this.on("mousemove .te-table-selection",function(e){var t=e.pageX-n._selectionOffset.left,i=e.pageY-n._selectionOffset.top,r=n._getSelectionBoundByOffset(t,i);n._resizeTableBySelectionIfNeed(r.col,r.row),n._setSelectionAreaByBound(r.col,r.row),n._setDisplayText(r.col,r.row),n._setSelectedBound(r.col,r.row)}),this.on("click .te-table-selection",function(){var e=n._getSelectedTableSize();n._eventManager.emit("command","Table",e.col,e.row)})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",function(){return e.hide()}),this._eventManager.listen("closeAllPopup",function(){return e.hide()}),this._eventManager.listen("openPopupAddTable",function(){var t=e._$button,n=t.get(0),i=n.offsetTop,r=n.offsetLeft;e.$el.css({top:i+t.outerHeight(),left:r}),e._eventManager.emit("closeAllPopup"),e.show(),e._selectionOffset=e.$el.find(".te-table-selection").offset()})}},{key:"_cacheElements",value:function(){this.$header=this.$el.find(".te-table-header"),this.$body=this.$el.find(".te-table-body"),this.$selection=this.$el.find(".te-selection-area"),this.$desc=this.$el.find(".te-description")}},{key:"_resizeTableBySelectionIfNeed",value:function(e,t){var n=this._getResizedTableBound(e,t);n&&this._setTableSizeByBound(n.col,n.row)}},{key:"_getResizedTableBound",value:function(e,t){var n=void 0,i=void 0,r=void 0;return e>=5&&e<9?n=e+1:e<5&&(n=5),t>=7&&t<14?i=t+1:t<7&&(i=7),this._isNeedResizeTable(n,i)&&(r={row:i||this._tableBound.row,col:n||this._tableBound.col}),r}},{key:"_isNeedResizeTable",value:function(e,t){return e&&e!==this._tableBound.col||t&&t!==this._tableBound.row}},{key:"_getBoundByOffset",value:function(e,t){return{row:parseInt(t/17,10),col:parseInt(e/25,10)}}},{key:"_getOffsetByBound",value:function(e,t){return{x:25*e+25,y:17*t+17}}},{key:"_setTableSizeByBound",value:function(e,t){var n=this._getOffsetByBound(e,t-1);this._setTableSize(n.x,n.y),this._tableBound.row=t,this._tableBound.col=e}},{key:"_getSelectionBoundByOffset",value:function(e,t){var n=this._getBoundByOffset(e,t);return n.row<1?n.row=1:n.row>this._tableBound.row&&(n.row=this._tableBound.row),n.col<1?n.col=1:n.col>this._tableBound.col&&(n.col=this._tableBound.col),n}},{key:"_setSelectionAreaByBound",value:function(e,t){var n=this._getOffsetByBound(e,t);this._setSelectionArea(n.x,n.y)}},{key:"_setSelectedBound",value:function(e,t){this._selectedBound.col=e,this._selectedBound.row=t}},{key:"_getSelectedTableSize",value:function(){return{row:this._selectedBound.row+1,col:this._selectedBound.col+1}}},{key:"_setDisplayText",value:function(e,t){this.$desc.html(e+1+" x "+(t+1))}},{key:"_setTableSize",value:function(e,t){e+=1,t+=1,this.$header.css({height:17,width:e}),this.$body.css({height:t,width:e}),this.$el.css({width:e+30})}},{key:"_setSelectionArea",value:function(e,t){e+=1,t+=1,this.$selection.css({height:t,width:e})}}]),t}();u.CELL_WIDTH=25,u.CELL_HEIGHT=17,u.MIN_ROW_SELECTION_INDEX=1,u.MIN_COL_SELECTION_INDEX=1,t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=u(n(0)),a=u(n(1)),l=u(n(5)),s=u(n(3));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n='\n            <ul>\n                <li data-value="1" data-type="Heading"><h1>'+s.default.get("Heading")+' 1</h1></li>\n                <li data-value="2" data-type="Heading"><h2>'+s.default.get("Heading")+' 2</h2></li>\n                <li data-value="3" data-type="Heading"><h3>'+s.default.get("Heading")+' 3</h3></li>\n                <li data-value="4" data-type="Heading"><h4>'+s.default.get("Heading")+' 4</h4></li>\n                <li data-value="5" data-type="Heading"><h5>'+s.default.get("Heading")+' 5</h5></li>\n                <li data-value="6" data-type="Heading"><h6>'+s.default.get("Heading")+' 6</h6></li>\n                <li data-type="Paragraph"><div>'+s.default.get("Paragraph")+"</div></li>\n            </ul>\n        ";return e=a.default.extend({header:!1,className:"te-heading-add",content:n},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._eventManager=e.eventManager,this._$button=e.$button}},{key:"_initDOMEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("click li",function(t){var n=(0,o.default)(t.target).closest("li");e._eventManager.emit("command",n.data("type"),n.data("value"))})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this._eventManager.listen("focus",this.hide.bind(this)),this._eventManager.listen("closeAllPopup",this.hide.bind(this)),this._eventManager.listen("openHeadingSelect",function(){var t=e._$button,n=t.get(0),i=n.offsetTop,r=n.offsetLeft;e.$el.css({top:i+t.outerHeight(),left:r}),e._eventManager.emit("closeAllPopup"),e.show()})}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=s(n(0)),a=s(n(1)),l=s(n(5));function s(e){return e&&e.__esModule?e:{default:e}}var u="te-popup-code-block-lang-",c=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=[];return e.languages.forEach(function(e){return n.push('<button type="button" class="'+u+e+'" data-lang="'+e+'">'+e+"</button>")}),e=a.default.extend({header:!1,className:"te-popup-code-block-languages",content:n.join("")},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this._onSelectedLanguage=null,this._onDismissed=null,this._currentButton=null,this._$buttons=null,this._languages=e.languages,this.eventManager=e.eventManager}},{key:"_initDOM",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this,e),this.$el.css("z-index",1e4),this._$buttons=this.$el.find("button"),this._activateButtonByIndex(0)}},{key:"_initDOMEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this);var n=function(t){var n=(0,o.default)(t.target).data("lang");e._onSelectedLanguage&&e._onSelectedLanguage(n),e.hide()};this._languages.forEach(function(t){return e.on("mousedown ."+u+t,n)})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("openPopupCodeBlockLanguages",function(t){e.show(t.callback);var n=e.$el.get(0).style;return n.top=t.offset.top+"px",n.left=t.offset.left+"px",e.setCurrentLanguage(t.language),e}),this.eventManager.listen("focus",function(){return e.hide()}),this.eventManager.listen("mousedown",function(){return e.hide()}),this.eventManager.listen("closeAllPopup",function(){return e.hide()}),this.eventManager.listen("closePopupCodeBlockLanguages",function(){return e.hide()}),this.eventManager.listen("scroll",function(){return e.hide()})}},{key:"_activateButtonByIndex",value:function(e){this._currentButton&&(0,o.default)(this._currentButton).removeClass("active"),this._currentButton=this._$buttons.get(e),(0,o.default)(this._currentButton).addClass("active"),this._currentButton.scrollIntoView()}},{key:"prev",value:function(){var e=this._$buttons.index(this._currentButton)-1;e<0&&(e=this._$buttons.length-1),this._activateButtonByIndex(e)}},{key:"next",value:function(){var e=this._$buttons.index(this._currentButton)+1;e>=this._$buttons.length&&(e=0),this._activateButtonByIndex(e)}},{key:"getCurrentLanguage",value:function(){return(0,o.default)(this._currentButton).data("lang")}},{key:"setCurrentLanguage",value:function(e){var t=this._$buttons.filter("."+u+e);if(t.length>0){var n=this._$buttons.index(t);this._activateButtonByIndex(n)}}},{key:"show",value:function(e){this._onSelectedLanguage=e.selected,this._onDismissed=e.dismissed,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this)}},{key:"hide",value:function(){this._onDismissed&&this._onDismissed(),this._onSelectedLanguage=null,this._onDismissed=null,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=h(n(0)),a=h(n(1)),l=h(n(5)),s=h(n(86)),u=h(n(87)),c=h(n(88)),d=h(n(89)),f=h(n(3));function h(e){return e&&e.__esModule?e:{default:e}}var p="popup-editor-",g="te-ok-button",v="te-close-button",m='\n    <button type="button" class="'+p+'toggle-scroll"></button>\n    <button type="button" class="'+p+'toggle-preview"></button>\n    <button type="button" class="'+p+'toggle-fit"></button>\n    <button type="button" class="tui-popup-close-button"></button>\n',y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n='\n            <div class="'+p+'body"></div>\n            <div class="te-button-section">\n                <button type="button" class="'+g+'">'+f.default.get("OK")+'</button>\n                <button type="button" class="'+v+'">'+f.default.get("Cancel")+"</button>\n            </div>\n        ";return e=a.default.extend({header:!0,title:"CodeBlock Editor",content:n,className:"tui-popup-code-block-editor",headerButtons:m,modal:!0},e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),i(t,[{key:"_initInstance",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initInstance",this).call(this,e),this.eventManager=e.eventManager,this.convertor=e.convertor}},{key:"_initDOM",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOM",this).call(this,e);var n=this.$el.get(0);this._body=n.querySelector("."+p+"body"),this._toggleFitButton=n.querySelector("."+p+"toggle-fit"),this._togglePreviewButton=n.querySelector("."+p+"toggle-preview"),this._toggleScrollButton=n.querySelector("."+p+"toggle-scroll"),this._okButton=n.querySelector("."+g),this._closeButton=n.querySelector("."+v),this._codeMirrorWrapper=this._createCodeBlockEditor(),this._previewWrapper=this._createPreview(),this._scrollSyncSplit=new s.default(this._body,this._codeMirrorWrapper,this._previewWrapper),this._updateFitWindowButton(),this._updatePreviewButton(),this._updateScrollButton(),this._codeBlockLanguagesCombo=this._createCodeBlockLanguagesCombo()}},{key:"_initDOMEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initDOMEvent",this).call(this),this.on("scroll",function(e){return e.preventDefault()}),this.on("click ."+p+"toggle-fit",function(){return e._toggleFitToWindow()}),this.on("click ."+p+"toggle-preview",function(){return e._togglePreview()}),this.on("click ."+p+"toggle-scroll",function(){return e._toggleScroll()}),this.on("click ."+g,function(){return e._save()}),this.on("click ."+v,function(){return e.hide()}),this.on("click ."+p+"close",function(){return e.hide()}),this.on("click ."+p+"editor-wrapper",function(t){t.target===e._codeMirrorWrapper&&e._focusEditor(!0)})}},{key:"_initEditorEvent",value:function(){var e=this;r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_initEditorEvent",this).call(this),this.eventManager.listen("openPopupCodeBlockEditor",function(t){return e.eventManager.emit("closeAllPopup"),e.show(t),e}),this.eventManager.listen("closeAllPopup",this.hide.bind(this)),this.eventManager.listen("closePopupCodeBlockEditor",this.hide.bind(this))}},{key:"_createCodeBlockEditor",value:function(){var e=document.createElement("div");return e.className=p+"editor-wrapper",this._codeBlockEditor=new u.default(e,this.eventManager),e}},{key:"_createPreview",value:function(){var e=document.createElement("div");return this._codeBlockPreview=new c.default((0,o.default)(e),this.eventManager,this.convertor,this._codeBlockEditor),e}},{key:"_createCodeBlockLanguagesCombo",value:function(){var e=this,t=this.getTitleElement(),n=new d.default(this.eventManager);return n.setOnLanguageSelected(function(t){e._codeBlockEditor.setLanguage(t),e._codeBlockEditor.refresh(),e._focusEditor()}),t.innerHTML="CodeBlock Editor",t.appendChild(n.getElement()),n}},{key:"_updateFitWindowButton",value:function(){(0,o.default)(this._toggleFitButton).toggleClass("active",this.isFitToWindow())}},{key:"_updatePreviewButton",value:function(){(0,o.default)(this._togglePreviewButton).toggleClass("active",this._scrollSyncSplit.isSplitView())}},{key:"_updateScrollButton",value:function(){this._scrollSyncSplit.isSplitView()?this._toggleScrollButton.style.display="inline-block":this._toggleScrollButton.style.display="none",(0,o.default)(this._toggleScrollButton).toggleClass("active",this._scrollSyncSplit.isScrollSynced())}},{key:"_focusEditor",value:function(e){this._codeBlockEditor.focus(),e?this._codeBlockEditor.moveCursorToEnd():this._codeBlockEditor.moveCursorToStart()}},{key:"_togglePreview",value:function(){this._scrollSyncSplit.toggleSplitView(),this._updatePreviewButton(),this._updateScrollButton(),this._codeBlockEditor.refresh()}},{key:"_toggleFitToWindow",value:function(){this.toggleFitToWindow(),this._updateFitWindowButton(),this._codeBlockEditor.refresh()}},{key:"_toggleScroll",value:function(){this._scrollSyncSplit.toggleScrollSync(),this._updateScrollButton()}},{key:"_save",value:function(){this._codeBlockEditor.save(this._codeBlockElement),this.hide()}},{key:"_load",value:function(e){this._codeBlockElement=e,this._codeBlockEditor.load(e),this._codeBlockLanguagesCombo.setLanguage(this._codeBlockEditor.getLanguage()),this._focusEditor(),this._codeBlockPreview.refresh()}},{key:"show",value:function(e){if(r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"show",this).call(this),!e)throw new Error("should be called with codeBlockElement");this._load(e)}},{key:"hide",value:function(){this.setFitToWindow(!1),this._codeBlockEditor&&this._codeBlockEditor.clear(),this._codeBlockPreview&&this._codeBlockPreview.clear(),this._codeBlockElement=null,r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"hide",this).call(this)}}]),t}();t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(1));function a(e){return e&&e.__esModule?e:{default:e}}var l={left:"tui-split-content-left",right:"tui-split-content-right"},s=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=o.default.extend({showScrollSyncButton:!1,scrollSync:!0,splitView:!0},r),this._baseElement=t,this._contentElements=[],this._initDom(n,i,r),this._initDomEvent()}return i(e,[{key:"_initDom",value:function(e,t,n){var i=document.createElement("div");i.className="tui-split-scroll",this._el=i;var r=document.createElement("div");r.className="tui-split-scroll-wrapper",this._scrollWrapper=r,this._setScrollSync(n.scrollSync),this.setSplitView(n.splitView);var o=document.createElement("div");o.className="tui-split-scroll-content",this._contentWrapper=o;var a=document.createElement("div");a.className="tui-splitter",this._baseElement.appendChild(i),i.appendChild(r),r.appendChild(o),r.appendChild(a),this._setLeft(e),this._setRight(t)}},{key:"_initDomEvent",value:function(){this._contentWrapper.addEventListener("scroll",this.sync.bind(this))}},{key:"_requireScrollIntoView",value:function(e){var t,n,i=e.target,o=i.getBoundingClientRect(),a=o.top,l=o.bottom,s=void 0;if(this.isScrollSynced())s=this._contentWrapper;else if((0,r.default)(i).parents(this._contentElements.left).length)s=this._contentElements.left;else{if(!(0,r.default)(i).parents(this._contentElements.right).length)return;s=this._contentElements.right}var u=s.getBoundingClientRect();t=u.top,n=u.bottom,a<t?s.scrollTop=s.scrollTop+a-t:l>n&&(s.scrollTop=s.scrollTop+l-n),this.sync()}},{key:"_setContentElement",value:function(e,t){var n=this,i=this._contentElements[t];i&&((0,r.default)(i).off("requireScrollIntoView"),this._contentWrapper.removeChild(i)),(0,r.default)(e).addClass(l[t]),this._contentWrapper.appendChild(e),(0,r.default)(e).on("requireScrollIntoView",function(e){return n._requireScrollIntoView(e)}),(0,r.default)(e).on("requireScrollSync",function(){return n.sync()}),this._contentElements[t]=e,this.sync()}},{key:"_setLeft",value:function(e){this._setContentElement(e,"left")}},{key:"_setRight",value:function(e){this._setContentElement(e,"right")}},{key:"_setScrollSync",value:function(e){(0,r.default)(this._el).toggleClass("scroll-sync",e)}},{key:"toggleScrollSync",value:function(){(0,r.default)(this._el).toggleClass("scroll-sync")}},{key:"setSplitView",value:function(e){(0,r.default)(this._el).toggleClass("single-content",!e)}},{key:"toggleSplitView",value:function(){(0,r.default)(this._el).toggleClass("single-content")}},{key:"isScrollSynced",value:function(){return(0,r.default)(this._el).hasClass("scroll-sync")}},{key:"isSplitView",value:function(){return!(0,r.default)(this._el).hasClass("single-content")}},{key:"sync",value:function(){if(this._contentElements.left&&this._contentElements.right){var e=this._contentWrapper.clientHeight,t=this._contentWrapper.scrollTop,n=this._contentElements.left,i=this._contentElements.right,r=n.offsetHeight-e>0?n:i,o=r===n?i:n,a=r.offsetHeight,l=Math.max(a-e,0),s=a-Math.max(o.offsetHeight,e);r.style.top="0px",o.style.top=t/l*s+"px"}}},{key:"scrollTop",value:function(e){this._contentWrapper.scrollTop=e}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=a(n(0)),o=a(n(36));function a(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,{singleCursorHeightPerLine:!1,theme:"none"}));return i._language="",i._eventManager=n,i._initEvent(),i}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"_initEvent",value:function(){var e=this;this.on("cursorActivity",this._onRequireScrollIntoView.bind(this)),this.on("beforeChange",function(t,n){"paste"===n.origin&&e._eventManager.emit("pasteBefore",{source:"codeblock",data:n})})}},{key:"_onRequireScrollIntoView",value:function(){var e=this.getCursor(),t=this.getWrapperElement();setTimeout(function(){var n=t.querySelector("pre:nth-child("+(e.line+1)+")");(0,r.default)(n).trigger("requireScrollIntoView")},0)}},{key:"load",value:function(e){var t=e.cloneNode(!0);this.setLanguage(t.getAttribute("data-language")||""),this.setEditorCodeText(t.textContent)}},{key:"save",value:function(e){e.innerHTML="",e.textContent=this.getEditorCodeText(),e.setAttribute("data-language",this._language),(0,r.default)(e).trigger("language-changed")}},{key:"clear",value:function(){this.setLanguage(""),this.setEditorCodeText("")}},{key:"getLanguage",value:function(){return this._language}},{key:"setLanguage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._language=e}},{key:"getEditorCodeText",value:function(){return this.getValue()}},{key:"setEditorCodeText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setValue(e)}},{key:"refresh",value:function(){this.cm.refresh()}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=n(13),l=(i=a)&&i.__esModule?i:{default:i};var s=function(e){function t(e,n,i,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,!0));return o._codeBlockEditor=r,o._initEvent(),o}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,l.default),r(t,[{key:"_initEvent",value:function(){var e=this;this._codeBlockEditor.on("update",function(){return e.lazyRunner.run("refresh")})}},{key:"refresh",value:function(){var e=this._codeBlockEditor.getLanguage(),n=this._codeBlockEditor.getEditorCodeText();o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"refresh",this).call(this,"```"+e+"\n"+n+"\n```"),this.$el.trigger("requireScrollSync")}},{key:"clear",value:function(){o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,"")}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=l(n(0)),o=l(n(3)),a=l(n(19));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._eventManager=t,this._initDOM(),this._initDOMEvent()}return i(e,[{key:"_initDOM",value:function(){this._inputLanguage=(0,r.default)('<input type="text" maxlength="20" placeholder="'+o.default.get("Choose language")+'">').get(0),this._wrapper=(0,r.default)('<span class="te-input-language">').get(0),this._wrapper.appendChild(this._inputLanguage)}},{key:"_initDOMEvent",value:function(){var e=this;this._inputLanguage.addEventListener("keydown",function(t){return e._onKeyEvent(t)}),this._inputLanguage.addEventListener("focus",function(){return e._showPopupCodeBlockLanguages()}),this._inputLanguage.addEventListener("focusout",function(){return e._onFocusOut()}),this._wrapper.addEventListener("mousedown",function(t){t.target===e._wrapper&&(t.preventDefault(),e._toggleFocus())})}},{key:"_showPopupCodeBlockLanguages",value:function(){var e=this,t=this._inputLanguage.getBoundingClientRect();(0,r.default)(this._wrapper).toggleClass("active",!0),this.active=!0,this._popupCodeBlockLanguages=this._eventManager.emitReduce("openPopupCodeBlockLanguages",{language:this._prevStoredLanguage,offset:{left:t.left,top:t.bottom},callback:{selected:function(t){return e._onLanguageSelectedFromList(t)},dismissed:function(){e._popupCodeBlockLanguages=null}}})}},{key:"_toggleFocus",value:function(){var e=this._inputLanguage;(0,r.default)(this._wrapper).hasClass("active")?e.blur():e.focus()}},{key:"_onFocusOut",value:function(){(0,r.default)(this._wrapper).toggleClass("active",!1),this._inputLanguage.value=this._prevStoredLanguage,this._hidePopupCodeBlockLanguages()}},{key:"_onKeyEvent",value:function(e){if(this._popupCodeBlockLanguages)switch(e.which){case a.default.keyCode("UP"):this._popupCodeBlockLanguages.prev(),e.preventDefault();break;case a.default.keyCode("DOWN"):this._popupCodeBlockLanguages.next(),e.preventDefault();break;case a.default.keyCode("ENTER"):case a.default.keyCode("TAB"):var t=this._popupCodeBlockLanguages.getCurrentLanguage();this._inputLanguage.value=t,this._storeInputLanguage(),e.preventDefault();break;default:this._popupCodeBlockLanguages.hide()}else e.which!==a.default.keyCode("ENTER")&&e.which!==a.default.keyCode("TAB")||(this._storeInputLanguage(),e.preventDefault())}},{key:"_onLanguageSelectedFromList",value:function(e){this._inputLanguage.value=e,this._storeInputLanguage()}},{key:"setOnLanguageSelected",value:function(e){this._onLanguageSelected=e}},{key:"_hidePopupCodeBlockLanguages",value:function(){this._eventManager.emit("closePopupCodeBlockLanguages")}},{key:"setLanguage",value:function(e){this._prevStoredLanguage=e,this._inputLanguage.value=e}},{key:"_storeInputLanguage",value:function(){var e=this._inputLanguage.value;this.setLanguage(e),this._onLanguageSelected&&this._onLanguageSelected(e),this._hidePopupCodeBlockLanguages()}},{key:"getElement",value:function(){return this._wrapper}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),o=(i=r)&&i.__esModule?i:{default:i},a=n(34);var l=/^(\*{2}|_{2}).*\1$/,s=/[*_]{2,}([^*_]*)[*_]{2,}/g,u=o.default.command("markdown",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getRange();(0,a.changeSyntax)(n,i,"**",l,s),t.focus()}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),o=(i=r)&&i.__esModule?i:{default:i},a=n(34);var l=/^(\*{3}|_{3}).*\1$/,s=/^(\*{2}|_{2}).*\1$/,u=/^(\*|_).*\1$/,c=/([^*_])[*_]([^*_]+)[*_]([^*_])/g,d=function(e){return l.test(e)},f=function(e){return s.test(e)},h=function(e){return u.test(e)},p="*".length,g="**".length,v="***".length,m=function(e){return e?e.replace(c,"$1$2$3"):""},y=o.default.command("markdown",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getCursor(),r=i.line,o=i.ch,l=e.getRange(),s=n.getSelection();if(s)(function(e,t,n){var i=a.expandReplace.bind(this,e,n);return i(v,d,function(e){return(0,a.removeSyntax)(e,"*")})||i(g,f,function(e){return(0,a.appendSyntax)(m(e),"*")})||i(p,h,function(e){return(0,a.removeSyntax)(e,"*")})||(0,a.replace)(e,t,d,function(e){return(0,a.removeSyntax)(e,"*")})||(0,a.replace)(e,t,f,function(e){return(0,a.appendSyntax)(m(e),"*")})||(0,a.replace)(e,t,h,function(e){return(0,a.removeSyntax)(e,"*")})})(n,s,l)||n.replaceSelection((0,a.appendSyntax)(m(s),"*"),"around");else{!function(e,t){(0,a.expandReplace)(e,t,v,d,function(e){return(0,a.removeSyntax)(e,"*")})||(0,a.expandReplace)(e,t,g,f,function(e){return(0,a.appendSyntax)(e,"*")})||(0,a.expandReplace)(e,t,p,h,function(){return""})||e.replaceSelection("**","around")}(n,l);var u=n.getSelection(),c=o;d(u)||h(u)&&!f(u)?c+=p:c-=p,n.setCursor(r,c)}t.focus()}});t.default=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),o=(i=r)&&i.__esModule?i:{default:i},a=n(34);var l=/^~~.*~~$/,s=/~~([^~]*)~~/g,u=o.default.command("markdown",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getRange();(0,a.changeSyntax)(n,i,"~~",l,s),t.focus()}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),o=(i=r)&&i.__esModule?i:{default:i};var a=/^> ?/,l=o.default.command("markdown",{name:"Blockquote",keyMap:["ALT+Q","ALT+Q"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r={line:i.from.line,ch:0},o={line:i.to.line,ch:n.getLineHandle(i.to.line).text.length},a=n.getRange(r,o).split("\n"),l=this._haveBlockquote(a),s=void 0;if(s=l?this._removeBlockquote(a):this._addBlockquote(a),n.replaceRange(s.join("\n"),r,o),l){var u=a.length;this._isBlockquoteWithSpace(a[u-1])?i.to.ch-=2:i.to.ch-=1}else i.to.ch+=2;n.setCursor(i.to),t.focus()},_haveBlockquote:function(e){for(var t=0;t<e.length;t+=1)if(!a.test(e[t]))return!1;return!0},_addBlockquote:function(e){return e.map(function(e){return"> "+e})},_removeBlockquote:function(e){return e.map(function(e){return e.replace(a,"")})},_isBlockquoteWithSpace:function(e){return/^> /.test(e)}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(1)),r=o(n(2));function o(e){return e&&e.__esModule?e:{default:e}}var a=/^#+\s/g,l=r.default.command("markdown",{name:"Heading",exec:function(e,t){var n=e.getEditor(),r=n.getDoc(),o=e.getCurrentRange(),l={line:o.from.line,ch:0},s={line:o.to.line,ch:r.getLineHandle(o.to.line).text.length},u=r.getLine(s.line).length,c=r.getRange(l,s).split("\n");i.default.forEachArray(c,function(e,n){c[n]=function(e,t){var n=e.match(a),i="";do{i+="#",t-=1}while(t>0);if(n){var r=e.split(n[0]);e=r[1]}return i+" "+e}(e,t)}),r.replaceRange(c.join("\n"),l,s),o.to.ch+=r.getLine(s.line).length-u,r.setSelection(l,o.to),n.focus()}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(1));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("markdown",{name:"Paragraph",exec:function(e){var t=e.getEditor(),n=t.getDoc(),r=e.getCurrentRange(),o={line:r.from.line,ch:0},a={line:r.to.line,ch:n.getLineHandle(r.to.line).text.length},l=n.getLine(a.line).length,s=n.getRange(o,a).split("\n");i.default.forEachArray(s,function(e,t){s[t]=e.replace(/^(#{1,6}| *((?:\*|-|\d\.)(?: \[[ xX]])?)) /,"")}),n.replaceRange(s.join("\n"),o,a),r.to.ch+=n.getLine(a.line).length-l,n.setSelection(o,a),t.focus()}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i="",r=e.getCurrentRange(),o={line:r.from.line,ch:r.from.ch},a={line:r.to.line,ch:r.to.ch};r.collapsed&&(i=n.getLine(o.line),o.ch=0,a.ch=n.getLineHandle(r.to.line).text.length),n.getLine(o.line).length?i+="\n\n* * *\n\n":i+="\n* * *\n",n.replaceRange(i,o,a),t.focus()}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.decodeURIGraceful,l=r.default.encodeMarkdownCharacters,s=r.default.escapeMarkdownCharacters,u=i.default.command("markdown",{name:"AddLink",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),r=e.getCurrentRange(),o={line:r.from.line,ch:r.from.ch},u={line:r.to.line,ch:r.to.ch},c=t.linkText,d=t.url;c=a(c);var f="["+(c=s(c))+"]("+(d=l(d))+")";i.replaceRange(f,o,u),n.focus()}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.decodeURIGraceful,l=r.default.encodeMarkdownCharacters,s=r.default.escapeMarkdownCharacters,u=i.default.command("markdown",{name:"AddImage",exec:function(e,t){var n=e.getEditor(),i=n.getDoc(),r=e.getCurrentRange(),o={line:r.from.line,ch:r.from.ch},u={line:r.to.line,ch:r.to.ch},c=t.altText,d=t.imageUrl;c=a(c);var f="!["+(c=s(c))+"]("+(d=l(d))+")";i.replaceRange(f,o,u,"+addImage"),n.focus()}});t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){var t=e.getCurrentRange();e.componentManager.getManager("list").changeSyntax(t,"ul")}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){var t=e.getCurrentRange();e.componentManager.getManager("list").changeSyntax(t,"ol")}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"Indent",exec:function(e){e.getEditor().execCommand("indentOrderedList")}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"Outdent",exec:function(e){e.getEditor().execCommand("indentLessOrderedList")}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"Table",exec:function(e,t,n,i){var r=e.getEditor(),o=r.getDoc(),a="\n";r.getCursor().ch>0&&(a+="\n"),a+=function(e,t){var n="|",i="|",r=0;for(;e;)t?(n+=" "+t[r]+" |",r+=1):n+="  |",i+=" --- |",e-=1;return n+"\n"+i+"\n"}(t,i),a+=function(e,t,n){for(var i="",r=e,o=0;o<t;o+=1){i+="|";for(var a=0;a<e;a+=1)n?(i+=" "+n[r]+" |",r+=1):i+="  |";i+="\n"}return i=i.replace(/\n$/g,"")}(t,n-1,i),o.replaceSelection(a),i||r.setCursor(r.getCursor().line-n,2),e.focus()}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"Task",keyMap:["ALT+T","ALT+T"],exec:function(e){var t=e.getCurrentRange();e.componentManager.getManager("list").changeSyntax(t,"task")}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2),o=(i=r)&&i.__esModule?i:{default:i};var a=/^`([^`]+)`$/,l=/`([^`]+)`/g,s=o.default.command("markdown",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=n.getSelection(),r=t.getCursor(),o=this.hasStrikeSyntax(i),a=void 0;o?(a=this.remove(i),a=this._removeCodeSyntax(a)):(a=this._removeCodeSyntax(i),a=this.append(a)),n.replaceSelection(a,"around"),i||o||this.setCursorToCenter(n,r,o),t.focus()},setCursorToCenter:function(e,t,n){var i=n?-1:1;e.setCursor(t.line,t.ch+i)},hasStrikeSyntax:function(e){return a.test(e)},append:function(e){return"`"+e+"`"},remove:function(e){return e.substr(1,e.length-2)},_removeCodeSyntax:function(e){return e?e.replace(l,"$1"):""}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("markdown",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e){var t=e.getEditor(),n=t.getDoc(),i=e.getCurrentRange(),r=["```",n.getSelection(),"```"],o=1;0!==i.from.ch&&(r.unshift(""),o+=1),i.to.ch!==n.getLine(i.to.line).length&&r.push(""),n.replaceSelection(r.join("\n")),t.setCursor(i.from.line+o,0),t.focus()}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.command("wysiwyg",{name:"Bold",keyMap:["CTRL+B","META+B"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(l);var i=t.getSelection();i.collapse(!0),t.setSelection(i)}else l(t),r.default.optimizeRange(t.getSelection(),"B")}});function l(e){e.hasFormat("b")||e.hasFormat("strong")?e.changeFormat(null,{tag:"b"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.bold())}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.command("wysiwyg",{name:"Italic",keyMap:["CTRL+I","META+I"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(l);var i=t.getSelection();i.collapse(!0),t.setSelection(i)}else l(t),r.default.optimizeRange(t.getSelection(),"I")}});function l(e){e.hasFormat("i")||e.hasFormat("em")?e.changeFormat(null,{tag:"i"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.italic())}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.command("wysiwyg",{name:"Strike",keyMap:["CTRL+S","META+S"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection");if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(l);var i=t.getSelection();i.collapse(!0),t.setSelection(i)}else l(t),r.default.optimizeRange(t.getSelection(),"S")}});function l(e){e.hasFormat("S")?e.changeFormat(null,{tag:"S"}):e.hasFormat("a")||e.hasFormat("PRE")||(e.hasFormat("code")&&e.changeFormat(null,{tag:"code"}),e.strikethrough())}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("wysiwyg",{name:"Blockquote",keyMap:["ALT+Q","ALT+Q"],exec:function(e){var t=e.getEditor();e.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||(t.hasFormat("BLOCKQUOTE")?t.decreaseQuoteLevel():t.increaseQuoteLevel())}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(10));function o(e){return e&&e.__esModule?e:{default:e}}var a=r.default.decodeURIGraceful,l=r.default.encodeMarkdownCharacters,s=i.default.command("wysiwyg",{name:"AddImage",exec:function(e,t){var n=e.getEditor(),i=t.altText,r=t.imageUrl;i=a(i),r=l(r),e.focus(),n.hasFormat("PRE")||n.insertImage(r,{alt:i})}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),r=l(n(1)),o=l(n(2)),a=l(n(10));function l(e){return e&&e.__esModule?e:{default:e}}var s=a.default.decodeURIGraceful,u=a.default.encodeMarkdownCharacters,c=o.default.command("wysiwyg",{name:"AddLink",exec:function(e,t){var n=e.getEditor(),o=e.getLinkAttribute(),a=t.url,l=t.linkText;if(l=s(l),a=u(a),e.focus(),!n.hasFormat("PRE"))if(n.removeAllFormatting(),n.getSelectedText())n.makeLink(a,o);else{var c=n.createElement("A",r.default.extend({href:a},o));(0,i.default)(c).text(l),n.insertElement(c)}}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(2)),r=o(n(4));function o(e){return e&&e.__esModule?e:{default:e}}var a=i.default.command("wysiwyg",{name:"HR",keyMap:["CTRL+L","META+L"],exec:function(e){var t=e.getEditor(),n=t.getSelection();if(n.collapsed&&!t.hasFormat("TABLE")&&!t.hasFormat("PRE")){var i=document.createElement("hr"),o=r.default.getChildNodeByOffset(n.startContainer,n.startOffset),a=r.default.getTopNextNodeUnder(o,e.get$Body()[0]);if(a&&!r.default.isTextNode(a))for(;a&&"false"===a.getAttribute("contenteditable");)a=a.nextSibling;a||(a=r.default.createEmptyLine(),e.get$Body().append(a)),t.modifyBlocks(function(e){return e.appendChild(i),e});var l=i.previousSibling;l&&r.default.isTextNode(l)&&0===r.default.getTextLength(l)&&i.parentNode.removeChild(l),i.parentNode.replaceChild(r.default.createHorizontalRule(),i),n.selectNodeContents(a),n.collapse(!0),t.setSelection(n),t.saveUndoState(n)}e.focus()}});t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"Heading",exec:function(e,t){var n=e.getEditor();e.focus(),n.hasFormat("TABLE")||n.hasFormat("PRE")||n.modifyBlocks(function(e){return(0,i.default)(e).children("h1, h2, h3, h4, h5, h6, div").each(function(e,n){var r="<H"+t+" />",o=(0,i.default)(n);if(o.is("DIV"))o.wrap(r);else{var a=(0,i.default)(r);a.insertBefore(n),a.html(o.html()),o.remove()}}),e})}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"Paragraph",exec:function(e){var t=e.getEditor();e.focus(),t.hasFormat("TABLE")||t.hasFormat("PRE")||t.modifyBlocks(function(e){var t=(0,i.default)(document.createDocumentFragment());return(0,i.default)(e).children().each(function(e,n){n.nodeName.match(/h\d/i)?t.append((0,i.default)(n).children()):n.nodeName.match(/ul|ol/i)?(0,i.default)(n).find("li").each(function(e,n){t.append((0,i.default)(n).children())}):t.append(n)}),t[0]})}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("wysiwyg",{name:"UL",keyMap:["CTRL+U","META+U"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),r=n.startContainer,o=n.endContainer,a=n.startOffset,l=n.endOffset,s=[];if(e.focus(),t.saveUndoState(n),i.isAvailableMakeListInTable())s=i.createListInTable(n,"UL");else for(var u=i.getLinesOfSelection(r,o),c=0;c<u.length;c+=1){var d=this._changeFormatToUnorderedListIfNeed(e,u[c]);d&&s.push(d)}s.length&&i.adjustRange(r,o,a,l,s)},_changeFormatToUnorderedListIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection(),r=e.componentManager.getManager("task"),o=void 0;return n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("LI")?(e.saveSelection(i),r.unformatTask(i.startContainer),n.replaceParent(i.startContainer,"ol","ul"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeUnorderedList()),o=n.getSelection().startContainer),o}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("wysiwyg",{name:"OL",keyMap:["CTRL+O","META+O"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),r=n.startContainer,o=n.startOffset,a=n.endContainer,l=n.endOffset,s=[];if(e.focus(),t.saveUndoState(n),i.isAvailableMakeListInTable())s=i.createListInTable(n,"OL");else for(var u=i.getLinesOfSelection(r,a),c=0;c<u.length;c+=1){var d=this._changeFormatToOrderedListIfNeed(e,u[c]);d&&s.push(d)}s.length&&i.adjustRange(r,a,o,l,s)},_changeFormatToOrderedListIfNeed:function(e,t){var n=e.getEditor(),i=n.getSelection(),r=e.componentManager.getManager("task"),o=void 0;return n.hasFormat("PRE")||(i.setStart(t,0),i.collapse(!0),n.setSelection(i),n.hasFormat("LI")?(e.saveSelection(i),r.unformatTask(i.startContainer),n.replaceParent(i.startContainer,"ul","ol"),e.restoreSavedSelection()):(e.unwrapBlockTag(),n.makeOrderedList()),o=n.getSelection().startContainer),o}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(2);var o=((i=r)&&i.__esModule?i:{default:i}).default.command("wysiwyg",{name:"Table",exec:function(e,t,n,i){var r=e.getEditor(),o=e.componentManager.getManager("table").getTableIDClassName(),a=void 0;!r.getSelection().collapsed||r.hasFormat("TABLE")||r.hasFormat("PRE")?e.focus():(a='<table class="'+o+'">',a+=function(e,t){var n="<thead><tr>",i=0;for(;e;)n+="<th>",t&&(n+=t[i],i+=1),n+="</th>",e-=1;return n+="</tr></thead>"}(t,i),a+=function(e,t,n){for(var i="<tbody>",r=e,o=0;o<t;o+=1){i+="<tr>";for(var a=0;a<e;a+=1)i+="<td>",n&&(i+=n[r],r+=1),i+="</td>";i+="</tr>"}return i+="</tbody>"}(t,n-1,i),a+="</table>",r.insertHTML(a),e.focus(),i||function(e,t){var n=e.getSelection();n.selectNodeContents(t.find("th")[0]),n.collapse(!0),e.setSelection(n)}(r,e.get$Body().find("."+o)))}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(0)),r=o(n(1));function o(e){return e&&e.__esModule?e:{default:e}}var a=o(n(2)).default.command("wysiwyg",{name:"AddRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),r=function(e){var t=e.componentManager.getManager("tableSelection"),n=t.getSelectedCells(),i=1;if(n.length>1){var r=n.first().get(0),o=n.last().get(0),a=t.getSelectionRangeFromTable(r,o);i=a.to.row-a.from.row+1}return i}(e),o=void 0,a=void 0;if(e.focus(),t.hasFormat("TD")){t.saveUndoState(n),o=(0,i.default)(n.startContainer).closest("tr");for(var u=0;u<r;u+=1)(a=l(o)).insertAfter(o);s(t,a)}else if(t.hasFormat("TH")){t.saveUndoState(n),o=(0,i.default)(n.startContainer).parents("thead").next("tbody").children("tr").eq(0);for(var c=0;c<r;c+=1)(a=l(o)).insertBefore(o);s(t,a)}}});function l(e){var t=e.clone(),n=r.default.browser.msie?"":"<br />";return t.find("td").html(n),t}function s(e,t){var n=e.getSelection();n.selectNodeContents(t.find("td")[0]),n.collapse(!0),e.setSelection(n)}t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),r=l(n(1)),o=l(n(2)),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=o.default.command("wysiwyg",{name:"AddCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),o=function(e){var t=e.componentManager.getManager("tableSelection").getSelectedCells(),n=1;if(t.length>0){var i=t.get(0).parentNode.querySelectorAll("td, th").length;n=Math.min(i,t.length)}return n}(e),l=void 0;e.focus(),t.hasFormat("TR")&&(t.saveUndoState(n),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e.index(),o=void 0;e.parents("table").find("tr").each(function(e,l){for(var s="TBODY"===a.default.getNodeName(l.parentNode),u=r.default.browser.msie,c=l.children[n],d=0;d<t;d+=1)o=s?document.createElement("td"):document.createElement("th"),u||o.appendChild(document.createElement("br")),(0,i.default)(o).insertAfter(c)})}(l=function(e){var t=e.startContainer;t="TD"===a.default.getNodeName(t)||"TH"===a.default.getNodeName(t)?(0,i.default)(t):(0,i.default)(t).parentsUntil("tr");return t}(n),o),function(e,t){var n=e.getSelection();n.selectNodeContents(t.next()[0]),n.collapse(!0),e.setSelection(n)}(t,l))}});t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"RemoveRow",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),r=(0,i.default)(n.startContainer).parents("table"),o=e.componentManager.getManager("tableSelection"),l=e.componentManager.getManager("table"),s=function(e,t,n){var r=t.getSelectedCells(),o=void 0,l=void 0;if(r.length)o=t.getSelectionRangeFromTable(r.first().get(0),r.last().get(0)),l=a(r.first()[0],o,n);else{var s=(0,i.default)(e.startContainer).closest("td,th").get(0);o=t.getSelectionRangeFromTable(s,s),l=a(s,o,n)}return l}(n,o,r),u=r.find("tbody tr").length;if(e.focus(),(t.hasFormat("TD")||t.hasFormat("TABLE"))&&u>1){t.saveUndoState(n);var c=s.last().next()[0]?s.last().next():s.first().prev();c.length&&function(e,t,n,i){var r=n.find("td").get(0);t.setStart(r,0),t.collapse(!0),i.setLastCellNode(r),e.setSelection(t)}(t,n,c,l),s.remove()}o.removeClassAttrbuteFromAllCellsIfNeed()}});function a(e,t,n){var r=n.find("tbody tr").length,o=(0,i.default)(e).parents("thead").length,a=t.from.row,l=t.to.row;return o&&(a+=1),(1===a||o)&&l===r&&(l-=1),n.find("tr").slice(a,l+1)}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),r=a(n(2)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=r.default.command("wysiwyg",{name:"RemoveCol",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange(),r=(0,i.default)(n.startContainer).parents("table"),a=e.componentManager.getManager("table"),l=e.componentManager.getManager("tableSelection"),u=(0,i.default)(n.startContainer).closest("table").find("thead tr th").length>1;if(e.focus(),n.collapse(!0),t.setSelection(n),t.hasFormat("TR",null,n)&&u){var c=r.find("tbody tr:first td").length,d=l.getSelectedCells();if(d.length<c){t.saveUndoState(n);var f=void 0;if(d.length>1){var h=d.last(),p=d.first();f=h.next().length?h.next():p.prev(),function(e){for(var t=e.length,n=0;n<t;n+=1){var i=e.eq(n);i.length>0&&s(e.eq(n))}}(d)}else{var g=function(e){var t=e.startContainer;t="TD"===o.default.getNodeName(t)||"TH"===o.default.getNodeName(t)?(0,i.default)(t):(0,i.default)(t).parentsUntil("tr");return t}(n);f=g.next().length?g.next():g.prev(),s(g)}!function(e,t,n){var r=t.get(0);if(t.length&&i.default.contains(document,t)){var o=e.getSelection();o.selectNodeContents(t[0]),o.collapse(!0),e.setSelection(o),n.setLastCellNode(r)}}(t,f,a)}}}});function s(e){var t=e.index();e.parents("table").find("tr").each(function(e,n){(0,i.default)(n).children().eq(t).remove()})}t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),r=a(n(2)),o=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=r.default.command("wysiwyg",{name:"AlignCol",exec:function(e,t){var n=e.getEditor(),r=n.getSelection().cloneRange(),a=e.componentManager.getManager("tableSelection"),l=function(e,t){var n=t.getSelectedCells(),r=void 0,a=void 0;if(n.length)r=t.getSelectionRangeFromTable(n.first().get(0),n.last().get(0));else{var l=e.startContainer;a=o.default.isTextNode(l)?(0,i.default)(l).parent("td,th")[0]:l,r=t.getSelectionRangeFromTable(a,a)}return r}(r,a);if(e.focus(),n.hasFormat("TR")){n.saveUndoState(r);var s=(0,i.default)(r.startContainer).parents("table"),u=function(e,t){var n=e.find("tr").eq(0).find("td,th").length,i=t.from,r=t.to,o=void 0,a=void 0,l=void 0;i.row===r.row?(o=i.cell,a=r.cell):i.row<r.row&&(i.cell<=r.cell?(o=0,a=n-1):(o=i.cell,a=r.cell,l=!0));return{startColumnIndex:o,endColumnIndex:a,isDivided:l}}(s,l);!function(e,t,n){var r=n.isDivided||!1,o=n.startColumnIndex,a=n.endColumnIndex,l=e.find("tr").eq(0).find("td,th").length;e.find("tr").each(function(e,n){(0,i.default)(n).children("td,th").each(function(e,n){r&&(o<=e&&e<=l||e<=a)?(0,i.default)(n).attr("align",t):o<=e&&e<=a&&(0,i.default)(n).attr("align",t)})})}(s,t,u)}a.removeClassAttrbuteFromAllCellsIfNeed()}});t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"RemoveTable",exec:function(e){var t=e.getEditor(),n=t.getSelection().cloneRange();t.hasFormat("TABLE")&&(t.saveUndoState(n),(0,i.default)(n.startContainer).closest("table").remove());e.focus()}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"Indent",exec:function(e){var t=e.componentManager.getManager("list"),n=e.getEditor().getSelection(),r=(0,i.default)(n.startContainer).closest("li"),o=void 0,a=void 0,l=void 0,s=r.prev();if(s.length&&r.length){var u=r.find("li").eq(0);e.getEditor().saveUndoState(),a=r.attr("class"),o=s.attr("class"),l=u.attr("class"),r.removeAttr("class"),s.removeAttr("class"),u.length&&!u.children("div").length&&u.removeAttr("class"),e.getEditor().increaseListLevel(),t.mergeList(r.get(0)),r.attr("class",a),s.attr("class",o),u.attr("class",l)}}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"Outdent",exec:function(e){var t=a(e);if(t.length&&!t.next().is("OL,UL")){e.getEditor().saveUndoState();var n=t.attr("class");e.getEditor().decreaseListLevel(),(t=a(e)).attr("class",n)}}});function a(e){var t=e.getEditor().getSelection();return(0,i.default)(t.startContainer).closest("li")}t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(0));function r(e){return e&&e.__esModule?e:{default:e}}var o=r(n(2)).default.command("wysiwyg",{name:"Task",keyMap:["ALT+T","ALT+T"],exec:function(e){var t=e.getEditor(),n=t.getSelection(),i=e.componentManager.getManager("list"),r=n.startContainer,o=n.endContainer,a=n.startOffset,l=n.endOffset,s=[];if(e.focus(),t.saveUndoState(n),i.isAvailableMakeListInTable())s=i.createListInTable(n,"TASK");else for(var u=i.getLinesOfSelection(r,o),c=0;c<u.length;c+=1){var d=this._changeFormatToTaskIfNeed(e,u[c]);d&&s.push(d)}s.length&&i.adjustRange(r,o,a,l,s)},_changeFormatToTaskIfNeed:function(e,t){var n=e.getEditor(),r=n.getSelection(),o=e.componentManager.getManager("task"),a=void 0;return n.hasFormat("PRE")||(r.setStart(t,0),r.collapse(!0),n.setSelection(r),n.hasFormat("li")||(n.makeUnorderedList(),t=n.getSelection().startContainer),(0,i.default)(t).hasClass("task-list-item")?o.unformatTask(t):o.formatTask(t),a=n.getSelection().startContainer),a}});t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=l(n(0)),r=l(n(1)),o=l(n(2)),a=l(n(4));function l(e){return e&&e.__esModule?e:{default:e}}var s=o.default.command("wysiwyg",{name:"Code",keyMap:["SHIFT+CTRL+C","SHIFT+META+C"],exec:function(e){var t=e.getEditor(),n=e.componentManager.getManager("tableSelection"),i=r.default.bind(u,null,e.getEditor());if(e.focus(),t.hasFormat("table")&&n.getSelectedCells().length){n.styleToSelectedCells(i);var o=t.getSelection();o.collapse(!0),t.setSelection(o)}else i(t)}});function u(e,t){if(!t.hasFormat("PRE")&&t.hasFormat("code"))t.changeFormat(null,{tag:"code"}),function(e){"CODE"===a.default.getNodeName(e.startContainer.nextSibling)&&0===a.default.getTextLength(e.startContainer.nextSibling)&&(0,i.default)(e.startContainer.nextSibling).remove()}(e.getSelection().cloneRange());else if(!t.hasFormat("a")&&!t.hasFormat("PRE")){t.hasFormat("b")?t.removeBold():t.hasFormat("i")&&t.removeItalic(),t.changeFormat({tag:"code"});var n=t.getSelection().cloneRange();n.setStart(n.endContainer,n.endOffset),n.collapse(!0),t.setSelection(n)}}t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a(n(0)),r=a(n(1)),o=a(n(2));function a(e){return e&&e.__esModule?e:{default:e}}var l="te-content-codeblock-temp",s=o.default.command("wysiwyg",{name:"CodeBlock",keyMap:["SHIFT+CTRL+P","SHIFT+META+P"],exec:function(e,t){var n=e.getEditor(),o=n.getSelection().cloneRange();if(!n.hasFormat("PRE")&&!n.hasFormat("TABLE")){var a='data-te-codeblock class = "'+l+'"';t&&(a+=' data-language="'+t+'"');var s=function(e,t){var n=t.componentManager.getManager("codeblock"),o=void 0;if(e.collapsed)o="<br>";else{var a=e.extractContents(),l=r.default.toArray(a.childNodes),s=(0,i.default)("<div>").append(n.prepareToPasteOnCodeblock(l));o=s.html()}return o}(o,e);n.insertHTML("<pre "+a+">"+s+"</pre>"),function(e,t){var n=t.getEditor().getSelection().cloneRange();e.removeClass(l),n.setStartBefore(e.get(0).firstChild),n.collapse(!0),t.getEditor().setSelection(n)}(e.get$Body().find("."+l),e)}e.focus()}});t.default=s},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["en","en_US"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Write",Preview:"Preview",Headings:"Headings",Paragraph:"Paragraph",Bold:"Bold",Italic:"Italic",Strike:"Strike",Code:"Inline code",Line:"Line",Blockquote:"Blockquote","Unordered list":"Unordered list","Ordered list":"Ordered list",Task:"Task",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert CodeBlock":"Insert codeBlock","Insert table":"Insert table","Insert image":"Insert image",Heading:"Heading","Image URL":"Image URL","Select image file":"Select image file",Description:"Description",OK:"OK",More:"More",Cancel:"Cancel",File:"File",URL:"URL","Link text":"Link text","Add row":"Add row","Add col":"Add col","Remove row":"Remove row","Remove col":"Remove col","Align left":"Align left","Align center":"Align center","Align right":"Align right","Remove table":"Remove table","Would you like to paste as table?":"Would you like to paste as table?","Text color":"Text color","Auto scroll enabled":"Auto scroll enabled","Auto scroll disabled":"Auto scroll disabled","Choose language":"Choose language"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["ko","ko_KR"],{Markdown:"\ub9c8\ud06c\ub2e4\uc6b4",WYSIWYG:"\uc704\uc9c0\uc705",Write:"\ud3b8\uc9d1\ud558\uae30",Preview:"\ubbf8\ub9ac\ubcf4\uae30",Headings:"\uc81c\ubaa9\ud06c\uae30",Paragraph:"\ubcf8\ubb38",Bold:"\uad75\uac8c",Italic:"\uae30\uc6b8\uc784\uaf34",Strike:"\ucde8\uc18c\uc120",Code:"\uc778\ub77c\uc778 \ucf54\ub4dc",Line:"\ubb38\ub2e8\ub098\ub214",Blockquote:"\uc778\uc6a9\uad6c","Unordered list":"\uae00\uba38\ub9ac \uae30\ud638","Ordered list":"\ubc88\ud638 \ub9e4\uae30\uae30",Task:"\uccb4\ud06c\ubc15\uc2a4",Indent:"\ub4e4\uc5ec\uc4f0\uae30",Outdent:"\ub0b4\uc5b4\uc4f0\uae30","Insert link":"\ub9c1\ud06c \uc0bd\uc785","Insert CodeBlock":"\ucf54\ub4dc\ube14\ub7ed \uc0bd\uc785","Insert table":"\ud45c \uc0bd\uc785","Insert image":"\uc774\ubbf8\uc9c0 \uc0bd\uc785",Heading:"\uc81c\ubaa9","Image URL":"\uc774\ubbf8\uc9c0 \uc8fc\uc18c","Select image file":"\uc774\ubbf8\uc9c0 \ud30c\uc77c\uc744 \uc120\ud0dd\ud558\uc138\uc694.",Description:"\uc124\uba85",OK:"\ud655\uc778",More:"\ub354 \ubcf4\uae30",Cancel:"\ucde8\uc18c",File:"\ud30c\uc77c",URL:"\uc8fc\uc18c","Link text":"\ub9c1\ud06c \ud14d\uc2a4\ud2b8","Add row":"\ud589 \ucd94\uac00","Add col":"\uc5f4 \ucd94\uac00","Remove row":"\ud589 \uc0ad\uc81c","Remove col":"\uc5f4 \uc0ad\uc81c","Align left":"\uc67c\ucabd \uc815\ub82c","Align center":"\uac00\uc6b4\ub370 \uc815\ub82c","Align right":"\uc624\ub978\ucabd \uc815\ub82c","Remove table":"\ud45c \uc0ad\uc81c","Would you like to paste as table?":"\ud45c\ud615\ud0dc\ub85c \ubd99\uc5ec \ub123\uaca0\uc2b5\ub2c8\uae4c?","Text color":"\uae00\uc790 \uc0c9\uc0c1","Auto scroll enabled":"\uc790\ub3d9 \uc2a4\ud06c\ub864 \ucf1c\uc9d0","Auto scroll disabled":"\uc790\ub3d9 \uc2a4\ud06c\ub864 \uaebc\uc9d0","Choose language":"\uc5b8\uc5b4 \uc120\ud0dd"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["zh","zh_CN"],{Markdown:"Markdown",WYSIWYG:"\u6240\u89c1\u5373\u6240\u5f97",Write:"\u7f16\u8f91",Preview:"\u9884\u89c8",Headings:"\u6807\u9898",Paragraph:"\u6587\u672c",Bold:"\u52a0\u7c97",Italic:"\u659c\u4f53\u5b57",Strike:"\u5220\u9664\u7ebf",Code:"\u5185\u5d4c\u4ee3\u7801",Line:"\u6c34\u5e73\u7ebf",Blockquote:"\u5f15\u7528\u5757","Unordered list":"\u65e0\u5e8f\u5217\u8868","Ordered list":"\u6709\u5e8f\u5217\u8868",Task:"\u4efb\u52a1",Indent:"\u7f29\u8fdb",Outdent:"\u51cf\u5c11\u7f29\u8fdb","Insert link":"\u63d2\u5165\u94fe\u63a5","Insert CodeBlock":"\u63d2\u5165\u4ee3\u7801\u5757","Insert table":"\u63d2\u5165\u8868\u683c","Insert image":"\u63d2\u5165\u56fe\u7247",Heading:"\u6807\u9898","Image URL":"\u56fe\u7247\u7f51\u5740","Select image file":"\u9009\u62e9\u56fe\u7247\u6587\u4ef6",Description:"\u8bf4\u660e",OK:"\u786e\u8ba4",More:"\u66f4\u591a",Cancel:"\u53d6\u6d88",File:"\u6587\u4ef6",URL:"URL","Link text":"\u94fe\u63a5\u6587\u672c","Add row":"\u6dfb\u52a0\u884c","Add col":"\u6dfb\u52a0\u5217","Remove row":"\u5220\u9664\u884c","Remove col":"\u5220\u9664\u5217","Align left":"\u5de6\u5bf9\u9f50","Align center":"\u5c45\u4e2d\u5bf9\u9f50","Align right":"\u53f3\u5bf9\u9f50","Remove table":"\u5220\u9664\u8868\u683c","Would you like to paste as table?":"\u9700\u8981\u7c98\u8d34\u4e3a\u8868\u683c\u5417?","Text color":"\u6587\u5b57\u989c\u8272","Auto scroll enabled":"\u81ea\u52a8\u6eda\u52a8\u5df2\u542f\u7528","Auto scroll disabled":"\u81ea\u52a8\u6eda\u52a8\u5df2\u7981\u7528","Choose language":"\u9009\u62e9\u8bed\u8a00"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["ja","ja_JP"],{Markdown:"\u30de\u30fc\u30af\u30c0\u30a6\u30f3",WYSIWYG:"WYSIWYG",Write:"\u7de8\u96c6\u3059\u308b",Preview:"\u30d7\u30ec\u30d3\u30e5\u30fc",Headings:"\u898b\u51fa\u3057",Paragraph:"\u672c\u6587",Bold:"\u592a\u5b57",Italic:"\u30a4\u30bf\u30ea\u30c3\u30af",Strike:"\u30b9\u30c8\u30e9\u30a4\u30af",Code:"\u30a4\u30f3\u30e9\u30a4\u30f3\u30b3\u30fc\u30c9",Line:"\u30e9\u30a4\u30f3",Blockquote:"\u5f15\u7528","Unordered list":"\u756a\u53f7\u306a\u3057\u30ea\u30b9\u30c8","Ordered list":"\u9806\u5e8f\u4ed8\u304d\u30ea\u30b9\u30c8",Task:"\u30bf\u30b9\u30af",Indent:"\u30a4\u30f3\u30c7\u30f3\u30c8",Outdent:"\u30a2\u30a6\u30c8\u30c7\u30f3\u30c8","Insert link":"\u30ea\u30f3\u30af\u633f\u5165","Insert CodeBlock":"\u30b3\u30fc\u30c9\u30d6\u30ed\u30c3\u30af\u633f\u5165","Insert table":"\u30c6\u30fc\u30d6\u30eb\u633f\u5165","Insert image":"\u753b\u50cf\u633f\u5165",Heading:"\u898b\u51fa\u3057","Image URL":"\u30a4\u30e1\u30fc\u30b8URL","Select image file":"\u753b\u50cf\u30d5\u30a1\u30a4\u30eb\u9078\u629e",Description:"\u30c7\u30a3\u30b9\u30af\u30ea\u30d7\u30b7\u30e7\u30f3 ",OK:"\u306f\u3044",More:"\u3082\u3063\u3068",Cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",File:"\u30d5\u30a1\u30a4\u30eb",URL:"URL","Link text":"\u30ea\u30f3\u30af\u30c6\u30ad\u30b9\u30c8","Add row":"\u884c\u8ffd\u52a0","Add col":"\u5217\u8ffd\u52a0","Remove row":"\u884c\u524a\u9664","Remove col":"\u5217\u524a\u9664","Align left":"\u5de6\u63c3\u3048","Align center":"\u4e2d\u592e\u63c3\u3048","Align right":"\u53f3\u63c3\u3048","Remove table":"\u30c6\u30fc\u30d6\u30eb\u524a\u9664","Would you like to paste as table?":"\u30c6\u30fc\u30d6\u30eb\u3092\u8cbc\u308a\u4ed8\u3051\u307e\u3059\u304b?","Text color":"\u6587\u5b57\u8272\u76f8","Auto scroll enabled":"\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\u304c\u6709\u52b9","Auto scroll disabled":"\u81ea\u52d5\u30b9\u30af\u30ed\u30fc\u30eb\u3092\u7121\u52b9\u306b","Choose language":"\u8a00\u8a9e\u9078\u629e"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["nl","nl_NL"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Opslaan",Preview:"Voorbeeld",Headings:"Koppen",Paragraph:"Alinea",Bold:"Vet",Italic:"Cursief",Strike:"Doorhalen",Code:"Inline code",Line:"Regel",Blockquote:"Citaatblok","Unordered list":"Opsomming","Ordered list":"Genummerde opsomming",Task:"Taak",Indent:"Niveau verhogen",Outdent:"Niveau verlagen","Insert link":"Link invoegen","Insert CodeBlock":"Codeblok toevoegen","Insert table":"Tabel invoegen","Insert image":"Afbeelding invoegen",Heading:"Kop","Image URL":"Afbeelding URL","Select image file":"Selecteer een afbeelding",Description:"Omschrijving",OK:"OK",More:"Meer",Cancel:"Annuleren",File:"Bestand",URL:"URL","Link text":"Link tekst","Add row":"Rij toevoegen","Add col":"Kolom toevoegen","Remove row":"Rij verwijderen","Remove col":"Kolom verwijderen","Align left":"Links uitlijnen","Align center":"Centreren","Align right":"Rechts uitlijnen","Remove table":"Verwijder tabel","Would you like to paste as table?":"Wil je dit als tabel plakken?","Text color":"Tekstkleur","Auto scroll enabled":"Autoscroll ingeschakeld","Auto scroll disabled":"Autoscroll uitgeschakeld","Choose language":"Kies een taal"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["es","es_ES"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Escribir",Preview:"Vista previa",Headings:"Encabezados",Paragraph:"P\xe1rrafo",Bold:"Negrita",Italic:"It\xe1lica",Strike:"Tachado",Code:"C\xf3digo",Line:"L\xednea",Blockquote:"Cita","Unordered list":"Lista desordenada","Ordered list":"Lista ordenada",Task:"Tarea",Indent:"Sangr\xeda",Outdent:"Saliendo","Insert link":"Insertar enlace","Insert CodeBlock":"Insertar bloque de c\xf3digo","Insert table":"Insertar tabla","Insert image":"Insertar imagen",Heading:"Encabezado","Image URL":"URL de la imagen","Select image file":"Seleccionar archivo de imagen",Description:"Descripci\xf3n",OK:"Aceptar",More:"M\xe1s",Cancel:"Cancelar",File:"Archivo",URL:"URL","Link text":"Texto del enlace","Add row":"Agregar fila","Add col":"Agregar columna","Remove row":"Eliminar fila","Remove col":"Eliminar columna","Align left":"Alinear a la izquierda","Align center":"Centrar","Align right":"Alinear a la derecha","Remove table":"Eliminar tabla","Would you like to paste as table?":"\xbfDesea pegar como tabla?","Text color":"Color del texto","Auto scroll enabled":"Desplazamiento autom\xe1tico habilitado","Auto scroll disabled":"Desplazamiento autom\xe1tico deshabilitado","Choose language":"Elegir idioma"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["de","de_DE"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Verfassen",Preview:"Vorschau",Headings:"\xdcberschriften",Paragraph:"Text",Bold:"Fett",Italic:"Kursiv",Strike:"Durchgestrichen",Code:"Code",Line:"Trennlinie",Blockquote:"Blocktext","Unordered list":"Aufz\xe4hlung","Ordered list":"Nummerierte Aufz\xe4hlung",Task:"Aufgabe",Indent:"Einr\xfccken",Outdent:"Ausr\xfccken","Insert link":"Link einf\xfcgen","Insert CodeBlock":"Codeblock einf\xfcgen","Insert table":"Tabelle einf\xfcgen","Insert image":"Grafik einf\xfcgen",Heading:"Titel","Image URL":"Bild URL","Select image file":"Grafik ausw\xe4hlen",Description:"Beschreibung",OK:"OK",More:"Mehr",Cancel:"Abbrechen",File:"Datei",URL:"URL","Link text":"Anzuzeigender Text","Add row":"Zeile hinzuf\xfcgen","Add col":"Spalte hinzuf\xfcgen","Remove row":"Zeile entfernen","Remove col":"Spalte entfernen","Align left":"Links ausrichten","Align center":"Zentrieren","Align right":"Rechts ausrichten","Remove table":"Tabelle entfernen","Would you like to paste as table?":"M\xf6chten Sie eine Tabelle einf\xfcgen?","Text color":"Textfarbe","Auto scroll enabled":"Autoscrollen aktiviert","Auto scroll disabled":"Autoscrollen deaktiviert","Choose language":"Sprache ausw\xe4hlen"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["ru","ru_RU"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u044c",Preview:"\u041f\u0440\u0435\u0434\u0432\u0430\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0439 \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440",Headings:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",Paragraph:"\u0410\u0431\u0437\u0430\u0446",Bold:"\u0416\u0438\u0440\u043d\u044b\u0439",Italic:"\u041a\u0443\u0440\u0441\u0438\u0432",Strike:"\u0417\u0430\u0447\u0435\u0440\u043a\u043d\u0443\u0442\u044b\u0439",Code:"\u0412\u0441\u0442\u0440\u043e\u0435\u043d\u043d\u044b\u0439 \u043a\u043e\u0434",Line:"\u0421\u0442\u0440\u043e\u043a\u0430",Blockquote:"\u0411\u043b\u043e\u043a \u0446\u0438\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u044f","Unordered list":"\u041d\u0435\u0443\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a","Ordered list":"\u0423\u043f\u043e\u0440\u044f\u0434\u043e\u0447\u0435\u043d\u043d\u044b\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",Task:"\u0417\u0430\u0434\u0430\u0447\u0430",Indent:"\u043e\u0442\u0441\u0442\u0443\u043f",Outdent:"\u0412\u044b\u0441\u0442\u0443\u043f","Insert link":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0441\u0441\u044b\u043b\u043a\u0443","Insert CodeBlock":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u0434","Insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443","Insert image":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",Heading:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","Image URL":"URL \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f","Select image file":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u0444\u0430\u0439\u043b \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f",Description:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435",OK:"\u0425\u043e\u0440\u043e\u0448\u043e",More:"\u0435\u0449\u0435",Cancel:"\u041e\u0442\u043c\u0435\u043d\u0430",File:"\u0424\u0430\u0439\u043b",URL:"URL","Link text":"\u0422\u0435\u043a\u0441\u0442 \u0441\u0441\u044b\u043b\u043a\u0438","Add row":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u044f\u0434","Add col":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","Remove row":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u044f\u0434","Remove col":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u0442\u043e\u043b\u0431\u0435\u0446","Align left":"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043b\u0435\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e","Align center":"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443","Align right":"\u0412\u044b\u0440\u043e\u0432\u043d\u044f\u0442\u044c \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e","Remove table":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0442\u0430\u0431\u043b\u0438\u0446\u0443","Would you like to paste as table?":"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0432 \u0432\u0438\u0434\u0435 \u0442\u0430\u0431\u043b\u0438\u0446\u044b?","Text color":"\u0426\u0432\u0435\u0442 \u0442\u0435\u043a\u0441\u0442\u0430","Auto scroll enabled":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430","Auto scroll disabled":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0430\u044f \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430 \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u0430","Choose language":"\u0412\u044b\u0431\u0440\u0430\u0442\u044c \u044f\u0437\u044b\u043a"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["fr","fr_FR"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"\xc9crire",Preview:"Aper\xe7u",Headings:"En-t\xeates",Paragraph:"Paragraphe",Bold:"Gras",Italic:"Italique",Strike:"Barr\xe9",Code:"Code en ligne",Line:"Ligne",Blockquote:"Citation","Unordered list":"Liste non-ordonn\xe9e","Ordered list":"Liste ordonn\xe9e",Task:"T\xe2che",Indent:"Retrait",Outdent:"Sortir","Insert link":"Ins\xe9rer un lien","Insert CodeBlock":"Ins\xe9rer un bloc de code","Insert table":"Ins\xe9rer un tableau","Insert image":"Ins\xe9rer une image",Heading:"En-t\xeate","Image URL":"URL de l'image","Select image file":"S\xe9lectionnez un fichier image",Description:"Description",OK:"OK",More:"de plus",Cancel:"Annuler",File:"Fichier",URL:"URL","Link text":"Texte du lien","Add row":"Ajouter une ligne","Add col":"Ajouter une colonne","Remove row":"Supprimer une ligne","Remove col":"Supprimer une colonne","Align left":"Aligner \xe0 gauche","Align center":"Aligner au centre","Align right":"Aligner \xe0 droite","Remove table":"Supprimer le tableau","Would you like to paste as table?":"Voulez-vous coller ce contenu en tant que tableau ?","Text color":"Couleur du texte","Auto scroll enabled":"D\xe9filement automatique activ\xe9","Auto scroll disabled":"D\xe9filement automatique d\xe9sactiv\xe9","Choose language":"Choix de la langue"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["uk","uk_UA"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u0438",Preview:"\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u0439 \u043f\u0435\u0440\u0435\u0433\u043b\u044f\u0434",Headings:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0438",Paragraph:"\u0410\u0431\u0437\u0430\u0446",Bold:"\u0416\u0438\u0440\u043d\u0438\u0439",Italic:"\u041a\u0443\u0440\u0441\u0438\u0432",Strike:"\u0417\u0430\u043a\u0440\u0435\u0441\u043b\u0435\u043d\u0438\u0439",Code:"\u0412\u0431\u0443\u0434\u043e\u0432\u0430\u043d\u0438\u0439 \u043a\u043e\u0434",Line:"\u041b\u0456\u043d\u0456\u044f",Blockquote:"\u0411\u043b\u043e\u043a \u0446\u0438\u0442\u0443\u0432\u0430\u043d\u043d\u044f","Unordered list":"\u041d\u0435\u0432\u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0430\u043d\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a","Ordered list":"\u0423\u043f\u043e\u0440\u044f\u0434\u043a\u043e\u0432\u0430\u043d\u0438\u0439 \u0441\u043f\u0438\u0441\u043e\u043a",Task:"\u0417\u0430\u0432\u0434\u0430\u043d\u043d\u044f",Indent:"\u0432\u0456\u0434\u0441\u0442\u0443\u043f",Outdent:"\u0437\u0430\u0441\u0442\u0430\u0440\u0456\u043b\u0438\u0439","Insert link":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f","Insert CodeBlock":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u043a\u043e\u0434","Insert table":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e","Insert image":"\u0412\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",Heading:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a","Image URL":"URL \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f","Select image file":"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u0444\u0430\u0439\u043b \u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u043d\u044f",Description:"\u041e\u043f\u0438\u0441",OK:"OK",More:"\u0449\u0435",Cancel:"\u0421\u043a\u0430\u0441\u0443\u0432\u0430\u0442\u0438",File:"\u0424\u0430\u0439\u043b",URL:"URL","Link text":"\u0422\u0435\u043a\u0441\u0442 \u043f\u043e\u0441\u0438\u043b\u0430\u043d\u043d\u044f","Add row":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0440\u044f\u0434","Add col":"\u0414\u043e\u0434\u0430\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0447\u0438\u043a","Remove row":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0440\u044f\u0434","Remove col":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0441\u0442\u043e\u0432\u043f\u0447\u0438\u043a","Align left":"\u0412\u0438\u0440\u0456\u0432\u043d\u044f\u0442\u0438 \u043f\u043e \u043b\u0456\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e","Align center":"\u0412\u0438\u0440\u0456\u0432\u043d\u044f\u0442\u0438 \u043f\u043e \u0446\u0435\u043d\u0442\u0440\u0443","Align right":"\u0412\u0438\u0440\u0456\u0432\u043d\u044f\u0442\u0438 \u043f\u043e \u043f\u0440\u0430\u0432\u043e\u043c\u0443 \u043a\u0440\u0430\u044e","Remove table":"\u0412\u0438\u0434\u0430\u043b\u0438\u0442\u0438 \u0442\u0430\u0431\u043b\u0438\u0446\u044e","Would you like to paste as table?":"\u0412\u0438 \u0445\u043e\u0447\u0435\u0442\u0435 \u0432\u0441\u0442\u0430\u0432\u0438\u0442\u0438 \u0443 \u0432\u0438\u0433\u043b\u044f\u0434\u0456 \u0442\u0430\u0431\u043b\u0438\u0446\u0456?","Text color":"\u041a\u043e\u043b\u0456\u0440 \u0442\u0435\u043a\u0441\u0442\u0443","Auto scroll enabled":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u0430 \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430 \u0432\u043a\u043b\u044e\u0447\u0435\u043d\u0430","Auto scroll disabled":"\u0410\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u0430 \u043f\u0440\u043e\u043a\u0440\u0443\u0442\u043a\u0430 \u0432\u0456\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0430","Choose language":"\u0412\u0438\u0431\u0440\u0430\u0442\u0438 \u043c\u043e\u0432\u0443"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["tr","tr_TR"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"D\xfczenle",Preview:"\xd6n izleme",Headings:"Ba\u015fl\u0131klar",Paragraph:"Paragraf",Bold:"Kal\u0131n",Italic:"\u0130talik",Strike:"Alt\u0131 \xe7izgili",Code:"Sat\u0131r i\xe7i kod",Line:"\xc7izgi",Blockquote:"Al\u0131nt\u0131","Unordered list":"S\u0131ralanmam\u0131\u015f liste","Ordered list":"S\u0131ral\u0131 liste",Task:"G\xf6rev kutusu",Indent:"Girintiyi artt\u0131r",Outdent:"Girintiyi azalt","Insert link":"Ba\u011flant\u0131 ekle","Insert CodeBlock":"Kod bloku ekle","Insert table":"Tablo ekle","Insert image":"\u0130maj ekle",Heading:"Ba\u015fl\u0131k","Image URL":"\u0130maj URL","Select image file":"\u0130maj dosyas\u0131 se\xe7",Description:"A\xe7\u0131klama",OK:"Onay",More:"Daha Fazla",Cancel:"\u0130ptal",File:"Dosya",URL:"URL","Link text":"Ba\u011flant\u0131 yaz\u0131s\u0131","Add row":"Sat\u0131r ekle","Add col":"S\xfctun ekle","Remove row":"Sat\u0131r sil","Remove col":"S\xfctun sil","Align left":"Sola hizala","Align center":"Merkeze hizala","Align right":"Sa\u011fa hizala","Remove table":"Tabloyu kald\u0131r","Would you like to paste as table?":"Tablo olarak yap\u0131\u015ft\u0131rmak ister misiniz?","Text color":"Metin rengi","Auto scroll enabled":"Otomatik kayd\u0131rma a\xe7\u0131k","Auto scroll disabled":"Otomatik kayd\u0131rma kapal\u0131","Choose language":"Dil se\xe7iniz"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["fi","fi_FI"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Kirjoita",Preview:"Esikatselu",Headings:"Otsikot",Paragraph:"Kappale",Bold:"Lihavointi",Italic:"Kursivointi",Strike:"Yliviivaus",Code:"Koodi",Line:"Vaakaviiva",Blockquote:"Lainaus","Unordered list":"Luettelo","Ordered list":"Numeroitu luettelo",Task:"Teht\xe4v\xe4",Indent:"Suurenna sisennyst\xe4",Outdent:"Pienenn\xe4 sisennyst\xe4","Insert link":"Lis\xe4\xe4 linkki","Insert CodeBlock":"Lis\xe4\xe4 koodia","Insert table":"Lis\xe4\xe4 taulukko","Insert image":"Lis\xe4\xe4 kuva",Heading:"Otsikko","Image URL":"Kuvan URL","Select image file":"Valitse kuvatiedosto",Description:"Kuvaus",OK:"OK",More:"Lis\xe4\xe4",Cancel:"Peruuta",File:"Tiedosto",URL:"URL","Link text":"Linkkiteksti","Add row":"Lis\xe4\xe4 rivi","Add col":"Lis\xe4\xe4 sarake","Remove row":"Poista rivi","Remove col":"Poista sarake","Align left":"Tasaus vasemmalle","Align center":"Keskit\xe4","Align right":"Tasaus oikealle","Remove table":"Poista taulukko","Would you like to paste as table?":"Haluatko liitt\xe4\xe4 taulukkomuodossa?","Text color":"Tekstin v\xe4ri","Auto scroll enabled":"Automaattinen skrollaus k\xe4yt\xf6ss\xe4","Auto scroll disabled":"Automaattinen skrollaus pois k\xe4yt\xf6st\xe4","Choose language":"Valitse kieli"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["cs","cs_CZ"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Napsat",Preview:"N\xe1hled",Headings:"Nadpisy",Paragraph:"Odstavec",Bold:"Tu\u010dn\xe9",Italic:"Kurz\xedva",Strike:"P\u0159e\u0161krtnut\xe9",Code:"K\xf3d",Line:"Vodorovn\xe1 \u010d\xe1ra",Blockquote:"Citace","Unordered list":"Seznam s odr\xe1\u017ekami","Ordered list":"\u010c\xedslovan\xfd seznam",Task:"\xdakol",Indent:"Zv\u011bt\u0161it odsazen\xed",Outdent:"Zmen\u0161it odsazen\xed","Insert link":"Vlo\u017eit odkaz","Insert CodeBlock":"Vlo\u017eit blok k\xf3du","Insert table":"Vlo\u017eit tabulku","Insert image":"Vlo\u017eit obr\xe1zek",Heading:"Nadpis","Image URL":"URL obr\xe1zku","Select image file":"Vybrat obr\xe1zek",Description:"Popis",OK:"OK",More:"V\xedce",Cancel:"Zru\u0161it",File:"Soubor",URL:"URL","Link text":"Text odkazu","Add row":"P\u0159idat \u0159\xe1dek","Add col":"P\u0159idat sloupec","Remove row":"Odebrat \u0159\xe1dek","Remove col":"Odebrat sloupec","Align left":"Zarovnat vlevo","Align center":"Zarovnat na st\u0159ed","Align right":"Zarovnat vpravo","Remove table":"Odstranit tabulku","Would you like to paste as table?":"Chcete vlo\u017eit jako tabulku?","Text color":"Barva textu","Auto scroll enabled":"Automatick\xe9 rolov\xe1n\xed zapnuto","Auto scroll disabled":"Automatick\xe9 rolov\xe1n\xed vypnuto","Choose language":"Vybrat jazyk"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["ar","ar_AR"],{Markdown:"\u0644\u063a\u0629 \u062a\u0631\u0645\u064a\u0632",WYSIWYG:"\u0645\u0627 \u062a\u0631\u0627\u0647 \u0647\u0648 \u0645\u0627 \u062a\u062d\u0635\u0644 \u0639\u0644\u064a\u0647",Write:"\u064a\u0643\u062a\u0628",Preview:"\u0639\u0631\u0636 \u0645\u0633\u0628\u0642",Headings:"\u0627\u0644\u0639\u0646\u0627\u0648\u064a\u0646",Paragraph:"\u0641\u0642\u0631\u0629",Bold:"\u062e\u0637 \u0639\u0631\u064a\u0636",Italic:"\u062e\u0637 \u0645\u0627\u0626\u0644",Strike:"\u0625\u0636\u0631\u0627\u0628",Code:"\u0631\u0645\u0632",Line:"\u062e\u0637",Blockquote:"\u0641\u0642\u0631\u0629 \u0645\u0642\u062a\u0628\u0633\u0629","Unordered list":"\u0642\u0627\u0626\u0645\u0629 \u063a\u064a\u0631 \u0645\u0631\u062a\u0628\u0629","Ordered list":"\u0642\u0627\u0626\u0645\u0629 \u0645\u0631\u062a\u0628\u0629",Task:"\u0645\u0647\u0645\u0629",Indent:"\u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u0627\u0644\u0628\u0627\u062f\u0626\u0629",Outdent:"\u0627\u0644\u0645\u0633\u0627\u0641\u0629 \u0627\u0644\u062e\u0627\u0631\u062c\u0629","Insert link":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0631\u0627\u0628\u0637","Insert CodeBlock":"\u0623\u062f\u062e\u0644 \u0627\u0644\u0643\u0648\u062f","Insert table":"\u0623\u062f\u062e\u0644 \u062c\u062f\u0648\u0644","Insert image":"\u0623\u062f\u062e\u0644 \u0635\u0648\u0631\u0629",Heading:"\u0639\u0646\u0648\u0627\u0646","Image URL":"\u0631\u0627\u0628\u0637 \u0627\u0644\u0635\u0648\u0631\u0629","Select image file":"\u062d\u062f\u062f \u0645\u0644\u0641 \u0627\u0644\u0635\u0648\u0631\u0629",Description:"\u0648\u0635\u0641",OK:"\u0645\u0648\u0627\u0641\u0642\u0629",More:"\u0623\u0643\u062b\u0631",Cancel:"\u0625\u0644\u063a\u0627\u0621",File:"\u0645\u0644\u0641",URL:"\u0631\u0627\u0628\u0637","Link text":"\u0646\u0635 \u0627\u0644\u0631\u0627\u0628\u0637","Add row":"\u0636\u0641 \u0633\u0637\u0631","Add col":"\u0636\u0641 \u0639\u0645\u0648\u062f","Remove row":"\u062d\u0630\u0641 \u0633\u0637\u0631","Remove col":"\u062d\u0630\u0641 \u0639\u0645\u0648\u062f","Align left":"\u0645\u062d\u0627\u0630\u0627\u0629 \u0627\u0644\u064a\u0633\u0627\u0631","Align center":"\u0645\u062d\u0627\u0630\u0627\u0629 \u0627\u0644\u0648\u0633\u0637","Align right":"\u0645\u062d\u0627\u0630\u0627\u0629 \u0627\u0644\u064a\u0645\u064a\u0646","Remove table":"\u062d\u0630\u0641 \u0627\u0644\u062c\u062f\u0648\u0644","Would you like to paste as table?":"\u0647\u0644 \u062a\u0631\u064a\u062f \u0627\u0644\u0644\u0635\u0642 \u0643\u062c\u062f\u0648\u0644","Text color":"\u0644\u0648\u0646 \u0627\u0644\u0646\u0635","Auto scroll enabled":"\u0627\u0644\u062a\u062d\u0631\u064a\u0643 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a \u0645\u0645\u0643\u0651\u0646","Auto scroll disabled":"\u0627\u0644\u062a\u062d\u0631\u064a\u0643 \u0627\u0644\u062a\u0644\u0642\u0627\u0626\u064a \u0645\u0639\u0637\u0651\u0644","Choose language":"\u0627\u062e\u062a\u0631 \u0627\u0644\u0644\u063a\u0629"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["pl","pl_PL"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Napisz",Preview:"Podgl\u0105d",Headings:"Nag\u0142\xf3wki",Paragraph:"Akapit",Bold:"Pogrubienie",Italic:"Kursywa",Strike:"Przekre\u015blenie",Code:"Fragment kodu",Line:"Linia",Blockquote:"Cytat","Unordered list":"Lista nieuporz\u0105dkowana","Ordered list":"Lista uporz\u0105dkowana",Task:"Zadanie",Indent:"Utw\xf3rz wci\u0119cie",Outdent:"Usu\u0144 wci\u0119cie","Insert link":"Umie\u015b\u0107 odno\u015bnik","Insert CodeBlock":"Umie\u015b\u0107 blok kodu","Insert table":"Umie\u015b\u0107 tabel\u0119","Insert image":"Umie\u015b\u0107 obraz",Heading:"Nag\u0142\xf3wek","Image URL":"Adres URL obrazu","Select image file":"Wybierz plik obrazu",Description:"Opis",OK:"OK",More:"Wi\u0119cej",Cancel:"Anuluj",File:"Plik",URL:"URL","Link text":"Tekst odno\u015bnika","Add row":"Dodaj rz\u0105d","Add col":"Dodaj kolumn\u0119","Remove row":"Usu\u0144 rz\u0105d","Remove col":"Usu\u0144 kolumn\u0119","Align left":"Wyr\xf3wnaj do lewej","Align center":"Wy\u015brodkuj","Align right":"Wyr\xf3wnaj do prawej","Remove table":"Usu\u0144 tabel\u0119","Would you like to paste as table?":"Czy chcesz wklei\u0107 tekst jako tabel\u0119?","Text color":"Kolor tekstu","Auto scroll enabled":"W\u0142\u0105czono automatyczne przewijanie","Auto scroll disabled":"Wy\u0142\u0105czono automatyczne przewijanie","Choose language":"Wybierz j\u0119zyk"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["zhtw","zh_TW"],{Markdown:"Markdown",WYSIWYG:"\u6240\u898b\u5373\u6240\u5f97",Write:"\u7de8\u8f2f",Preview:"\u9810\u89bd",Headings:"\u6a19\u984c",Paragraph:"\u5167\u6587",Bold:"\u7c97\u9ad4",Italic:"\u659c\u9ad4",Strike:"\u522a\u9664\u7dda",Code:"\u5167\u5d4c\u7a0b\u5f0f\u78bc",Line:"\u5206\u9694\u7dda",Blockquote:"\u5f15\u8a00","Unordered list":"\u9805\u76ee\u7b26\u865f\u6e05\u55ae","Ordered list":"\u7de8\u865f\u6e05\u55ae",Task:"\u6838\u53d6\u65b9\u584a\u6e05\u55ae",Indent:"\u589e\u52a0\u7e2e\u6392",Outdent:"\u6e1b\u5c11\u7e2e\u6392","Insert link":"\u63d2\u5165\u8d85\u9023\u7d50","Insert CodeBlock":"\u63d2\u5165\u7a0b\u5f0f\u78bc\u5340\u584a","Insert table":"\u63d2\u5165\u8868\u683c","Insert image":"\u63d2\u5165\u5716\u7247",Heading:"\u6a19\u984c","Image URL":"\u5716\u7247\u7db2\u5740","Select image file":"\u9078\u64c7\u5716\u7247\u6a94\u6848",Description:"\u63cf\u8ff0",OK:"\u78ba\u8a8d",More:"\u66f4\u591a",Cancel:"\u53d6\u6d88",File:"\u6a94\u6848",URL:"URL","Link text":"\u8d85\u9023\u7d50\u6587\u5b57","Add row":"\u589e\u52a0\u884c","Add col":"\u589e\u52a0\u5217","Remove row":"\u522a\u9664\u884c","Remove col":"\u522a\u9664\u5217","Align left":"\u9760\u5de6\u5c0d\u9f4a","Align center":"\u7f6e\u4e2d","Align right":"\u9760\u53f3\u5c0d\u9f4a","Remove table":"\u522a\u9664\u8868\u683c","Would you like to paste as table?":"\u60a8\u8981\u4ee5\u8868\u683c\u8cbc\u4e0a\u55ce\uff1f","Text color":"\u6587\u5b57\u984f\u8272","Auto scroll enabled":"\u5df2\u555f\u7528\u81ea\u52d5\u6efe\u52d5","Auto scroll disabled":"\u5df2\u505c\u7528\u81ea\u52d5\u6efe\u52d5","Choose language":"\u9078\u64c7\u8a9e\u8a00"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["gl","gl_ES"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Escribir",Preview:"Vista previa",Headings:"Encabezados",Paragraph:"Par\xe1grafo",Bold:"Negri\xf1a",Italic:"Cursiva",Strike:"Riscado",Code:"C\xf3digo",Line:"Li\xf1a",Blockquote:"Cita","Unordered list":"Lista desordenada","Ordered list":"Lista ordenada",Task:"Tarefa",Indent:"Sangr\xeda",Outdent:"Anular sangr\xeda","Insert link":"Inserir enlace","Insert CodeBlock":"Inserir bloque de c\xf3digo","Insert table":"Inserir t\xe1boa","Insert image":"Inserir imaxe",Heading:"Encabezado","Image URL":"URL da imaxe","Select image file":"Seleccionar arquivo da imaxe",Description:"Descrici\xf3n",OK:"Aceptar",More:"M\xe1is",Cancel:"Cancelar",File:"Arquivo",URL:"URL","Link text":"Texto do enlace","Add row":"Agregar fila","Add col":"Agregar columna","Remove row":"Eliminar fila","Remove col":"Eliminar columna","Align left":"Ali\xf1ar \xe1 esquerda","Align center":"Centrar","Align right":"Ali\xf1ar \xe1 dereita","Remove table":"Eliminar t\xe1boa","Would you like to paste as table?":"Desexa pegar como t\xe1boa?","Text color":"Cor do texto","Auto scroll enabled":"Desprazamento autom\xe1tico habilitado","Auto scroll disabled":"Desprazamento autom\xe1tico deshabilitado","Choose language":"Elixir idioma"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["sv","sv_SE"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Skriv",Preview:"F\xf6rhandsgranska",Headings:"\xd6verskrifter",Paragraph:"Paragraf",Bold:"Fet",Italic:"Kursiv",Strike:"Genomstruken",Code:"Kodrad",Line:"Linje",Blockquote:"Citatblock","Unordered list":"Punktlista","Ordered list":"Numrerad lista",Task:"Att g\xf6ra",Indent:"\xd6ka indrag",Outdent:"Minska indrag","Insert link":"Infoga l\xe4nk","Insert CodeBlock":"Infoga kodblock","Insert table":"Infoga tabell","Insert image":"Infoga bild",Heading:"\xd6verskrift","Image URL":"Bildadress","Select image file":"V\xe4lj en bildfil",Description:"Beskrivning",OK:"OK",More:"Mer",Cancel:"Avbryt",File:"Fil",URL:"Adress","Link text":"L\xe4nktext","Add row":"Infoga rad","Add col":"Infoga kolumn","Remove row":"Radera rad","Remove col":"Radera kolumn","Align left":"V\xe4nsterjustera","Align center":"Centrera","Align right":"H\xf6gerjustera","Remove table":"Radera tabell","Would you like to paste as table?":"Vill du klistra in som en tabell?","Text color":"Textf\xe4rg","Auto scroll enabled":"Automatisk scroll aktiverad","Auto scroll disabled":"Automatisk scroll inaktiverad","Choose language":"V\xe4lj spr\xe5k"})},function(e,t,n){"use strict";var i,r=n(3);((i=r)&&i.__esModule?i:{default:i}).default.setLanguage(["it","it_IT"],{Markdown:"Markdown",WYSIWYG:"WYSIWYG",Write:"Scrivere",Preview:"Anteprima",Headings:"Intestazioni",Paragraph:"Paragrafo",Bold:"Grassetto",Italic:"Corsivo",Strike:"Barrato",Code:"Codice",Line:"Linea",Blockquote:"Blocco citazione","Unordered list":"Lista puntata","Ordered list":"Lista numerata",Task:"Attivit\xe0",Indent:"Aggiungi indentazione",Outdent:"Rimuovi indentazione","Insert link":"Inserisci link","Insert CodeBlock":"Inserisci blocco di codice","Insert table":"Inserisci tabella","Insert image":"Inserisci immagine",Heading:"Intestazione","Image URL":"URL immagine","Select image file":"Seleziona file immagine",Description:"Descrizione",OK:"OK",More:"Pi\xf9",Cancel:"Cancella",File:"File",URL:"URL","Link text":"Testo del collegamento","Add row":"Aggiungi riga","Add col":"Aggiungi colonna","Remove row":"Rimuovi riga","Remove col":"Rimuovi colonna","Align left":"Allinea a sinistra","Align center":"Allinea al centro","Align right":"Allinea a destra","Remove table":"Rimuovi tabella","Would you like to paste as table?":"Desideri incollare sotto forma di tabella?","Text color":"Colore del testo","Auto scroll enabled":"Scrolling automatico abilitato","Auto scroll disabled":"Scrolling automatico disabilitato","Choose language":"Scegli la lingua"})}])},e.exports=i(n(73),n(74),n(93),n(75),n(84),n(85),n(335))},93:function(e,t,n){e.exports=function(){"use strict";var e=navigator.userAgent,t=navigator.platform,n=/gecko\/\d/i.test(e),i=/MSIE \d/.test(e),r=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(e),o=/Edge\/(\d+)/.exec(e),a=i||r||o,l=a&&(i?document.documentMode||6:+(o||r)[1]),s=!o&&/WebKit\//.test(e),u=s&&/Qt\/\d+\.\d+/.test(e),c=!o&&/Chrome\//.test(e),d=/Opera\//.test(e),f=/Apple Computer/.test(navigator.vendor),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(e),p=/PhantomJS/.test(e),g=!o&&/AppleWebKit/.test(e)&&/Mobile\/\w+/.test(e),v=/Android/.test(e),m=g||v||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(e),y=g||/Mac/.test(t),b=/\bCrOS\b/.test(e),_=/win/i.test(t),k=d&&e.match(/Version\/(\d*\.\d*)/);k&&(k=Number(k[1])),k&&k>=15&&(d=!1,s=!0);var w=y&&(u||d&&(null==k||k<12.11)),C=n||a&&l>=9;function S(e){return new RegExp("(^|\\s)"+e+"(?:$|\\s)\\s*")}var T,E=function(e,t){var n=e.className,i=S(t).exec(n);if(i){var r=n.slice(i.index+i[0].length);e.className=n.slice(0,i.index)+(r?i[1]+r:"")}};function x(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function M(e,t){return x(e).appendChild(t)}function L(e,t,n,i){var r=document.createElement(e);if(n&&(r.className=n),i&&(r.style.cssText=i),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)r.appendChild(t[o]);return r}function O(e,t,n,i){var r=L(e,t,n,i);return r.setAttribute("role","presentation"),r}function N(e,t){if(3==t.nodeType&&(t=t.parentNode),e.contains)return e.contains(t);do{if(11==t.nodeType&&(t=t.host),t==e)return!0}while(t=t.parentNode)}function A(){var e;try{e=document.activeElement}catch(t){e=document.body||null}for(;e&&e.shadowRoot&&e.shadowRoot.activeElement;)e=e.shadowRoot.activeElement;return e}function P(e,t){var n=e.className;S(t).test(n)||(e.className+=(n?" ":"")+t)}function I(e,t){for(var n=e.split(" "),i=0;i<n.length;i++)n[i]&&!S(n[i]).test(t)&&(t+=" "+n[i]);return t}T=document.createRange?function(e,t,n,i){var r=document.createRange();return r.setEnd(i||e,n),r.setStart(e,t),r}:function(e,t,n){var i=document.body.createTextRange();try{i.moveToElementText(e.parentNode)}catch(r){return i}return i.collapse(!0),i.moveEnd("character",n),i.moveStart("character",t),i};var B=function(e){e.select()};function R(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function D(e,t,n){for(var i in t||(t={}),e)!e.hasOwnProperty(i)||!1===n&&t.hasOwnProperty(i)||(t[i]=e[i]);return t}function H(e,t,n,i,r){null==t&&-1==(t=e.search(/[^\s\u00a0]/))&&(t=e.length);for(var o=i||0,a=r||0;;){var l=e.indexOf("\t",o);if(l<0||l>=t)return a+(t-o);a+=l-o,a+=n-a%n,o=l+1}}g?B=function(e){e.selectionStart=0,e.selectionEnd=e.value.length}:a&&(B=function(e){try{e.select()}catch(t){}});var F=function(){this.id=null};function W(e,t){for(var n=0;n<e.length;++n)if(e[n]==t)return n;return-1}F.prototype.set=function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)};var j=30,U={toString:function(){return"CodeMirror.Pass"}},$={scroll:!1},z={origin:"*mouse"},V={origin:"+move"};function K(e,t,n){for(var i=0,r=0;;){var o=e.indexOf("\t",i);-1==o&&(o=e.length);var a=o-i;if(o==e.length||r+a>=t)return i+Math.min(a,t-r);if(r+=o-i,i=o+1,(r+=n-r%n)>=t)return i}}var q=[""];function G(e){for(;q.length<=e;)q.push(Y(q)+" ");return q[e]}function Y(e){return e[e.length-1]}function X(e,t){for(var n=[],i=0;i<e.length;i++)n[i]=t(e[i],i);return n}function Z(){}function Q(e,t){var n;return Object.create?n=Object.create(e):(Z.prototype=e,n=new Z),t&&D(t,n),n}var J=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;function ee(e){return/\w/.test(e)||e>"\x80"&&(e.toUpperCase()!=e.toLowerCase()||J.test(e))}function te(e,t){return t?!!(t.source.indexOf("\\w")>-1&&ee(e))||t.test(e):ee(e)}function ne(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}var ie=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function re(e){return e.charCodeAt(0)>=768&&ie.test(e)}function oe(e,t,n){for(;(n<0?t>0:t<e.length)&&re(e.charAt(t));)t+=n;return t}function ae(e,t,n){for(var i=t>n?-1:1;;){if(t==n)return t;var r=(t+n)/2,o=i<0?Math.ceil(r):Math.floor(r);if(o==t)return e(o)?t:n;e(o)?n=o:t=o+i}}var le=null;function se(e,t,n){var i;le=null;for(var r=0;r<e.length;++r){var o=e[r];if(o.from<t&&o.to>t)return r;o.to==t&&(o.from!=o.to&&"before"==n?i=r:le=r),o.from==t&&(o.from!=o.to&&"before"!=n?i=r:le=r)}return null!=i?i:le}var ue=function(){var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",t="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111";var n=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,r=/[LRr]/,o=/[Lb1n]/,a=/[1n]/;function l(e,t,n){this.level=e,this.from=t,this.to=n}return function(s,u){var c,d="ltr"==u?"L":"R";if(0==s.length||"ltr"==u&&!n.test(s))return!1;for(var f=s.length,h=[],p=0;p<f;++p)h.push((c=s.charCodeAt(p))<=247?e.charAt(c):1424<=c&&c<=1524?"R":1536<=c&&c<=1785?t.charAt(c-1536):1774<=c&&c<=2220?"r":8192<=c&&c<=8203?"w":8204==c?"b":"L");for(var g=0,v=d;g<f;++g){var m=h[g];"m"==m?h[g]=v:v=m}for(var y=0,b=d;y<f;++y){var _=h[y];"1"==_&&"r"==b?h[y]="n":r.test(_)&&(b=_,"r"==_&&(h[y]="R"))}for(var k=1,w=h[0];k<f-1;++k){var C=h[k];"+"==C&&"1"==w&&"1"==h[k+1]?h[k]="1":","!=C||w!=h[k+1]||"1"!=w&&"n"!=w||(h[k]=w),w=C}for(var S=0;S<f;++S){var T=h[S];if(","==T)h[S]="N";else if("%"==T){var E=void 0;for(E=S+1;E<f&&"%"==h[E];++E);for(var x=S&&"!"==h[S-1]||E<f&&"1"==h[E]?"1":"N",M=S;M<E;++M)h[M]=x;S=E-1}}for(var L=0,O=d;L<f;++L){var N=h[L];"L"==O&&"1"==N?h[L]="L":r.test(N)&&(O=N)}for(var A=0;A<f;++A)if(i.test(h[A])){var P=void 0;for(P=A+1;P<f&&i.test(h[P]);++P);for(var I="L"==(A?h[A-1]:d),B="L"==(P<f?h[P]:d),R=I==B?I?"L":"R":d,D=A;D<P;++D)h[D]=R;A=P-1}for(var H,F=[],W=0;W<f;)if(o.test(h[W])){var j=W;for(++W;W<f&&o.test(h[W]);++W);F.push(new l(0,j,W))}else{var U=W,$=F.length;for(++W;W<f&&"L"!=h[W];++W);for(var z=U;z<W;)if(a.test(h[z])){U<z&&F.splice($,0,new l(1,U,z));var V=z;for(++z;z<W&&a.test(h[z]);++z);F.splice($,0,new l(2,V,z)),U=z}else++z;U<W&&F.splice($,0,new l(1,U,W))}return"ltr"==u&&(1==F[0].level&&(H=s.match(/^\s+/))&&(F[0].from=H[0].length,F.unshift(new l(0,0,H[0].length))),1==Y(F).level&&(H=s.match(/\s+$/))&&(Y(F).to-=H[0].length,F.push(new l(0,f-H[0].length,f)))),"rtl"==u?F.reverse():F}}();function ce(e,t){var n=e.order;return null==n&&(n=e.order=ue(e.text,t)),n}var de=[],fe=function(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var i=e._handlers||(e._handlers={});i[t]=(i[t]||de).concat(n)}};function he(e,t){return e._handlers&&e._handlers[t]||de}function pe(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var i=e._handlers,r=i&&i[t];if(r){var o=W(r,n);o>-1&&(i[t]=r.slice(0,o).concat(r.slice(o+1)))}}}function ge(e,t){var n=he(e,t);if(n.length)for(var i=Array.prototype.slice.call(arguments,2),r=0;r<n.length;++r)n[r].apply(null,i)}function ve(e,t,n){return"string"==typeof t&&(t={type:t,preventDefault:function(){this.defaultPrevented=!0}}),ge(e,n||t.type,e,t),we(t)||t.codemirrorIgnore}function me(e){var t=e._handlers&&e._handlers.cursorActivity;if(t)for(var n=e.curOp.cursorActivityHandlers||(e.curOp.cursorActivityHandlers=[]),i=0;i<t.length;++i)-1==W(n,t[i])&&n.push(t[i])}function ye(e,t){return he(e,t).length>0}function be(e){e.prototype.on=function(e,t){fe(this,e,t)},e.prototype.off=function(e,t){pe(this,e,t)}}function _e(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function ke(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function we(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}function Ce(e){_e(e),ke(e)}function Se(e){return e.target||e.srcElement}function Te(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),y&&e.ctrlKey&&1==t&&(t=3),t}var Ee,xe,Me=function(){if(a&&l<9)return!1;var e=L("div");return"draggable"in e||"dragDrop"in e}();function Le(e){if(null==Ee){var t=L("span","\u200b");M(e,L("span",[t,document.createTextNode("x")])),0!=e.firstChild.offsetHeight&&(Ee=t.offsetWidth<=1&&t.offsetHeight>2&&!(a&&l<8))}var n=Ee?L("span","\u200b"):L("span","\xa0",null,"display: inline-block; width: 1px; margin-right: -1px");return n.setAttribute("cm-text",""),n}function Oe(e){if(null!=xe)return xe;var t=M(e,document.createTextNode("A\u062eA")),n=T(t,0,1).getBoundingClientRect(),i=T(t,1,2).getBoundingClientRect();return x(e),!(!n||n.left==n.right)&&(xe=i.right-n.right<3)}var Ne=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],i=e.length;t<=i;){var r=e.indexOf("\n",t);-1==r&&(r=e.length);var o=e.slice(t,"\r"==e.charAt(r-1)?r-1:r),a=o.indexOf("\r");-1!=a?(n.push(o.slice(0,a)),t+=a+1):(n.push(o),t=r+1)}return n}:function(e){return e.split(/\r\n?|\n/)},Ae=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){var t;try{t=e.ownerDocument.selection.createRange()}catch(n){}return!(!t||t.parentElement()!=e)&&0!=t.compareEndPoints("StartToEnd",t)},Pe=function(){var e=L("div");return"oncopy"in e||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy)}(),Ie=null,Be={},Re={};function De(e){if("string"==typeof e&&Re.hasOwnProperty(e))e=Re[e];else if(e&&"string"==typeof e.name&&Re.hasOwnProperty(e.name)){var t=Re[e.name];"string"==typeof t&&(t={name:t}),(e=Q(t,e)).name=t.name}else{if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return De("application/xml");if("string"==typeof e&&/^[\w\-]+\/[\w\-]+\+json$/.test(e))return De("application/json")}return"string"==typeof e?{name:e}:e||{name:"null"}}function He(e,t){t=De(t);var n=Be[t.name];if(!n)return He(e,"text/plain");var i=n(e,t);if(Fe.hasOwnProperty(t.name)){var r=Fe[t.name];for(var o in r)r.hasOwnProperty(o)&&(i.hasOwnProperty(o)&&(i["_"+o]=i[o]),i[o]=r[o])}if(i.name=t.name,t.helperType&&(i.helperType=t.helperType),t.modeProps)for(var a in t.modeProps)i[a]=t.modeProps[a];return i}var Fe={};function We(e,t){var n=Fe.hasOwnProperty(e)?Fe[e]:Fe[e]={};D(t,n)}function je(e,t){if(!0===t)return t;if(e.copyState)return e.copyState(t);var n={};for(var i in t){var r=t[i];r instanceof Array&&(r=r.concat([])),n[i]=r}return n}function Ue(e,t){for(var n;e.innerMode&&(n=e.innerMode(t))&&n.mode!=e;)t=n.state,e=n.mode;return n||{mode:e,state:t}}function $e(e,t,n){return!e.startState||e.startState(t,n)}var ze=function(e,t,n){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=n};function Ve(e,t){if((t-=e.first)<0||t>=e.size)throw new Error("There is no line "+(t+e.first)+" in the document.");for(var n=e;!n.lines;)for(var i=0;;++i){var r=n.children[i],o=r.chunkSize();if(t<o){n=r;break}t-=o}return n.lines[t]}function Ke(e,t,n){var i=[],r=t.line;return e.iter(t.line,n.line+1,function(e){var o=e.text;r==n.line&&(o=o.slice(0,n.ch)),r==t.line&&(o=o.slice(t.ch)),i.push(o),++r}),i}function qe(e,t,n){var i=[];return e.iter(t,n,function(e){i.push(e.text)}),i}function Ge(e,t){var n=t-e.height;if(n)for(var i=e;i;i=i.parent)i.height+=n}function Ye(e){if(null==e.parent)return null;for(var t=e.parent,n=W(t.lines,e),i=t.parent;i;t=i,i=i.parent)for(var r=0;i.children[r]!=t;++r)n+=i.children[r].chunkSize();return n+t.first}function Xe(e,t){var n=e.first;e:do{for(var i=0;i<e.children.length;++i){var r=e.children[i],o=r.height;if(t<o){e=r;continue e}t-=o,n+=r.chunkSize()}return n}while(!e.lines);for(var a=0;a<e.lines.length;++a){var l=e.lines[a],s=l.height;if(t<s)break;t-=s}return n+a}function Ze(e,t){return t>=e.first&&t<e.first+e.size}function Qe(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function Je(e,t,n){if(void 0===n&&(n=null),!(this instanceof Je))return new Je(e,t,n);this.line=e,this.ch=t,this.sticky=n}function et(e,t){return e.line-t.line||e.ch-t.ch}function tt(e,t){return e.sticky==t.sticky&&0==et(e,t)}function nt(e){return Je(e.line,e.ch)}function it(e,t){return et(e,t)<0?t:e}function rt(e,t){return et(e,t)<0?e:t}function ot(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function at(e,t){if(t.line<e.first)return Je(e.first,0);var n=e.first+e.size-1;return t.line>n?Je(n,Ve(e,n).text.length):function(e,t){var n=e.ch;return null==n||n>t?Je(e.line,t):n<0?Je(e.line,0):e}(t,Ve(e,t.line).text.length)}function lt(e,t){for(var n=[],i=0;i<t.length;i++)n[i]=at(e,t[i]);return n}ze.prototype.eol=function(){return this.pos>=this.string.length},ze.prototype.sol=function(){return this.pos==this.lineStart},ze.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},ze.prototype.next=function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},ze.prototype.eat=function(e){var t=this.string.charAt(this.pos);if("string"==typeof e?t==e:t&&(e.test?e.test(t):e(t)))return++this.pos,t},ze.prototype.eatWhile=function(e){for(var t=this.pos;this.eat(e););return this.pos>t},ze.prototype.eatSpace=function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},ze.prototype.skipToEnd=function(){this.pos=this.string.length},ze.prototype.skipTo=function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},ze.prototype.backUp=function(e){this.pos-=e},ze.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=H(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)},ze.prototype.indentation=function(){return H(this.string,null,this.tabSize)-(this.lineStart?H(this.string,this.lineStart,this.tabSize):0)},ze.prototype.match=function(e,t,n){if("string"!=typeof e){var i=this.string.slice(this.pos).match(e);return i&&i.index>0?null:(i&&!1!==t&&(this.pos+=i[0].length),i)}var r=function(e){return n?e.toLowerCase():e},o=this.string.substr(this.pos,e.length);if(r(o)==r(e))return!1!==t&&(this.pos+=e.length),!0},ze.prototype.current=function(){return this.string.slice(this.start,this.pos)},ze.prototype.hideFirstChars=function(e,t){this.lineStart+=e;try{return t()}finally{this.lineStart-=e}},ze.prototype.lookAhead=function(e){var t=this.lineOracle;return t&&t.lookAhead(e)},ze.prototype.baseToken=function(){var e=this.lineOracle;return e&&e.baseToken(this.pos)};var st=function(e,t){this.state=e,this.lookAhead=t},ut=function(e,t,n,i){this.state=t,this.doc=e,this.line=n,this.maxLookAhead=i||0,this.baseTokens=null,this.baseTokenPos=1};function ct(e,t,n,i){var r=[e.state.modeGen],o={};bt(e,t.text,e.doc.mode,n,function(e,t){return r.push(e,t)},o,i);for(var a=n.state,l=function(i){n.baseTokens=r;var l=e.state.overlays[i],s=1,u=0;n.state=!0,bt(e,t.text,l.mode,n,function(e,t){for(var n=s;u<e;){var i=r[s];i>e&&r.splice(s,1,e,r[s+1],i),s+=2,u=Math.min(e,i)}if(t)if(l.opaque)r.splice(n,s-n,e,"overlay "+t),s=n+2;else for(;n<s;n+=2){var o=r[n+1];r[n+1]=(o?o+" ":"")+"overlay "+t}},o),n.state=a,n.baseTokens=null,n.baseTokenPos=1},s=0;s<e.state.overlays.length;++s)l(s);return{styles:r,classes:o.bgClass||o.textClass?o:null}}function dt(e,t,n){if(!t.styles||t.styles[0]!=e.state.modeGen){var i=ft(e,Ye(t)),r=t.text.length>e.options.maxHighlightLength&&je(e.doc.mode,i.state),o=ct(e,t,i);r&&(i.state=r),t.stateAfter=i.save(!r),t.styles=o.styles,o.classes?t.styleClasses=o.classes:t.styleClasses&&(t.styleClasses=null),n===e.doc.highlightFrontier&&(e.doc.modeFrontier=Math.max(e.doc.modeFrontier,++e.doc.highlightFrontier))}return t.styles}function ft(e,t,n){var i=e.doc,r=e.display;if(!i.mode.startState)return new ut(i,!0,t);var o=function(e,t,n){for(var i,r,o=e.doc,a=n?-1:t-(e.doc.mode.innerMode?1e3:100),l=t;l>a;--l){if(l<=o.first)return o.first;var s=Ve(o,l-1),u=s.stateAfter;if(u&&(!n||l+(u instanceof st?u.lookAhead:0)<=o.modeFrontier))return l;var c=H(s.text,null,e.options.tabSize);(null==r||i>c)&&(r=l-1,i=c)}return r}(e,t,n),a=o>i.first&&Ve(i,o-1).stateAfter,l=a?ut.fromSaved(i,a,o):new ut(i,$e(i.mode),o);return i.iter(o,t,function(n){ht(e,n.text,l);var i=l.line;n.stateAfter=i==t-1||i%5==0||i>=r.viewFrom&&i<r.viewTo?l.save():null,l.nextLine()}),n&&(i.modeFrontier=l.line),l}function ht(e,t,n,i){var r=e.doc.mode,o=new ze(t,e.options.tabSize,n);for(o.start=o.pos=i||0,""==t&&pt(r,n.state);!o.eol();)gt(r,o,n.state),o.start=o.pos}function pt(e,t){if(e.blankLine)return e.blankLine(t);if(e.innerMode){var n=Ue(e,t);return n.mode.blankLine?n.mode.blankLine(n.state):void 0}}function gt(e,t,n,i){for(var r=0;r<10;r++){i&&(i[0]=Ue(e,n).mode);var o=e.token(t,n);if(t.pos>t.start)return o}throw new Error("Mode "+e.name+" failed to advance stream.")}ut.prototype.lookAhead=function(e){var t=this.doc.getLine(this.line+e);return null!=t&&e>this.maxLookAhead&&(this.maxLookAhead=e),t},ut.prototype.baseToken=function(e){if(!this.baseTokens)return null;for(;this.baseTokens[this.baseTokenPos]<=e;)this.baseTokenPos+=2;var t=this.baseTokens[this.baseTokenPos+1];return{type:t&&t.replace(/( |^)overlay .*/,""),size:this.baseTokens[this.baseTokenPos]-e}},ut.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},ut.fromSaved=function(e,t,n){return t instanceof st?new ut(e,je(e.mode,t.state),n,t.lookAhead):new ut(e,je(e.mode,t),n)},ut.prototype.save=function(e){var t=!1!==e?je(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new st(t,this.maxLookAhead):t};var vt=function(e,t,n){this.start=e.start,this.end=e.pos,this.string=e.current(),this.type=t||null,this.state=n};function mt(e,t,n,i){var r,o=e.doc,a=o.mode;t=at(o,t);var l,s=Ve(o,t.line),u=ft(e,t.line,n),c=new ze(s.text,e.options.tabSize,u);for(i&&(l=[]);(i||c.pos<t.ch)&&!c.eol();)c.start=c.pos,r=gt(a,c,u.state),i&&l.push(new vt(c,r,je(o.mode,u.state)));return i?l:new vt(c,r,u.state)}function yt(e,t){if(e)for(;;){var n=e.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var i=n[1]?"bgClass":"textClass";null==t[i]?t[i]=n[2]:new RegExp("(?:^|s)"+n[2]+"(?:$|s)").test(t[i])||(t[i]+=" "+n[2])}return e}function bt(e,t,n,i,r,o,a){var l=n.flattenSpans;null==l&&(l=e.options.flattenSpans);var s,u=0,c=null,d=new ze(t,e.options.tabSize,i),f=e.options.addModeClass&&[null];for(""==t&&yt(pt(n,i.state),o);!d.eol();){if(d.pos>e.options.maxHighlightLength?(l=!1,a&&ht(e,t,i,d.pos),d.pos=t.length,s=null):s=yt(gt(n,d,i.state,f),o),f){var h=f[0].name;h&&(s="m-"+(s?h+" "+s:h))}if(!l||c!=s){for(;u<d.start;)u=Math.min(d.start,u+5e3),r(u,c);c=s}d.start=d.pos}for(;u<d.pos;){var p=Math.min(d.pos,u+5e3);r(p,c),u=p}}var _t=!1,kt=!1;function wt(e,t,n){this.marker=e,this.from=t,this.to=n}function Ct(e,t){if(e)for(var n=0;n<e.length;++n){var i=e[n];if(i.marker==t)return i}}function St(e,t){for(var n,i=0;i<e.length;++i)e[i]!=t&&(n||(n=[])).push(e[i]);return n}function Tt(e,t){if(t.full)return null;var n=Ze(e,t.from.line)&&Ve(e,t.from.line).markedSpans,i=Ze(e,t.to.line)&&Ve(e,t.to.line).markedSpans;if(!n&&!i)return null;var r=t.from.ch,o=t.to.ch,a=0==et(t.from,t.to),l=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker,l=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);if(l||o.from==t&&"bookmark"==a.type&&(!n||!o.marker.insertLeft)){var s=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);(i||(i=[])).push(new wt(a,o.from,s?null:o.to))}}return i}(n,r,a),s=function(e,t,n){var i;if(e)for(var r=0;r<e.length;++r){var o=e[r],a=o.marker,l=null==o.to||(a.inclusiveRight?o.to>=t:o.to>t);if(l||o.from==t&&"bookmark"==a.type&&(!n||o.marker.insertLeft)){var s=null==o.from||(a.inclusiveLeft?o.from<=t:o.from<t);(i||(i=[])).push(new wt(a,s?null:o.from-t,null==o.to?null:o.to-t))}}return i}(i,o,a),u=1==t.text.length,c=Y(t.text).length+(u?r:0);if(l)for(var d=0;d<l.length;++d){var f=l[d];if(null==f.to){var h=Ct(s,f.marker);h?u&&(f.to=null==h.to?null:h.to+c):f.to=r}}if(s)for(var p=0;p<s.length;++p){var g=s[p];if(null!=g.to&&(g.to+=c),null==g.from){var v=Ct(l,g.marker);v||(g.from=c,u&&(l||(l=[])).push(g))}else g.from+=c,u&&(l||(l=[])).push(g)}l&&(l=Et(l)),s&&s!=l&&(s=Et(s));var m=[l];if(!u){var y,b=t.text.length-2;if(b>0&&l)for(var _=0;_<l.length;++_)null==l[_].to&&(y||(y=[])).push(new wt(l[_].marker,null,null));for(var k=0;k<b;++k)m.push(y);m.push(s)}return m}function Et(e){for(var t=0;t<e.length;++t){var n=e[t];null!=n.from&&n.from==n.to&&!1!==n.marker.clearWhenEmpty&&e.splice(t--,1)}return e.length?e:null}function xt(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}}function Mt(e,t){if(t){for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}}function Lt(e){return e.inclusiveLeft?-1:0}function Ot(e){return e.inclusiveRight?1:0}function Nt(e,t){var n=e.lines.length-t.lines.length;if(0!=n)return n;var i=e.find(),r=t.find(),o=et(i.from,r.from)||Lt(e)-Lt(t);if(o)return-o;var a=et(i.to,r.to)||Ot(e)-Ot(t);return a||t.id-e.id}function At(e,t){var n,i=kt&&e.markedSpans;if(i)for(var r=void 0,o=0;o<i.length;++o)(r=i[o]).marker.collapsed&&null==(t?r.from:r.to)&&(!n||Nt(n,r.marker)<0)&&(n=r.marker);return n}function Pt(e){return At(e,!0)}function It(e){return At(e,!1)}function Bt(e,t){var n,i=kt&&e.markedSpans;if(i)for(var r=0;r<i.length;++r){var o=i[r];o.marker.collapsed&&(null==o.from||o.from<t)&&(null==o.to||o.to>t)&&(!n||Nt(n,o.marker)<0)&&(n=o.marker)}return n}function Rt(e,t,n,i,r){var o=Ve(e,t),a=kt&&o.markedSpans;if(a)for(var l=0;l<a.length;++l){var s=a[l];if(s.marker.collapsed){var u=s.marker.find(0),c=et(u.from,n)||Lt(s.marker)-Lt(r),d=et(u.to,i)||Ot(s.marker)-Ot(r);if(!(c>=0&&d<=0||c<=0&&d>=0)&&(c<=0&&(s.marker.inclusiveRight&&r.inclusiveLeft?et(u.to,n)>=0:et(u.to,n)>0)||c>=0&&(s.marker.inclusiveRight&&r.inclusiveLeft?et(u.from,i)<=0:et(u.from,i)<0)))return!0}}}function Dt(e){for(var t;t=Pt(e);)e=t.find(-1,!0).line;return e}function Ht(e,t){var n=Ve(e,t),i=Dt(n);return n==i?t:Ye(i)}function Ft(e,t){if(t>e.lastLine())return t;var n,i=Ve(e,t);if(!Wt(e,i))return t;for(;n=It(i);)i=n.find(1,!0).line;return Ye(i)+1}function Wt(e,t){var n=kt&&t.markedSpans;if(n)for(var i=void 0,r=0;r<n.length;++r)if((i=n[r]).marker.collapsed){if(null==i.from)return!0;if(!i.marker.widgetNode&&0==i.from&&i.marker.inclusiveLeft&&jt(e,t,i))return!0}}function jt(e,t,n){if(null==n.to){var i=n.marker.find(1,!0);return jt(e,i.line,Ct(i.line.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var r=void 0,o=0;o<t.markedSpans.length;++o)if((r=t.markedSpans[o]).marker.collapsed&&!r.marker.widgetNode&&r.from==n.to&&(null==r.to||r.to!=n.from)&&(r.marker.inclusiveLeft||n.marker.inclusiveRight)&&jt(e,t,r))return!0}function Ut(e){e=Dt(e);for(var t=0,n=e.parent,i=0;i<n.lines.length;++i){var r=n.lines[i];if(r==e)break;t+=r.height}for(var o=n.parent;o;o=(n=o).parent)for(var a=0;a<o.children.length;++a){var l=o.children[a];if(l==n)break;t+=l.height}return t}function $t(e){if(0==e.height)return 0;for(var t,n=e.text.length,i=e;t=Pt(i);){var r=t.find(0,!0);i=r.from.line,n+=r.from.ch-r.to.ch}for(i=e;t=It(i);){var o=t.find(0,!0);n-=i.text.length-o.from.ch,i=o.to.line,n+=i.text.length-o.to.ch}return n}function zt(e){var t=e.display,n=e.doc;t.maxLine=Ve(n,n.first),t.maxLineLength=$t(t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var n=$t(e);n>t.maxLineLength&&(t.maxLineLength=n,t.maxLine=e)})}var Vt=function(e,t,n){this.text=e,Mt(this,t),this.height=n?n(this):1};function Kt(e){e.parent=null,xt(e)}Vt.prototype.lineNo=function(){return Ye(this)},be(Vt);var qt={},Gt={};function Yt(e,t){if(!e||/^\s*$/.test(e))return null;var n=t.addModeClass?Gt:qt;return n[e]||(n[e]=e.replace(/\S+/g,"cm-$&"))}function Xt(e,t){var n=O("span",null,null,s?"padding-right: .1px":null),i={pre:O("pre",[n],"CodeMirror-line"),content:n,col:0,pos:0,cm:e,trailingSpace:!1,splitSpaces:e.getOption("lineWrapping")};t.measure={};for(var r=0;r<=(t.rest?t.rest.length:0);r++){var o=r?t.rest[r-1]:t.line,a=void 0;i.pos=0,i.addToken=Qt,Oe(e.display.measure)&&(a=ce(o,e.doc.direction))&&(i.addToken=Jt(i.addToken,a)),i.map=[];var l=t!=e.display.externalMeasured&&Ye(o);tn(o,i,dt(e,o,l)),o.styleClasses&&(o.styleClasses.bgClass&&(i.bgClass=I(o.styleClasses.bgClass,i.bgClass||"")),o.styleClasses.textClass&&(i.textClass=I(o.styleClasses.textClass,i.textClass||""))),0==i.map.length&&i.map.push(0,0,i.content.appendChild(Le(e.display.measure))),0==r?(t.measure.map=i.map,t.measure.cache={}):((t.measure.maps||(t.measure.maps=[])).push(i.map),(t.measure.caches||(t.measure.caches=[])).push({}))}if(s){var u=i.content.lastChild;(/\bcm-tab\b/.test(u.className)||u.querySelector&&u.querySelector(".cm-tab"))&&(i.content.className="cm-tab-wrap-hack")}return ge(e,"renderLine",e,t.line,i.pre),i.pre.className&&(i.textClass=I(i.pre.className,i.textClass||"")),i}function Zt(e){var t=L("span","\u2022","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t.setAttribute("aria-label",t.title),t}function Qt(e,t,n,i,r,o,s){if(t){var u,c=e.splitSpaces?function(e,t){if(e.length>1&&!/  /.test(e))return e;for(var n=t,i="",r=0;r<e.length;r++){var o=e.charAt(r);" "!=o||!n||r!=e.length-1&&32!=e.charCodeAt(r+1)||(o="\xa0"),i+=o,n=" "==o}return i}(t,e.trailingSpace):t,d=e.cm.state.specialChars,f=!1;if(d.test(t)){u=document.createDocumentFragment();for(var h=0;;){d.lastIndex=h;var p=d.exec(t),g=p?p.index-h:t.length-h;if(g){var v=document.createTextNode(c.slice(h,h+g));a&&l<9?u.appendChild(L("span",[v])):u.appendChild(v),e.map.push(e.pos,e.pos+g,v),e.col+=g,e.pos+=g}if(!p)break;h+=g+1;var m=void 0;if("\t"==p[0]){var y=e.cm.options.tabSize,b=y-e.col%y;(m=u.appendChild(L("span",G(b),"cm-tab"))).setAttribute("role","presentation"),m.setAttribute("cm-text","\t"),e.col+=b}else"\r"==p[0]||"\n"==p[0]?((m=u.appendChild(L("span","\r"==p[0]?"\u240d":"\u2424","cm-invalidchar"))).setAttribute("cm-text",p[0]),e.col+=1):((m=e.cm.options.specialCharPlaceholder(p[0])).setAttribute("cm-text",p[0]),a&&l<9?u.appendChild(L("span",[m])):u.appendChild(m),e.col+=1);e.map.push(e.pos,e.pos+1,m),e.pos++}}else e.col+=t.length,u=document.createTextNode(c),e.map.push(e.pos,e.pos+t.length,u),a&&l<9&&(f=!0),e.pos+=t.length;if(e.trailingSpace=32==c.charCodeAt(t.length-1),n||i||r||f||o){var _=n||"";i&&(_+=i),r&&(_+=r);var k=L("span",[u],_,o);if(s)for(var w in s)s.hasOwnProperty(w)&&"style"!=w&&"class"!=w&&k.setAttribute(w,s[w]);return e.content.appendChild(k)}e.content.appendChild(u)}}function Jt(e,t){return function(n,i,r,o,a,l,s){r=r?r+" cm-force-border":"cm-force-border";for(var u=n.pos,c=u+i.length;;){for(var d=void 0,f=0;f<t.length&&!((d=t[f]).to>u&&d.from<=u);f++);if(d.to>=c)return e(n,i,r,o,a,l,s);e(n,i.slice(0,d.to-u),r,o,null,l,s),o=null,i=i.slice(d.to-u),u=d.to}}}function en(e,t,n,i){var r=!i&&n.widgetNode;r&&e.map.push(e.pos,e.pos+t,r),!i&&e.cm.display.input.needsContentAttribute&&(r||(r=e.content.appendChild(document.createElement("span"))),r.setAttribute("cm-marker",n.id)),r&&(e.cm.display.input.setUneditable(r),e.content.appendChild(r)),e.pos+=t,e.trailingSpace=!1}function tn(e,t,n){var i=e.markedSpans,r=e.text,o=0;if(i)for(var a,l,s,u,c,d,f,h=r.length,p=0,g=1,v="",m=0;;){if(m==p){s=u=c=l="",f=null,d=null,m=1/0;for(var y=[],b=void 0,_=0;_<i.length;++_){var k=i[_],w=k.marker;if("bookmark"==w.type&&k.from==p&&w.widgetNode)y.push(w);else if(k.from<=p&&(null==k.to||k.to>p||w.collapsed&&k.to==p&&k.from==p)){if(null!=k.to&&k.to!=p&&m>k.to&&(m=k.to,u=""),w.className&&(s+=" "+w.className),w.css&&(l=(l?l+";":"")+w.css),w.startStyle&&k.from==p&&(c+=" "+w.startStyle),w.endStyle&&k.to==m&&(b||(b=[])).push(w.endStyle,k.to),w.title&&((f||(f={})).title=w.title),w.attributes)for(var C in w.attributes)(f||(f={}))[C]=w.attributes[C];w.collapsed&&(!d||Nt(d.marker,w)<0)&&(d=k)}else k.from>p&&m>k.from&&(m=k.from)}if(b)for(var S=0;S<b.length;S+=2)b[S+1]==m&&(u+=" "+b[S]);if(!d||d.from==p)for(var T=0;T<y.length;++T)en(t,0,y[T]);if(d&&(d.from||0)==p){if(en(t,(null==d.to?h+1:d.to)-p,d.marker,null==d.from),null==d.to)return;d.to==p&&(d=!1)}}if(p>=h)break;for(var E=Math.min(h,m);;){if(v){var x=p+v.length;if(!d){var M=x>E?v.slice(0,E-p):v;t.addToken(t,M,a?a+s:s,c,p+M.length==m?u:"",l,f)}if(x>=E){v=v.slice(E-p),p=E;break}p=x,c=""}v=r.slice(o,o=n[g++]),a=Yt(n[g++],t.cm.options)}}else for(var L=1;L<n.length;L+=2)t.addToken(t,r.slice(o,o=n[L]),Yt(n[L+1],t.cm.options))}function nn(e,t,n){this.line=t,this.rest=function(e){for(var t,n;t=It(e);)e=t.find(1,!0).line,(n||(n=[])).push(e);return n}(t),this.size=this.rest?Ye(Y(this.rest))-n+1:1,this.node=this.text=null,this.hidden=Wt(e,t)}function rn(e,t,n){for(var i,r=[],o=t;o<n;o=i){var a=new nn(e.doc,Ve(e.doc,o),o);i=o+a.size,r.push(a)}return r}var on=null,an=null;function ln(e,t){var n=he(e,t);if(n.length){var i,r=Array.prototype.slice.call(arguments,2);on?i=on.delayedCallbacks:an?i=an:(i=an=[],setTimeout(sn,0));for(var o=function(e){i.push(function(){return n[e].apply(null,r)})},a=0;a<n.length;++a)o(a)}}function sn(){var e=an;an=null;for(var t=0;t<e.length;++t)e[t]()}function un(e,t,n,i){for(var r=0;r<t.changes.length;r++){var o=t.changes[r];"text"==o?fn(e,t):"gutter"==o?pn(e,t,n,i):"class"==o?hn(e,t):"widget"==o&&gn(e,t,i)}t.changes=null}function cn(e){return e.node==e.text&&(e.node=L("div",null,null,"position: relative"),e.text.parentNode&&e.text.parentNode.replaceChild(e.node,e.text),e.node.appendChild(e.text),a&&l<8&&(e.node.style.zIndex=2)),e.node}function dn(e,t){var n=e.display.externalMeasured;return n&&n.line==t.line?(e.display.externalMeasured=null,t.measure=n.measure,n.built):Xt(e,t)}function fn(e,t){var n=t.text.className,i=dn(e,t);t.text==t.node&&(t.node=i.pre),t.text.parentNode.replaceChild(i.pre,t.text),t.text=i.pre,i.bgClass!=t.bgClass||i.textClass!=t.textClass?(t.bgClass=i.bgClass,t.textClass=i.textClass,hn(e,t)):n&&(t.text.className=n)}function hn(e,t){!function(e,t){var n=t.bgClass?t.bgClass+" "+(t.line.bgClass||""):t.line.bgClass;if(n&&(n+=" CodeMirror-linebackground"),t.background)n?t.background.className=n:(t.background.parentNode.removeChild(t.background),t.background=null);else if(n){var i=cn(t);t.background=i.insertBefore(L("div",null,n),i.firstChild),e.display.input.setUneditable(t.background)}}(e,t),t.line.wrapClass?cn(t).className=t.line.wrapClass:t.node!=t.text&&(t.node.className="");var n=t.textClass?t.textClass+" "+(t.line.textClass||""):t.line.textClass;t.text.className=n||""}function pn(e,t,n,i){if(t.gutter&&(t.node.removeChild(t.gutter),t.gutter=null),t.gutterBackground&&(t.node.removeChild(t.gutterBackground),t.gutterBackground=null),t.line.gutterClass){var r=cn(t);t.gutterBackground=L("div",null,"CodeMirror-gutter-background "+t.line.gutterClass,"left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px; width: "+i.gutterTotalWidth+"px"),e.display.input.setUneditable(t.gutterBackground),r.insertBefore(t.gutterBackground,t.text)}var o=t.line.gutterMarkers;if(e.options.lineNumbers||o){var a=cn(t),l=t.gutter=L("div",null,"CodeMirror-gutter-wrapper","left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px");if(e.display.input.setUneditable(l),a.insertBefore(l,t.text),t.line.gutterClass&&(l.className+=" "+t.line.gutterClass),!e.options.lineNumbers||o&&o["CodeMirror-linenumbers"]||(t.lineNumber=l.appendChild(L("div",Qe(e.options,n),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+e.display.lineNumInnerWidth+"px"))),o)for(var s=0;s<e.display.gutterSpecs.length;++s){var u=e.display.gutterSpecs[s].className,c=o.hasOwnProperty(u)&&o[u];c&&l.appendChild(L("div",[c],"CodeMirror-gutter-elt","left: "+i.gutterLeft[u]+"px; width: "+i.gutterWidth[u]+"px"))}}}function gn(e,t,n){t.alignable&&(t.alignable=null);for(var i=t.node.firstChild,r=void 0;i;i=r)r=i.nextSibling,"CodeMirror-linewidget"==i.className&&t.node.removeChild(i);mn(e,t,n)}function vn(e,t,n,i){var r=dn(e,t);return t.text=t.node=r.pre,r.bgClass&&(t.bgClass=r.bgClass),r.textClass&&(t.textClass=r.textClass),hn(e,t),pn(e,t,n,i),mn(e,t,i),t.node}function mn(e,t,n){if(yn(e,t.line,t,n,!0),t.rest)for(var i=0;i<t.rest.length;i++)yn(e,t.rest[i],t,n,!1)}function yn(e,t,n,i,r){if(t.widgets)for(var o=cn(n),a=0,l=t.widgets;a<l.length;++a){var s=l[a],u=L("div",[s.node],"CodeMirror-linewidget");s.handleMouseEvents||u.setAttribute("cm-ignore-events","true"),bn(s,u,n,i),e.display.input.setUneditable(u),r&&s.above?o.insertBefore(u,n.gutter||n.text):o.appendChild(u),ln(s,"redraw")}}function bn(e,t,n,i){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var r=i.wrapperWidth;t.style.left=i.fixedPos+"px",e.coverGutter||(r-=i.gutterTotalWidth,t.style.paddingLeft=i.gutterTotalWidth+"px"),t.style.width=r+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-i.gutterTotalWidth+"px"))}function _n(e){if(null!=e.height)return e.height;var t=e.doc.cm;if(!t)return 0;if(!N(document.body,e.node)){var n="position: relative;";e.coverGutter&&(n+="margin-left: -"+t.display.gutters.offsetWidth+"px;"),e.noHScroll&&(n+="width: "+t.display.wrapper.clientWidth+"px;"),M(t.display.measure,L("div",[e.node],null,n))}return e.height=e.node.parentNode.offsetHeight}function kn(e,t){for(var n=Se(t);n!=e.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==e.sizer&&n!=e.mover)return!0}function wn(e){return e.lineSpace.offsetTop}function Cn(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function Sn(e){if(e.cachedPaddingH)return e.cachedPaddingH;var t=M(e.measure,L("pre","x")),n=window.getComputedStyle?window.getComputedStyle(t):t.currentStyle,i={left:parseInt(n.paddingLeft),right:parseInt(n.paddingRight)};return isNaN(i.left)||isNaN(i.right)||(e.cachedPaddingH=i),i}function Tn(e){return j-e.display.nativeBarWidth}function En(e){return e.display.scroller.clientWidth-Tn(e)-e.display.barWidth}function xn(e){return e.display.scroller.clientHeight-Tn(e)-e.display.barHeight}function Mn(e,t,n){if(e.line==t)return{map:e.measure.map,cache:e.measure.cache};for(var i=0;i<e.rest.length;i++)if(e.rest[i]==t)return{map:e.measure.maps[i],cache:e.measure.caches[i]};for(var r=0;r<e.rest.length;r++)if(Ye(e.rest[r])>n)return{map:e.measure.maps[r],cache:e.measure.caches[r],before:!0}}function Ln(e,t,n,i){return An(e,Nn(e,t),n,i)}function On(e,t){if(t>=e.display.viewFrom&&t<e.display.viewTo)return e.display.view[li(e,t)];var n=e.display.externalMeasured;return n&&t>=n.lineN&&t<n.lineN+n.size?n:void 0}function Nn(e,t){var n=Ye(t),i=On(e,n);i&&!i.text?i=null:i&&i.changes&&(un(e,i,n,ni(e)),e.curOp.forceUpdate=!0),i||(i=function(e,t){var n=Ye(t=Dt(t)),i=e.display.externalMeasured=new nn(e.doc,t,n);i.lineN=n;var r=i.built=Xt(e,i);return i.text=r.pre,M(e.display.lineMeasure,r.pre),i}(e,t));var r=Mn(i,t,n);return{line:t,view:i,rect:null,map:r.map,cache:r.cache,before:r.before,hasHeights:!1}}function An(e,t,n,i,r){t.before&&(n=-1);var o,s=n+(i||"");return t.cache.hasOwnProperty(s)?o=t.cache[s]:(t.rect||(t.rect=t.view.text.getBoundingClientRect()),t.hasHeights||(function(e,t,n){var i=e.options.lineWrapping,r=i&&En(e);if(!t.measure.heights||i&&t.measure.width!=r){var o=t.measure.heights=[];if(i){t.measure.width=r;for(var a=t.text.firstChild.getClientRects(),l=0;l<a.length-1;l++){var s=a[l],u=a[l+1];Math.abs(s.bottom-u.bottom)>2&&o.push((s.bottom+u.top)/2-n.top)}}o.push(n.bottom-n.top)}}(e,t.view,t.rect),t.hasHeights=!0),(o=function(e,t,n,i){var r,o=Bn(t.map,n,i),s=o.node,u=o.start,c=o.end,d=o.collapse;if(3==s.nodeType){for(var f=0;f<4;f++){for(;u&&re(t.line.text.charAt(o.coverStart+u));)--u;for(;o.coverStart+c<o.coverEnd&&re(t.line.text.charAt(o.coverStart+c));)++c;if((r=a&&l<9&&0==u&&c==o.coverEnd-o.coverStart?s.parentNode.getBoundingClientRect():Rn(T(s,u,c).getClientRects(),i)).left||r.right||0==u)break;c=u,u-=1,d="right"}a&&l<11&&(r=function(e,t){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(e){if(null!=Ie)return Ie;var t=M(e,L("span","x")),n=t.getBoundingClientRect(),i=T(t,0,1).getBoundingClientRect();return Ie=Math.abs(n.left-i.left)>1}(e))return t;var n=screen.logicalXDPI/screen.deviceXDPI,i=screen.logicalYDPI/screen.deviceYDPI;return{left:t.left*n,right:t.right*n,top:t.top*i,bottom:t.bottom*i}}(e.display.measure,r))}else{var h;u>0&&(d=i="right"),r=e.options.lineWrapping&&(h=s.getClientRects()).length>1?h["right"==i?h.length-1:0]:s.getBoundingClientRect()}if(a&&l<9&&!u&&(!r||!r.left&&!r.right)){var p=s.parentNode.getClientRects()[0];r=p?{left:p.left,right:p.left+ti(e.display),top:p.top,bottom:p.bottom}:In}for(var g=r.top-t.rect.top,v=r.bottom-t.rect.top,m=(g+v)/2,y=t.view.measure.heights,b=0;b<y.length-1&&!(m<y[b]);b++);var _=b?y[b-1]:0,k=y[b],w={left:("right"==d?r.right:r.left)-t.rect.left,right:("left"==d?r.left:r.right)-t.rect.left,top:_,bottom:k};return r.left||r.right||(w.bogus=!0),e.options.singleCursorHeightPerLine||(w.rtop=g,w.rbottom=v),w}(e,t,n,i)).bogus||(t.cache[s]=o)),{left:o.left,right:o.right,top:r?o.rtop:o.top,bottom:r?o.rbottom:o.bottom}}var Pn,In={left:0,right:0,top:0,bottom:0};function Bn(e,t,n){for(var i,r,o,a,l,s,u=0;u<e.length;u+=3)if(l=e[u],s=e[u+1],t<l?(r=0,o=1,a="left"):t<s?o=1+(r=t-l):(u==e.length-3||t==s&&e[u+3]>t)&&(r=(o=s-l)-1,t>=s&&(a="right")),null!=r){if(i=e[u+2],l==s&&n==(i.insertLeft?"left":"right")&&(a=n),"left"==n&&0==r)for(;u&&e[u-2]==e[u-3]&&e[u-1].insertLeft;)i=e[2+(u-=3)],a="left";if("right"==n&&r==s-l)for(;u<e.length-3&&e[u+3]==e[u+4]&&!e[u+5].insertLeft;)i=e[(u+=3)+2],a="right";break}return{node:i,start:r,end:o,collapse:a,coverStart:l,coverEnd:s}}function Rn(e,t){var n=In;if("left"==t)for(var i=0;i<e.length&&(n=e[i]).left==n.right;i++);else for(var r=e.length-1;r>=0&&(n=e[r]).left==n.right;r--);return n}function Dn(e){if(e.measure&&(e.measure.cache={},e.measure.heights=null,e.rest))for(var t=0;t<e.rest.length;t++)e.measure.caches[t]={}}function Hn(e){e.display.externalMeasure=null,x(e.display.lineMeasure);for(var t=0;t<e.display.view.length;t++)Dn(e.display.view[t])}function Fn(e){Hn(e),e.display.cachedCharWidth=e.display.cachedTextHeight=e.display.cachedPaddingH=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function Wn(){return c&&v?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function jn(){return c&&v?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function Un(e){var t=0;if(e.widgets)for(var n=0;n<e.widgets.length;++n)e.widgets[n].above&&(t+=_n(e.widgets[n]));return t}function $n(e,t,n,i,r){if(!r){var o=Un(t);n.top+=o,n.bottom+=o}if("line"==i)return n;i||(i="local");var a=Ut(t);if("local"==i?a+=wn(e.display):a-=e.display.viewOffset,"page"==i||"window"==i){var l=e.display.lineSpace.getBoundingClientRect();a+=l.top+("window"==i?0:jn());var s=l.left+("window"==i?0:Wn());n.left+=s,n.right+=s}return n.top+=a,n.bottom+=a,n}function zn(e,t,n){if("div"==n)return t;var i=t.left,r=t.top;if("page"==n)i-=Wn(),r-=jn();else if("local"==n||!n){var o=e.display.sizer.getBoundingClientRect();i+=o.left,r+=o.top}var a=e.display.lineSpace.getBoundingClientRect();return{left:i-a.left,top:r-a.top}}function Vn(e,t,n,i,r){return i||(i=Ve(e.doc,t.line)),$n(e,i,Ln(e,i,t.ch,r),n)}function Kn(e,t,n,i,r,o){function a(t,a){var l=An(e,r,t,a?"right":"left",o);return a?l.left=l.right:l.right=l.left,$n(e,i,l,n)}i=i||Ve(e.doc,t.line),r||(r=Nn(e,i));var l=ce(i,e.doc.direction),s=t.ch,u=t.sticky;if(s>=i.text.length?(s=i.text.length,u="before"):s<=0&&(s=0,u="after"),!l)return a("before"==u?s-1:s,"before"==u);function c(e,t,n){var i=l[t],r=1==i.level;return a(n?e-1:e,r!=n)}var d=se(l,s,u),f=le,h=c(s,d,"before"==u);return null!=f&&(h.other=c(s,f,"before"!=u)),h}function qn(e,t){var n=0;t=at(e.doc,t),e.options.lineWrapping||(n=ti(e.display)*t.ch);var i=Ve(e.doc,t.line),r=Ut(i)+wn(e.display);return{left:n,right:n,top:r,bottom:r+i.height}}function Gn(e,t,n,i,r){var o=Je(e,t,n);return o.xRel=r,i&&(o.outside=!0),o}function Yn(e,t,n){var i=e.doc;if((n+=e.display.viewOffset)<0)return Gn(i.first,0,null,!0,-1);var r=Xe(i,n),o=i.first+i.size-1;if(r>o)return Gn(i.first+i.size-1,Ve(i,o).text.length,null,!0,1);t<0&&(t=0);for(var a=Ve(i,r);;){var l=Jn(e,a,r,t,n),s=Bt(a,l.ch+(l.xRel>0?1:0));if(!s)return l;var u=s.find(1);if(u.line==r)return u;a=Ve(i,r=u.line)}}function Xn(e,t,n,i){i-=Un(t);var r=t.text.length,o=ae(function(t){return An(e,n,t-1).bottom<=i},r,0);return r=ae(function(t){return An(e,n,t).top>i},o,r),{begin:o,end:r}}function Zn(e,t,n,i){n||(n=Nn(e,t));var r=$n(e,t,An(e,n,i),"line").top;return Xn(e,t,n,r)}function Qn(e,t,n,i){return!(e.bottom<=n)&&(e.top>n||(i?e.left:e.right)>t)}function Jn(e,t,n,i,r){r-=Ut(t);var o=Nn(e,t),a=Un(t),l=0,s=t.text.length,u=!0,c=ce(t,e.doc.direction);if(c){var d=(e.options.lineWrapping?function(e,t,n,i,r,o,a){var l=Xn(e,t,i,a),s=l.begin,u=l.end;/\s/.test(t.text.charAt(u-1))&&u--;for(var c=null,d=null,f=0;f<r.length;f++){var h=r[f];if(!(h.from>=u||h.to<=s)){var p=1!=h.level,g=An(e,i,p?Math.min(u,h.to)-1:Math.max(s,h.from)).right,v=g<o?o-g+1e9:g-o;(!c||d>v)&&(c=h,d=v)}}return c||(c=r[r.length-1]),c.from<s&&(c={from:s,to:c.to,level:c.level}),c.to>u&&(c={from:c.from,to:u,level:c.level}),c}:function(e,t,n,i,r,o,a){var l=ae(function(l){var s=r[l],u=1!=s.level;return Qn(Kn(e,Je(n,u?s.to:s.from,u?"before":"after"),"line",t,i),o,a,!0)},0,r.length-1),s=r[l];if(l>0){var u=1!=s.level,c=Kn(e,Je(n,u?s.from:s.to,u?"after":"before"),"line",t,i);Qn(c,o,a,!0)&&c.top>a&&(s=r[l-1])}return s})(e,t,n,o,c,i,r);u=1!=d.level,l=u?d.from:d.to-1,s=u?d.to:d.from-1}var f,h,p=null,g=null,v=ae(function(t){var n=An(e,o,t);return n.top+=a,n.bottom+=a,!!Qn(n,i,r,!1)&&(n.top<=r&&n.left<=i&&(p=t,g=n),!0)},l,s),m=!1;if(g){var y=i-g.left<g.right-i,b=y==u;v=p+(b?0:1),h=b?"after":"before",f=y?g.left:g.right}else{u||v!=s&&v!=l||v++,h=0==v?"after":v==t.text.length?"before":An(e,o,v-(u?1:0)).bottom+a<=r==u?"after":"before";var _=Kn(e,Je(n,v,h),"line",t,o);f=_.left,m=r<_.top||r>=_.bottom}return v=oe(t.text,v,1),Gn(n,v,h,m,i-f)}function ei(e){if(null!=e.cachedTextHeight)return e.cachedTextHeight;if(null==Pn){Pn=L("pre");for(var t=0;t<49;++t)Pn.appendChild(document.createTextNode("x")),Pn.appendChild(L("br"));Pn.appendChild(document.createTextNode("x"))}M(e.measure,Pn);var n=Pn.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),x(e.measure),n||1}function ti(e){if(null!=e.cachedCharWidth)return e.cachedCharWidth;var t=L("span","xxxxxxxxxx"),n=L("pre",[t]);M(e.measure,n);var i=t.getBoundingClientRect(),r=(i.right-i.left)/10;return r>2&&(e.cachedCharWidth=r),r||10}function ni(e){for(var t=e.display,n={},i={},r=t.gutters.clientLeft,o=t.gutters.firstChild,a=0;o;o=o.nextSibling,++a){var l=e.display.gutterSpecs[a].className;n[l]=o.offsetLeft+o.clientLeft+r,i[l]=o.clientWidth}return{fixedPos:ii(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:i,wrapperWidth:t.wrapper.clientWidth}}function ii(e){return e.scroller.getBoundingClientRect().left-e.sizer.getBoundingClientRect().left}function ri(e){var t=ei(e.display),n=e.options.lineWrapping,i=n&&Math.max(5,e.display.scroller.clientWidth/ti(e.display)-3);return function(r){if(Wt(e.doc,r))return 0;var o=0;if(r.widgets)for(var a=0;a<r.widgets.length;a++)r.widgets[a].height&&(o+=r.widgets[a].height);return n?o+(Math.ceil(r.text.length/i)||1)*t:o+t}}function oi(e){var t=e.doc,n=ri(e);t.iter(function(e){var t=n(e);t!=e.height&&Ge(e,t)})}function ai(e,t,n,i){var r=e.display;if(!n&&"true"==Se(t).getAttribute("cm-not-content"))return null;var o,a,l=r.lineSpace.getBoundingClientRect();try{o=t.clientX-l.left,a=t.clientY-l.top}catch(t){return null}var s,u=Yn(e,o,a);if(i&&1==u.xRel&&(s=Ve(e.doc,u.line).text).length==u.ch){var c=H(s,s.length,e.options.tabSize)-s.length;u=Je(u.line,Math.max(0,Math.round((o-Sn(e.display).left)/ti(e.display))-c))}return u}function li(e,t){if(t>=e.display.viewTo)return null;if((t-=e.display.viewFrom)<0)return null;for(var n=e.display.view,i=0;i<n.length;i++)if((t-=n[i].size)<0)return i}function si(e,t,n,i){null==t&&(t=e.doc.first),null==n&&(n=e.doc.first+e.doc.size),i||(i=0);var r=e.display;if(i&&n<r.viewTo&&(null==r.updateLineNumbers||r.updateLineNumbers>t)&&(r.updateLineNumbers=t),e.curOp.viewChanged=!0,t>=r.viewTo)kt&&Ht(e.doc,t)<r.viewTo&&ci(e);else if(n<=r.viewFrom)kt&&Ft(e.doc,n+i)>r.viewFrom?ci(e):(r.viewFrom+=i,r.viewTo+=i);else if(t<=r.viewFrom&&n>=r.viewTo)ci(e);else if(t<=r.viewFrom){var o=di(e,n,n+i,1);o?(r.view=r.view.slice(o.index),r.viewFrom=o.lineN,r.viewTo+=i):ci(e)}else if(n>=r.viewTo){var a=di(e,t,t,-1);a?(r.view=r.view.slice(0,a.index),r.viewTo=a.lineN):ci(e)}else{var l=di(e,t,t,-1),s=di(e,n,n+i,1);l&&s?(r.view=r.view.slice(0,l.index).concat(rn(e,l.lineN,s.lineN)).concat(r.view.slice(s.index)),r.viewTo+=i):ci(e)}var u=r.externalMeasured;u&&(n<u.lineN?u.lineN+=i:t<u.lineN+u.size&&(r.externalMeasured=null))}function ui(e,t,n){e.curOp.viewChanged=!0;var i=e.display,r=e.display.externalMeasured;if(r&&t>=r.lineN&&t<r.lineN+r.size&&(i.externalMeasured=null),!(t<i.viewFrom||t>=i.viewTo)){var o=i.view[li(e,t)];if(null!=o.node){var a=o.changes||(o.changes=[]);-1==W(a,n)&&a.push(n)}}}function ci(e){e.display.viewFrom=e.display.viewTo=e.doc.first,e.display.view=[],e.display.viewOffset=0}function di(e,t,n,i){var r,o=li(e,t),a=e.display.view;if(!kt||n==e.doc.first+e.doc.size)return{index:o,lineN:n};for(var l=e.display.viewFrom,s=0;s<o;s++)l+=a[s].size;if(l!=t){if(i>0){if(o==a.length-1)return null;r=l+a[o].size-t,o++}else r=l-t;t+=r,n+=r}for(;Ht(e.doc,n)!=n;){if(o==(i<0?0:a.length-1))return null;n+=i*a[o-(i<0?1:0)].size,o+=i}return{index:o,lineN:n}}function fi(e){for(var t=e.display.view,n=0,i=0;i<t.length;i++){var r=t[i];r.hidden||r.node&&!r.changes||++n}return n}function hi(e){e.display.input.showSelection(e.display.input.prepareSelection())}function pi(e,t){void 0===t&&(t=!0);for(var n=e.doc,i={},r=i.cursors=document.createDocumentFragment(),o=i.selection=document.createDocumentFragment(),a=0;a<n.sel.ranges.length;a++)if(t||a!=n.sel.primIndex){var l=n.sel.ranges[a];if(!(l.from().line>=e.display.viewTo||l.to().line<e.display.viewFrom)){var s=l.empty();(s||e.options.showCursorWhenSelecting)&&gi(e,l.head,r),s||mi(e,l,o)}}return i}function gi(e,t,n){var i=Kn(e,t,"div",null,null,!e.options.singleCursorHeightPerLine),r=n.appendChild(L("div","\xa0","CodeMirror-cursor"));if(r.style.left=i.left+"px",r.style.top=i.top+"px",r.style.height=Math.max(0,i.bottom-i.top)*e.options.cursorHeight+"px",i.other){var o=n.appendChild(L("div","\xa0","CodeMirror-cursor CodeMirror-secondarycursor"));o.style.display="",o.style.left=i.other.left+"px",o.style.top=i.other.top+"px",o.style.height=.85*(i.other.bottom-i.other.top)+"px"}}function vi(e,t){return e.top-t.top||e.left-t.left}function mi(e,t,n){var i=e.display,r=e.doc,o=document.createDocumentFragment(),a=Sn(e.display),l=a.left,s=Math.max(i.sizerWidth,En(e)-i.sizer.offsetLeft)-a.right,u="ltr"==r.direction;function c(e,t,n,i){t<0&&(t=0),t=Math.round(t),i=Math.round(i),o.appendChild(L("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px;\n                             top: "+t+"px; width: "+(null==n?s-e:n)+"px;\n                             height: "+(i-t)+"px"))}function d(t,n,i){var o,a,d=Ve(r,t),f=d.text.length;function h(n,i){return Vn(e,Je(t,n),"div",d,i)}function p(t,n,i){var r=Zn(e,d,null,t),o="ltr"==n==("after"==i)?"left":"right",a="after"==i?r.begin:r.end-(/\s/.test(d.text.charAt(r.end-1))?2:1);return h(a,o)[o]}var g=ce(d,r.direction);return function(e,t,n,i){if(!e)return i(t,n,"ltr",0);for(var r=!1,o=0;o<e.length;++o){var a=e[o];(a.from<n&&a.to>t||t==n&&a.to==t)&&(i(Math.max(a.from,t),Math.min(a.to,n),1==a.level?"rtl":"ltr",o),r=!0)}r||i(t,n,"ltr")}(g,n||0,null==i?f:i,function(e,t,r,d){var v="ltr"==r,m=h(e,v?"left":"right"),y=h(t-1,v?"right":"left"),b=null==n&&0==e,_=null==i&&t==f,k=0==d,w=!g||d==g.length-1;if(y.top-m.top<=3){var C=(u?b:_)&&k,S=(u?_:b)&&w,T=C?l:(v?m:y).left,E=S?s:(v?y:m).right;c(T,m.top,E-T,m.bottom)}else{var x,M,L,O;v?(x=u&&b&&k?l:m.left,M=u?s:p(e,r,"before"),L=u?l:p(t,r,"after"),O=u&&_&&w?s:y.right):(x=u?p(e,r,"before"):l,M=!u&&b&&k?s:m.right,L=!u&&_&&w?l:y.left,O=u?p(t,r,"after"):s),c(x,m.top,M-x,m.bottom),m.bottom<y.top&&c(l,m.bottom,null,y.top),c(L,y.top,O-L,y.bottom)}(!o||vi(m,o)<0)&&(o=m),vi(y,o)<0&&(o=y),(!a||vi(m,a)<0)&&(a=m),vi(y,a)<0&&(a=y)}),{start:o,end:a}}var f=t.from(),h=t.to();if(f.line==h.line)d(f.line,f.ch,h.ch);else{var p=Ve(r,f.line),g=Ve(r,h.line),v=Dt(p)==Dt(g),m=d(f.line,f.ch,v?p.text.length+1:null).end,y=d(h.line,v?0:null,h.ch).start;v&&(m.top<y.top-2?(c(m.right,m.top,null,m.bottom),c(l,y.top,y.left,y.bottom)):c(m.right,m.top,y.left-m.right,m.bottom)),m.bottom<y.top&&c(l,m.bottom,null,y.top)}n.appendChild(o)}function yi(e){if(e.state.focused){var t=e.display;clearInterval(t.blinker);var n=!0;t.cursorDiv.style.visibility="",e.options.cursorBlinkRate>0?t.blinker=setInterval(function(){return t.cursorDiv.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate):e.options.cursorBlinkRate<0&&(t.cursorDiv.style.visibility="hidden")}}function bi(e){e.state.focused||(e.display.input.focus(),ki(e))}function _i(e){e.state.delayingBlurEvent=!0,setTimeout(function(){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1,wi(e))},100)}function ki(e,t){e.state.delayingBlurEvent&&(e.state.delayingBlurEvent=!1),"nocursor"!=e.options.readOnly&&(e.state.focused||(ge(e,"focus",e,t),e.state.focused=!0,P(e.display.wrapper,"CodeMirror-focused"),e.curOp||e.display.selForContextMenu==e.doc.sel||(e.display.input.reset(),s&&setTimeout(function(){return e.display.input.reset(!0)},20)),e.display.input.receivedFocus()),yi(e))}function wi(e,t){e.state.delayingBlurEvent||(e.state.focused&&(ge(e,"blur",e,t),e.state.focused=!1,E(e.display.wrapper,"CodeMirror-focused")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.display.shift=!1)},150))}function Ci(e){for(var t=e.display,n=t.lineDiv.offsetTop,i=0;i<t.view.length;i++){var r=t.view[i],o=e.options.lineWrapping,s=void 0,u=0;if(!r.hidden){if(a&&l<8){var c=r.node.offsetTop+r.node.offsetHeight;s=c-n,n=c}else{var d=r.node.getBoundingClientRect();s=d.bottom-d.top,!o&&r.text.firstChild&&(u=r.text.firstChild.getBoundingClientRect().right-d.left-1)}var f=r.line.height-s;if((f>.005||f<-.005)&&(Ge(r.line,s),Si(r.line),r.rest))for(var h=0;h<r.rest.length;h++)Si(r.rest[h]);if(u>e.display.sizerWidth){var p=Math.ceil(u/ti(e.display));p>e.display.maxLineLength&&(e.display.maxLineLength=p,e.display.maxLine=r.line,e.display.maxLineChanged=!0)}}}}function Si(e){if(e.widgets)for(var t=0;t<e.widgets.length;++t){var n=e.widgets[t],i=n.node.parentNode;i&&(n.height=i.offsetHeight)}}function Ti(e,t,n){var i=n&&null!=n.top?Math.max(0,n.top):e.scroller.scrollTop;i=Math.floor(i-wn(e));var r=n&&null!=n.bottom?n.bottom:i+e.wrapper.clientHeight,o=Xe(t,i),a=Xe(t,r);if(n&&n.ensure){var l=n.ensure.from.line,s=n.ensure.to.line;l<o?(o=l,a=Xe(t,Ut(Ve(t,l))+e.wrapper.clientHeight)):Math.min(s,t.lastLine())>=a&&(o=Xe(t,Ut(Ve(t,s))-e.wrapper.clientHeight),a=s)}return{from:o,to:Math.max(a,o+1)}}function Ei(e,t){var n=e.display,i=ei(e.display);t.top<0&&(t.top=0);var r=e.curOp&&null!=e.curOp.scrollTop?e.curOp.scrollTop:n.scroller.scrollTop,o=xn(e),a={};t.bottom-t.top>o&&(t.bottom=t.top+o);var l=e.doc.height+Cn(n),s=t.top<i,u=t.bottom>l-i;if(t.top<r)a.scrollTop=s?0:t.top;else if(t.bottom>r+o){var c=Math.min(t.top,(u?l:t.bottom)-o);c!=r&&(a.scrollTop=c)}var d=e.curOp&&null!=e.curOp.scrollLeft?e.curOp.scrollLeft:n.scroller.scrollLeft,f=En(e)-(e.options.fixedGutter?n.gutters.offsetWidth:0),h=t.right-t.left>f;return h&&(t.right=t.left+f),t.left<10?a.scrollLeft=0:t.left<d?a.scrollLeft=Math.max(0,t.left-(h?0:10)):t.right>f+d-3&&(a.scrollLeft=t.right+(h?0:10)-f),a}function xi(e,t){null!=t&&(Oi(e),e.curOp.scrollTop=(null==e.curOp.scrollTop?e.doc.scrollTop:e.curOp.scrollTop)+t)}function Mi(e){Oi(e);var t=e.getCursor();e.curOp.scrollToPos={from:t,to:t,margin:e.options.cursorScrollMargin}}function Li(e,t,n){null==t&&null==n||Oi(e),null!=t&&(e.curOp.scrollLeft=t),null!=n&&(e.curOp.scrollTop=n)}function Oi(e){var t=e.curOp.scrollToPos;if(t){e.curOp.scrollToPos=null;var n=qn(e,t.from),i=qn(e,t.to);Ni(e,n,i,t.margin)}}function Ni(e,t,n,i){var r=Ei(e,{left:Math.min(t.left,n.left),top:Math.min(t.top,n.top)-i,right:Math.max(t.right,n.right),bottom:Math.max(t.bottom,n.bottom)+i});Li(e,r.scrollLeft,r.scrollTop)}function Ai(e,t){Math.abs(e.doc.scrollTop-t)<2||(n||rr(e,{top:t}),Pi(e,t,!0),n&&rr(e),Ji(e,100))}function Pi(e,t,n){t=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,t),(e.display.scroller.scrollTop!=t||n)&&(e.doc.scrollTop=t,e.display.scrollbars.setScrollTop(t),e.display.scroller.scrollTop!=t&&(e.display.scroller.scrollTop=t))}function Ii(e,t,n,i){t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)&&!i||(e.doc.scrollLeft=t,lr(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbars.setScrollLeft(t))}function Bi(e){var t=e.display,n=t.gutters.offsetWidth,i=Math.round(e.doc.height+Cn(e.display));return{clientHeight:t.scroller.clientHeight,viewHeight:t.wrapper.clientHeight,scrollWidth:t.scroller.scrollWidth,clientWidth:t.scroller.clientWidth,viewWidth:t.wrapper.clientWidth,barLeft:e.options.fixedGutter?n:0,docHeight:i,scrollHeight:i+Tn(e)+t.barHeight,nativeBarWidth:t.nativeBarWidth,gutterWidth:n}}var Ri=function(e,t,n){this.cm=n;var i=this.vert=L("div",[L("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),r=this.horiz=L("div",[L("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");i.tabIndex=r.tabIndex=-1,e(i),e(r),fe(i,"scroll",function(){i.clientHeight&&t(i.scrollTop,"vertical")}),fe(r,"scroll",function(){r.clientWidth&&t(r.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,a&&l<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};Ri.prototype.update=function(e){var t=e.scrollWidth>e.clientWidth+1,n=e.scrollHeight>e.clientHeight+1,i=e.nativeBarWidth;if(n){this.vert.style.display="block",this.vert.style.bottom=t?i+"px":"0";var r=e.viewHeight-(t?i:0);this.vert.firstChild.style.height=Math.max(0,e.scrollHeight-e.clientHeight+r)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(t){this.horiz.style.display="block",this.horiz.style.right=n?i+"px":"0",this.horiz.style.left=e.barLeft+"px";var o=e.viewWidth-e.barLeft-(n?i:0);this.horiz.firstChild.style.width=Math.max(0,e.scrollWidth-e.clientWidth+o)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&e.clientHeight>0&&(0==i&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:n?i:0,bottom:t?i:0}},Ri.prototype.setScrollLeft=function(e){this.horiz.scrollLeft!=e&&(this.horiz.scrollLeft=e),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},Ri.prototype.setScrollTop=function(e){this.vert.scrollTop!=e&&(this.vert.scrollTop=e),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},Ri.prototype.zeroWidthHack=function(){var e=y&&!h?"12px":"18px";this.horiz.style.height=this.vert.style.width=e,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new F,this.disableVert=new F},Ri.prototype.enableZeroWidthBar=function(e,t,n){e.style.pointerEvents="auto",t.set(1e3,function i(){var r=e.getBoundingClientRect(),o="vert"==n?document.elementFromPoint(r.right-1,(r.top+r.bottom)/2):document.elementFromPoint((r.right+r.left)/2,r.bottom-1);o!=e?e.style.pointerEvents="none":t.set(1e3,i)})},Ri.prototype.clear=function(){var e=this.horiz.parentNode;e.removeChild(this.horiz),e.removeChild(this.vert)};var Di=function(){};function Hi(e,t){t||(t=Bi(e));var n=e.display.barWidth,i=e.display.barHeight;Fi(e,t);for(var r=0;r<4&&n!=e.display.barWidth||i!=e.display.barHeight;r++)n!=e.display.barWidth&&e.options.lineWrapping&&Ci(e),Fi(e,Bi(e)),n=e.display.barWidth,i=e.display.barHeight}function Fi(e,t){var n=e.display,i=n.scrollbars.update(t);n.sizer.style.paddingRight=(n.barWidth=i.right)+"px",n.sizer.style.paddingBottom=(n.barHeight=i.bottom)+"px",n.heightForcer.style.borderBottom=i.bottom+"px solid transparent",i.right&&i.bottom?(n.scrollbarFiller.style.display="block",n.scrollbarFiller.style.height=i.bottom+"px",n.scrollbarFiller.style.width=i.right+"px"):n.scrollbarFiller.style.display="",i.bottom&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(n.gutterFiller.style.display="block",n.gutterFiller.style.height=i.bottom+"px",n.gutterFiller.style.width=t.gutterWidth+"px"):n.gutterFiller.style.display=""}Di.prototype.update=function(){return{bottom:0,right:0}},Di.prototype.setScrollLeft=function(){},Di.prototype.setScrollTop=function(){},Di.prototype.clear=function(){};var Wi={native:Ri,null:Di};function ji(e){e.display.scrollbars&&(e.display.scrollbars.clear(),e.display.scrollbars.addClass&&E(e.display.wrapper,e.display.scrollbars.addClass)),e.display.scrollbars=new Wi[e.options.scrollbarStyle](function(t){e.display.wrapper.insertBefore(t,e.display.scrollbarFiller),fe(t,"mousedown",function(){e.state.focused&&setTimeout(function(){return e.display.input.focus()},0)}),t.setAttribute("cm-not-content","true")},function(t,n){"horizontal"==n?Ii(e,t):Ai(e,t)},e),e.display.scrollbars.addClass&&P(e.display.wrapper,e.display.scrollbars.addClass)}var Ui=0;function $i(e){var t;e.curOp={cm:e,viewChanged:!1,startHeight:e.doc.height,forceUpdate:!1,updateInput:0,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Ui},t=e.curOp,on?on.ops.push(t):t.ownsGroup=on={ops:[t],delayedCallbacks:[]}}function zi(e){var t=e.curOp;t&&function(e,t){var n=e.ownsGroup;if(n)try{!function(e){var t=e.delayedCallbacks,n=0;do{for(;n<t.length;n++)t[n].call(null);for(var i=0;i<e.ops.length;i++){var r=e.ops[i];if(r.cursorActivityHandlers)for(;r.cursorActivityCalled<r.cursorActivityHandlers.length;)r.cursorActivityHandlers[r.cursorActivityCalled++].call(null,r.cm)}}while(n<t.length)}(n)}finally{on=null,t(n)}}(t,function(e){for(var t=0;t<e.ops.length;t++)e.ops[t].cm.curOp=null;!function(e){for(var t=e.ops,n=0;n<t.length;n++)Vi(t[n]);for(var i=0;i<t.length;i++)(r=t[i]).updatedDisplay=r.mustUpdate&&nr(r.cm,r.update);for(var r,o=0;o<t.length;o++)Ki(t[o]);for(var a=0;a<t.length;a++)qi(t[a]);for(var l=0;l<t.length;l++)Gi(t[l])}(e)})}function Vi(e){var t=e.cm,n=t.display;!function(e){var t=e.display;!t.scrollbarsClipped&&t.scroller.offsetWidth&&(t.nativeBarWidth=t.scroller.offsetWidth-t.scroller.clientWidth,t.heightForcer.style.height=Tn(e)+"px",t.sizer.style.marginBottom=-t.nativeBarWidth+"px",t.sizer.style.borderRightWidth=Tn(e)+"px",t.scrollbarsClipped=!0)}(t),e.updateMaxLine&&zt(t),e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&(e.scrollToPos.from.line<n.viewFrom||e.scrollToPos.to.line>=n.viewTo)||n.maxLineChanged&&t.options.lineWrapping,e.update=e.mustUpdate&&new tr(t,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}function Ki(e){var t=e.cm,n=t.display;e.updatedDisplay&&Ci(t),e.barMeasure=Bi(t),n.maxLineChanged&&!t.options.lineWrapping&&(e.adjustWidthTo=Ln(t,n.maxLine,n.maxLine.text.length).left+3,t.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(n.scroller.clientWidth,n.sizer.offsetLeft+e.adjustWidthTo+Tn(t)+t.display.barWidth),e.maxScrollLeft=Math.max(0,n.sizer.offsetLeft+e.adjustWidthTo-En(t))),(e.updatedDisplay||e.selectionChanged)&&(e.preparedSelection=n.input.prepareSelection())}function qi(e){var t=e.cm;null!=e.adjustWidthTo&&(t.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<t.doc.scrollLeft&&Ii(t,Math.min(t.display.scroller.scrollLeft,e.maxScrollLeft),!0),t.display.maxLineChanged=!1);var n=e.focus&&e.focus==A();e.preparedSelection&&t.display.input.showSelection(e.preparedSelection,n),(e.updatedDisplay||e.startHeight!=t.doc.height)&&Hi(t,e.barMeasure),e.updatedDisplay&&ar(t,e.barMeasure),e.selectionChanged&&yi(t),t.state.focused&&e.updateInput&&t.display.input.reset(e.typing),n&&bi(e.cm)}function Gi(e){var t=e.cm,n=t.display,i=t.doc;if(e.updatedDisplay&&ir(t,e.update),null==n.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&!e.scrollToPos||(n.wheelStartX=n.wheelStartY=null),null!=e.scrollTop&&Pi(t,e.scrollTop,e.forceScroll),null!=e.scrollLeft&&Ii(t,e.scrollLeft,!0,!0),e.scrollToPos){var r=function(e,t,n,i){var r;null==i&&(i=0),e.options.lineWrapping||t!=n||(t=t.ch?Je(t.line,"before"==t.sticky?t.ch-1:t.ch,"after"):t,n="before"==t.sticky?Je(t.line,t.ch+1,"before"):t);for(var o=0;o<5;o++){var a=!1,l=Kn(e,t),s=n&&n!=t?Kn(e,n):l;r={left:Math.min(l.left,s.left),top:Math.min(l.top,s.top)-i,right:Math.max(l.left,s.left),bottom:Math.max(l.bottom,s.bottom)+i};var u=Ei(e,r),c=e.doc.scrollTop,d=e.doc.scrollLeft;if(null!=u.scrollTop&&(Ai(e,u.scrollTop),Math.abs(e.doc.scrollTop-c)>1&&(a=!0)),null!=u.scrollLeft&&(Ii(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-d)>1&&(a=!0)),!a)break}return r}(t,at(i,e.scrollToPos.from),at(i,e.scrollToPos.to),e.scrollToPos.margin);!function(e,t){if(!ve(e,"scrollCursorIntoView")){var n=e.display,i=n.sizer.getBoundingClientRect(),r=null;if(t.top+i.top<0?r=!0:t.bottom+i.top>(window.innerHeight||document.documentElement.clientHeight)&&(r=!1),null!=r&&!p){var o=L("div","\u200b",null,"position: absolute;\n                         top: "+(t.top-n.viewOffset-wn(e.display))+"px;\n                         height: "+(t.bottom-t.top+Tn(e)+n.barHeight)+"px;\n                         left: "+t.left+"px; width: "+Math.max(2,t.right-t.left)+"px;");e.display.lineSpace.appendChild(o),o.scrollIntoView(r),e.display.lineSpace.removeChild(o)}}}(t,r)}var o=e.maybeHiddenMarkers,a=e.maybeUnhiddenMarkers;if(o)for(var l=0;l<o.length;++l)o[l].lines.length||ge(o[l],"hide");if(a)for(var s=0;s<a.length;++s)a[s].lines.length&&ge(a[s],"unhide");n.wrapper.offsetHeight&&(i.scrollTop=t.display.scroller.scrollTop),e.changeObjs&&ge(t,"changes",t,e.changeObjs),e.update&&e.update.finish()}function Yi(e,t){if(e.curOp)return t();$i(e);try{return t()}finally{zi(e)}}function Xi(e,t){return function(){if(e.curOp)return t.apply(e,arguments);$i(e);try{return t.apply(e,arguments)}finally{zi(e)}}}function Zi(e){return function(){if(this.curOp)return e.apply(this,arguments);$i(this);try{return e.apply(this,arguments)}finally{zi(this)}}}function Qi(e){return function(){var t=this.cm;if(!t||t.curOp)return e.apply(this,arguments);$i(t);try{return e.apply(this,arguments)}finally{zi(t)}}}function Ji(e,t){e.doc.highlightFrontier<e.display.viewTo&&e.state.highlight.set(t,R(er,e))}function er(e){var t=e.doc;if(!(t.highlightFrontier>=e.display.viewTo)){var n=+new Date+e.options.workTime,i=ft(e,t.highlightFrontier),r=[];t.iter(i.line,Math.min(t.first+t.size,e.display.viewTo+500),function(o){if(i.line>=e.display.viewFrom){var a=o.styles,l=o.text.length>e.options.maxHighlightLength?je(t.mode,i.state):null,s=ct(e,o,i,!0);l&&(i.state=l),o.styles=s.styles;var u=o.styleClasses,c=s.classes;c?o.styleClasses=c:u&&(o.styleClasses=null);for(var d=!a||a.length!=o.styles.length||u!=c&&(!u||!c||u.bgClass!=c.bgClass||u.textClass!=c.textClass),f=0;!d&&f<a.length;++f)d=a[f]!=o.styles[f];d&&r.push(i.line),o.stateAfter=i.save(),i.nextLine()}else o.text.length<=e.options.maxHighlightLength&&ht(e,o.text,i),o.stateAfter=i.line%5==0?i.save():null,i.nextLine();if(+new Date>n)return Ji(e,e.options.workDelay),!0}),t.highlightFrontier=i.line,t.modeFrontier=Math.max(t.modeFrontier,i.line),r.length&&Yi(e,function(){for(var t=0;t<r.length;t++)ui(e,r[t],"text")})}}var tr=function(e,t,n){var i=e.display;this.viewport=t,this.visible=Ti(i,e.doc,t),this.editorIsHidden=!i.wrapper.offsetWidth,this.wrapperHeight=i.wrapper.clientHeight,this.wrapperWidth=i.wrapper.clientWidth,this.oldDisplayWidth=En(e),this.force=n,this.dims=ni(e),this.events=[]};function nr(e,t){var n=e.display,i=e.doc;if(t.editorIsHidden)return ci(e),!1;if(!t.force&&t.visible.from>=n.viewFrom&&t.visible.to<=n.viewTo&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo)&&n.renderedView==n.view&&0==fi(e))return!1;sr(e)&&(ci(e),t.dims=ni(e));var r=i.first+i.size,o=Math.max(t.visible.from-e.options.viewportMargin,i.first),a=Math.min(r,t.visible.to+e.options.viewportMargin);n.viewFrom<o&&o-n.viewFrom<20&&(o=Math.max(i.first,n.viewFrom)),n.viewTo>a&&n.viewTo-a<20&&(a=Math.min(r,n.viewTo)),kt&&(o=Ht(e.doc,o),a=Ft(e.doc,a));var l=o!=n.viewFrom||a!=n.viewTo||n.lastWrapHeight!=t.wrapperHeight||n.lastWrapWidth!=t.wrapperWidth;!function(e,t,n){var i=e.display;0==i.view.length||t>=i.viewTo||n<=i.viewFrom?(i.view=rn(e,t,n),i.viewFrom=t):(i.viewFrom>t?i.view=rn(e,t,i.viewFrom).concat(i.view):i.viewFrom<t&&(i.view=i.view.slice(li(e,t))),i.viewFrom=t,i.viewTo<n?i.view=i.view.concat(rn(e,i.viewTo,n)):i.viewTo>n&&(i.view=i.view.slice(0,li(e,n)))),i.viewTo=n}(e,o,a),n.viewOffset=Ut(Ve(e.doc,n.viewFrom)),e.display.mover.style.top=n.viewOffset+"px";var u=fi(e);if(!l&&0==u&&!t.force&&n.renderedView==n.view&&(null==n.updateLineNumbers||n.updateLineNumbers>=n.viewTo))return!1;var c=function(e){if(e.hasFocus())return null;var t=A();if(!t||!N(e.display.lineDiv,t))return null;var n={activeElt:t};if(window.getSelection){var i=window.getSelection();i.anchorNode&&i.extend&&N(e.display.lineDiv,i.anchorNode)&&(n.anchorNode=i.anchorNode,n.anchorOffset=i.anchorOffset,n.focusNode=i.focusNode,n.focusOffset=i.focusOffset)}return n}(e);return u>4&&(n.lineDiv.style.display="none"),function(e,t,n){var i=e.display,r=e.options.lineNumbers,o=i.lineDiv,a=o.firstChild;function l(t){var n=t.nextSibling;return s&&y&&e.display.currentWheelTarget==t?t.style.display="none":t.parentNode.removeChild(t),n}for(var u=i.view,c=i.viewFrom,d=0;d<u.length;d++){var f=u[d];if(f.hidden);else if(f.node&&f.node.parentNode==o){for(;a!=f.node;)a=l(a);var h=r&&null!=t&&t<=c&&f.lineNumber;f.changes&&(W(f.changes,"gutter")>-1&&(h=!1),un(e,f,c,n)),h&&(x(f.lineNumber),f.lineNumber.appendChild(document.createTextNode(Qe(e.options,c)))),a=f.node.nextSibling}else{var p=vn(e,f,c,n);o.insertBefore(p,a)}c+=f.size}for(;a;)a=l(a)}(e,n.updateLineNumbers,t.dims),u>4&&(n.lineDiv.style.display=""),n.renderedView=n.view,function(e){if(e&&e.activeElt&&e.activeElt!=A()&&(e.activeElt.focus(),e.anchorNode&&N(document.body,e.anchorNode)&&N(document.body,e.focusNode))){var t=window.getSelection(),n=document.createRange();n.setEnd(e.anchorNode,e.anchorOffset),n.collapse(!1),t.removeAllRanges(),t.addRange(n),t.extend(e.focusNode,e.focusOffset)}}(c),x(n.cursorDiv),x(n.selectionDiv),n.gutters.style.height=n.sizer.style.minHeight=0,l&&(n.lastWrapHeight=t.wrapperHeight,n.lastWrapWidth=t.wrapperWidth,Ji(e,400)),n.updateLineNumbers=null,!0}function ir(e,t){for(var n=t.viewport,i=!0;(i&&e.options.lineWrapping&&t.oldDisplayWidth!=En(e)||(n&&null!=n.top&&(n={top:Math.min(e.doc.height+Cn(e.display)-xn(e),n.top)}),t.visible=Ti(e.display,e.doc,n),!(t.visible.from>=e.display.viewFrom&&t.visible.to<=e.display.viewTo)))&&nr(e,t);i=!1){Ci(e);var r=Bi(e);hi(e),Hi(e,r),ar(e,r),t.force=!1}t.signal(e,"update",e),e.display.viewFrom==e.display.reportedViewFrom&&e.display.viewTo==e.display.reportedViewTo||(t.signal(e,"viewportChange",e,e.display.viewFrom,e.display.viewTo),e.display.reportedViewFrom=e.display.viewFrom,e.display.reportedViewTo=e.display.viewTo)}function rr(e,t){var n=new tr(e,t);if(nr(e,n)){Ci(e),ir(e,n);var i=Bi(e);hi(e),Hi(e,i),ar(e,i),n.finish()}}function or(e){var t=e.gutters.offsetWidth;e.sizer.style.marginLeft=t+"px"}function ar(e,t){e.display.sizer.style.minHeight=t.docHeight+"px",e.display.heightForcer.style.top=t.docHeight+"px",e.display.gutters.style.height=t.docHeight+e.display.barHeight+Tn(e)+"px"}function lr(e){var t=e.display,n=t.view;if(t.alignWidgets||t.gutters.firstChild&&e.options.fixedGutter){for(var i=ii(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,o=i+"px",a=0;a<n.length;a++)if(!n[a].hidden){e.options.fixedGutter&&(n[a].gutter&&(n[a].gutter.style.left=o),n[a].gutterBackground&&(n[a].gutterBackground.style.left=o));var l=n[a].alignable;if(l)for(var s=0;s<l.length;s++)l[s].style.left=o}e.options.fixedGutter&&(t.gutters.style.left=i+r+"px")}}function sr(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=Qe(e.options,t.first+t.size-1),i=e.display;if(n.length!=i.lineNumChars){var r=i.measure.appendChild(L("div",[L("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),o=r.firstChild.offsetWidth,a=r.offsetWidth-o;return i.lineGutter.style.width="",i.lineNumInnerWidth=Math.max(o,i.lineGutter.offsetWidth-a)+1,i.lineNumWidth=i.lineNumInnerWidth+a,i.lineNumChars=i.lineNumInnerWidth?n.length:-1,i.lineGutter.style.width=i.lineNumWidth+"px",or(e.display),!0}return!1}function ur(e,t){for(var n=[],i=!1,r=0;r<e.length;r++){var o=e[r],a=null;if("string"!=typeof o&&(a=o.style,o=o.className),"CodeMirror-linenumbers"==o){if(!t)continue;i=!0}n.push({className:o,style:a})}return t&&!i&&n.push({className:"CodeMirror-linenumbers",style:null}),n}function cr(e){var t=e.gutters,n=e.gutterSpecs;x(t),e.lineGutter=null;for(var i=0;i<n.length;++i){var r=n[i],o=r.className,a=r.style,l=t.appendChild(L("div",null,"CodeMirror-gutter "+o));a&&(l.style.cssText=a),"CodeMirror-linenumbers"==o&&(e.lineGutter=l,l.style.width=(e.lineNumWidth||1)+"px")}t.style.display=n.length?"":"none",or(e)}function dr(e){cr(e.display),si(e),lr(e)}function fr(e,t,i,r){var o=this;this.input=i,o.scrollbarFiller=L("div",null,"CodeMirror-scrollbar-filler"),o.scrollbarFiller.setAttribute("cm-not-content","true"),o.gutterFiller=L("div",null,"CodeMirror-gutter-filler"),o.gutterFiller.setAttribute("cm-not-content","true"),o.lineDiv=O("div",null,"CodeMirror-code"),o.selectionDiv=L("div",null,null,"position: relative; z-index: 1"),o.cursorDiv=L("div",null,"CodeMirror-cursors"),o.measure=L("div",null,"CodeMirror-measure"),o.lineMeasure=L("div",null,"CodeMirror-measure"),o.lineSpace=O("div",[o.measure,o.lineMeasure,o.selectionDiv,o.cursorDiv,o.lineDiv],null,"position: relative; outline: none");var u=O("div",[o.lineSpace],"CodeMirror-lines");o.mover=L("div",[u],null,"position: relative"),o.sizer=L("div",[o.mover],"CodeMirror-sizer"),o.sizerWidth=null,o.heightForcer=L("div",null,null,"position: absolute; height: "+j+"px; width: 1px;"),o.gutters=L("div",null,"CodeMirror-gutters"),o.lineGutter=null,o.scroller=L("div",[o.sizer,o.heightForcer,o.gutters],"CodeMirror-scroll"),o.scroller.setAttribute("tabIndex","-1"),o.wrapper=L("div",[o.scrollbarFiller,o.gutterFiller,o.scroller],"CodeMirror"),a&&l<8&&(o.gutters.style.zIndex=-1,o.scroller.style.paddingRight=0),s||n&&m||(o.scroller.draggable=!0),e&&(e.appendChild?e.appendChild(o.wrapper):e(o.wrapper)),o.viewFrom=o.viewTo=t.first,o.reportedViewFrom=o.reportedViewTo=t.first,o.view=[],o.renderedView=null,o.externalMeasured=null,o.viewOffset=0,o.lastWrapHeight=o.lastWrapWidth=0,o.updateLineNumbers=null,o.nativeBarWidth=o.barHeight=o.barWidth=0,o.scrollbarsClipped=!1,o.lineNumWidth=o.lineNumInnerWidth=o.lineNumChars=null,o.alignWidgets=!1,o.cachedCharWidth=o.cachedTextHeight=o.cachedPaddingH=null,o.maxLine=null,o.maxLineLength=0,o.maxLineChanged=!1,o.wheelDX=o.wheelDY=o.wheelStartX=o.wheelStartY=null,o.shift=!1,o.selForContextMenu=null,o.activeTouch=null,o.gutterSpecs=ur(r.gutters,r.lineNumbers),cr(o),i.init(o)}tr.prototype.signal=function(e,t){ye(e,t)&&this.events.push(arguments)},tr.prototype.finish=function(){for(var e=0;e<this.events.length;e++)ge.apply(null,this.events[e])};var hr=0,pr=null;function gr(e){var t=e.wheelDeltaX,n=e.wheelDeltaY;return null==t&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(t=e.detail),null==n&&e.detail&&e.axis==e.VERTICAL_AXIS?n=e.detail:null==n&&(n=e.wheelDelta),{x:t,y:n}}function vr(e){var t=gr(e);return t.x*=pr,t.y*=pr,t}function mr(e,t){var i=gr(t),r=i.x,o=i.y,a=e.display,l=a.scroller,u=l.scrollWidth>l.clientWidth,c=l.scrollHeight>l.clientHeight;if(r&&u||o&&c){if(o&&y&&s)e:for(var f=t.target,h=a.view;f!=l;f=f.parentNode)for(var p=0;p<h.length;p++)if(h[p].node==f){e.display.currentWheelTarget=f;break e}if(r&&!n&&!d&&null!=pr)return o&&c&&Ai(e,Math.max(0,l.scrollTop+o*pr)),Ii(e,Math.max(0,l.scrollLeft+r*pr)),(!o||o&&c)&&_e(t),void(a.wheelStartX=null);if(o&&null!=pr){var g=o*pr,v=e.doc.scrollTop,m=v+a.wrapper.clientHeight;g<0?v=Math.max(0,v+g-50):m=Math.min(e.doc.height,m+g+50),rr(e,{top:v,bottom:m})}hr<20&&(null==a.wheelStartX?(a.wheelStartX=l.scrollLeft,a.wheelStartY=l.scrollTop,a.wheelDX=r,a.wheelDY=o,setTimeout(function(){if(null!=a.wheelStartX){var e=l.scrollLeft-a.wheelStartX,t=l.scrollTop-a.wheelStartY,n=t&&a.wheelDY&&t/a.wheelDY||e&&a.wheelDX&&e/a.wheelDX;a.wheelStartX=a.wheelStartY=null,n&&(pr=(pr*hr+n)/(hr+1),++hr)}},200)):(a.wheelDX+=r,a.wheelDY+=o))}}a?pr=-.53:n?pr=15:c?pr=-.7:f&&(pr=-1/3);var yr=function(e,t){this.ranges=e,this.primIndex=t};yr.prototype.primary=function(){return this.ranges[this.primIndex]},yr.prototype.equals=function(e){if(e==this)return!0;if(e.primIndex!=this.primIndex||e.ranges.length!=this.ranges.length)return!1;for(var t=0;t<this.ranges.length;t++){var n=this.ranges[t],i=e.ranges[t];if(!tt(n.anchor,i.anchor)||!tt(n.head,i.head))return!1}return!0},yr.prototype.deepCopy=function(){for(var e=[],t=0;t<this.ranges.length;t++)e[t]=new br(nt(this.ranges[t].anchor),nt(this.ranges[t].head));return new yr(e,this.primIndex)},yr.prototype.somethingSelected=function(){for(var e=0;e<this.ranges.length;e++)if(!this.ranges[e].empty())return!0;return!1},yr.prototype.contains=function(e,t){t||(t=e);for(var n=0;n<this.ranges.length;n++){var i=this.ranges[n];if(et(t,i.from())>=0&&et(e,i.to())<=0)return n}return-1};var br=function(e,t){this.anchor=e,this.head=t};function _r(e,t,n){var i=e&&e.options.selectionsMayTouch,r=t[n];t.sort(function(e,t){return et(e.from(),t.from())}),n=W(t,r);for(var o=1;o<t.length;o++){var a=t[o],l=t[o-1],s=et(l.to(),a.from());if(i&&!a.empty()?s>0:s>=0){var u=rt(l.from(),a.from()),c=it(l.to(),a.to()),d=l.empty()?a.from()==a.head:l.from()==l.head;o<=n&&--n,t.splice(--o,2,new br(d?c:u,d?u:c))}}return new yr(t,n)}function kr(e,t){return new yr([new br(e,t||e)],0)}function wr(e){return e.text?Je(e.from.line+e.text.length-1,Y(e.text).length+(1==e.text.length?e.from.ch:0)):e.to}function Cr(e,t){if(et(e,t.from)<0)return e;if(et(e,t.to)<=0)return wr(t);var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=wr(t).ch-t.to.ch),Je(n,i)}function Sr(e,t){for(var n=[],i=0;i<e.sel.ranges.length;i++){var r=e.sel.ranges[i];n.push(new br(Cr(r.anchor,t),Cr(r.head,t)))}return _r(e.cm,n,e.sel.primIndex)}function Tr(e,t,n){return e.line==t.line?Je(n.line,e.ch-t.ch+n.ch):Je(n.line+(e.line-t.line),e.ch)}function Er(e){e.doc.mode=He(e.options,e.doc.modeOption),xr(e)}function xr(e){e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.modeFrontier=e.doc.highlightFrontier=e.doc.first,Ji(e,100),e.state.modeGen++,e.curOp&&si(e)}function Mr(e,t){return 0==t.from.ch&&0==t.to.ch&&""==Y(t.text)&&(!e.cm||e.cm.options.wholeLineUpdateBefore)}function Lr(e,t,n,i){function r(e){return n?n[e]:null}function o(e,n,r){!function(e,t,n,i){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),null!=e.order&&(e.order=null),xt(e),Mt(e,n);var r=i?i(e):1;r!=e.height&&Ge(e,r)}(e,n,r,i),ln(e,"change",e,t)}function a(e,t){for(var n=[],o=e;o<t;++o)n.push(new Vt(u[o],r(o),i));return n}var l=t.from,s=t.to,u=t.text,c=Ve(e,l.line),d=Ve(e,s.line),f=Y(u),h=r(u.length-1),p=s.line-l.line;if(t.full)e.insert(0,a(0,u.length)),e.remove(u.length,e.size-u.length);else if(Mr(e,t)){var g=a(0,u.length-1);o(d,d.text,h),p&&e.remove(l.line,p),g.length&&e.insert(l.line,g)}else if(c==d)if(1==u.length)o(c,c.text.slice(0,l.ch)+f+c.text.slice(s.ch),h);else{var v=a(1,u.length-1);v.push(new Vt(f+c.text.slice(s.ch),h,i)),o(c,c.text.slice(0,l.ch)+u[0],r(0)),e.insert(l.line+1,v)}else if(1==u.length)o(c,c.text.slice(0,l.ch)+u[0]+d.text.slice(s.ch),r(0)),e.remove(l.line+1,p);else{o(c,c.text.slice(0,l.ch)+u[0],r(0)),o(d,f+d.text.slice(s.ch),h);var m=a(1,u.length-1);p>1&&e.remove(l.line+1,p-1),e.insert(l.line+1,m)}ln(e,"change",e,t)}function Or(e,t,n){!function e(i,r,o){if(i.linked)for(var a=0;a<i.linked.length;++a){var l=i.linked[a];if(l.doc!=r){var s=o&&l.sharedHist;n&&!s||(t(l.doc,s),e(l.doc,i,s))}}}(e,null,!0)}function Nr(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,oi(e),Er(e),Ar(e),e.options.lineWrapping||zt(e),e.options.mode=t.modeOption,si(e)}function Ar(e){("rtl"==e.doc.direction?P:E)(e.display.lineDiv,"CodeMirror-rtl")}function Pr(e){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=e||1}function Ir(e,t){var n={from:nt(t.from),to:wr(t),text:Ke(e,t.from,t.to)};return Fr(e,n,t.from.line,t.to.line+1),Or(e,function(e){return Fr(e,n,t.from.line,t.to.line+1)},!0),n}function Br(e){for(;e.length;){var t=Y(e);if(!t.ranges)break;e.pop()}}function Rr(e,t,n,i){var r=e.history;r.undone.length=0;var o,a,l=+new Date;if((r.lastOp==i||r.lastOrigin==t.origin&&t.origin&&("+"==t.origin.charAt(0)&&r.lastModTime>l-(e.cm?e.cm.options.historyEventDelay:500)||"*"==t.origin.charAt(0)))&&(o=function(e,t){return t?(Br(e.done),Y(e.done)):e.done.length&&!Y(e.done).ranges?Y(e.done):e.done.length>1&&!e.done[e.done.length-2].ranges?(e.done.pop(),Y(e.done)):void 0}(r,r.lastOp==i)))a=Y(o.changes),0==et(t.from,t.to)&&0==et(t.from,a.to)?a.to=wr(t):o.changes.push(Ir(e,t));else{var s=Y(r.done);for(s&&s.ranges||Hr(e.sel,r.done),o={changes:[Ir(e,t)],generation:r.generation},r.done.push(o);r.done.length>r.undoDepth;)r.done.shift(),r.done[0].ranges||r.done.shift()}r.done.push(n),r.generation=++r.maxGeneration,r.lastModTime=r.lastSelTime=l,r.lastOp=r.lastSelOp=i,r.lastOrigin=r.lastSelOrigin=t.origin,a||ge(e,"historyAdded")}function Dr(e,t,n,i){var r=e.history,o=i&&i.origin;n==r.lastSelOp||o&&r.lastSelOrigin==o&&(r.lastModTime==r.lastSelTime&&r.lastOrigin==o||function(e,t,n,i){var r=t.charAt(0);return"*"==r||"+"==r&&n.ranges.length==i.ranges.length&&n.somethingSelected()==i.somethingSelected()&&new Date-e.history.lastSelTime<=(e.cm?e.cm.options.historyEventDelay:500)}(e,o,Y(r.done),t))?r.done[r.done.length-1]=t:Hr(t,r.done),r.lastSelTime=+new Date,r.lastSelOrigin=o,r.lastSelOp=n,i&&!1!==i.clearRedo&&Br(r.undone)}function Hr(e,t){var n=Y(t);n&&n.ranges&&n.equals(e)||t.push(e)}function Fr(e,t,n,i){var r=t["spans_"+e.id],o=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,i),function(n){n.markedSpans&&((r||(r=t["spans_"+e.id]={}))[o]=n.markedSpans),++o})}function Wr(e){if(!e)return null;for(var t,n=0;n<e.length;++n)e[n].marker.explicitlyCleared?t||(t=e.slice(0,n)):t&&t.push(e[n]);return t?t.length?t:null:e}function jr(e,t){var n=function(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var i=[],r=0;r<t.text.length;++r)i.push(Wr(n[r]));return i}(e,t),i=Tt(e,t);if(!n)return i;if(!i)return n;for(var r=0;r<n.length;++r){var o=n[r],a=i[r];if(o&&a)e:for(var l=0;l<a.length;++l){for(var s=a[l],u=0;u<o.length;++u)if(o[u].marker==s.marker)continue e;o.push(s)}else a&&(n[r]=a)}return n}function Ur(e,t,n){for(var i=[],r=0;r<e.length;++r){var o=e[r];if(o.ranges)i.push(n?yr.prototype.deepCopy.call(o):o);else{var a=o.changes,l=[];i.push({changes:l});for(var s=0;s<a.length;++s){var u=a[s],c=void 0;if(l.push({from:u.from,to:u.to,text:u.text}),t)for(var d in u)(c=d.match(/^spans_(\d+)$/))&&W(t,Number(c[1]))>-1&&(Y(l)[d]=u[d],delete u[d])}}}return i}function $r(e,t,n,i){if(i){var r=e.anchor;if(n){var o=et(t,r)<0;o!=et(n,r)<0?(r=t,t=n):o!=et(t,n)<0&&(t=n)}return new br(r,t)}return new br(n||t,t)}function zr(e,t,n,i,r){null==r&&(r=e.cm&&(e.cm.display.shift||e.extend)),Yr(e,new yr([$r(e.sel.primary(),t,n,r)],0),i)}function Vr(e,t,n){for(var i=[],r=e.cm&&(e.cm.display.shift||e.extend),o=0;o<e.sel.ranges.length;o++)i[o]=$r(e.sel.ranges[o],t[o],null,r);var a=_r(e.cm,i,e.sel.primIndex);Yr(e,a,n)}function Kr(e,t,n,i){var r=e.sel.ranges.slice(0);r[t]=n,Yr(e,_r(e.cm,r,e.sel.primIndex),i)}function qr(e,t,n,i){Yr(e,kr(t,n),i)}function Gr(e,t,n){var i=e.history.done,r=Y(i);r&&r.ranges?(i[i.length-1]=t,Xr(e,t,n)):Yr(e,t,n)}function Yr(e,t,n){Xr(e,t,n),Dr(e,e.sel,e.cm?e.cm.curOp.id:NaN,n)}function Xr(e,t,n){(ye(e,"beforeSelectionChange")||e.cm&&ye(e.cm,"beforeSelectionChange"))&&(t=function(e,t,n){var i={ranges:t.ranges,update:function(t){this.ranges=[];for(var n=0;n<t.length;n++)this.ranges[n]=new br(at(e,t[n].anchor),at(e,t[n].head))},origin:n&&n.origin};return ge(e,"beforeSelectionChange",e,i),e.cm&&ge(e.cm,"beforeSelectionChange",e.cm,i),i.ranges!=t.ranges?_r(e.cm,i.ranges,i.ranges.length-1):t}(e,t,n));var i=n&&n.bias||(et(t.primary().head,e.sel.primary().head)<0?-1:1);Zr(e,Jr(e,t,i,!0)),n&&!1===n.scroll||!e.cm||Mi(e.cm)}function Zr(e,t){t.equals(e.sel)||(e.sel=t,e.cm&&(e.cm.curOp.updateInput=1,e.cm.curOp.selectionChanged=!0,me(e.cm)),ln(e,"cursorActivity",e))}function Qr(e){Zr(e,Jr(e,e.sel,null,!1))}function Jr(e,t,n,i){for(var r,o=0;o<t.ranges.length;o++){var a=t.ranges[o],l=t.ranges.length==e.sel.ranges.length&&e.sel.ranges[o],s=to(e,a.anchor,l&&l.anchor,n,i),u=to(e,a.head,l&&l.head,n,i);(r||s!=a.anchor||u!=a.head)&&(r||(r=t.ranges.slice(0,o)),r[o]=new br(s,u))}return r?_r(e.cm,r,t.primIndex):t}function eo(e,t,n,i,r){var o=Ve(e,t.line);if(o.markedSpans)for(var a=0;a<o.markedSpans.length;++a){var l=o.markedSpans[a],s=l.marker,u="selectLeft"in s?!s.selectLeft:s.inclusiveLeft,c="selectRight"in s?!s.selectRight:s.inclusiveRight;if((null==l.from||(u?l.from<=t.ch:l.from<t.ch))&&(null==l.to||(c?l.to>=t.ch:l.to>t.ch))){if(r&&(ge(s,"beforeCursorEnter"),s.explicitlyCleared)){if(o.markedSpans){--a;continue}break}if(!s.atomic)continue;if(n){var d=s.find(i<0?1:-1),f=void 0;if((i<0?c:u)&&(d=no(e,d,-i,d&&d.line==t.line?o:null)),d&&d.line==t.line&&(f=et(d,n))&&(i<0?f<0:f>0))return eo(e,d,t,i,r)}var h=s.find(i<0?-1:1);return(i<0?u:c)&&(h=no(e,h,i,h.line==t.line?o:null)),h?eo(e,h,t,i,r):null}}return t}function to(e,t,n,i,r){var o=i||1,a=eo(e,t,n,o,r)||!r&&eo(e,t,n,o,!0)||eo(e,t,n,-o,r)||!r&&eo(e,t,n,-o,!0);return a||(e.cantEdit=!0,Je(e.first,0))}function no(e,t,n,i){return n<0&&0==t.ch?t.line>e.first?at(e,Je(t.line-1)):null:n>0&&t.ch==(i||Ve(e,t.line)).text.length?t.line<e.first+e.size-1?Je(t.line+1,0):null:new Je(t.line,t.ch+n)}function io(e){e.setSelection(Je(e.firstLine(),0),Je(e.lastLine()),$)}function ro(e,t,n){var i={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){return i.canceled=!0}};return n&&(i.update=function(t,n,r,o){t&&(i.from=at(e,t)),n&&(i.to=at(e,n)),r&&(i.text=r),void 0!==o&&(i.origin=o)}),ge(e,"beforeChange",e,i),e.cm&&ge(e.cm,"beforeChange",e.cm,i),i.canceled?(e.cm&&(e.cm.curOp.updateInput=2),null):{from:i.from,to:i.to,text:i.text,origin:i.origin}}function oo(e,t,n){if(e.cm){if(!e.cm.curOp)return Xi(e.cm,oo)(e,t,n);if(e.cm.state.suppressEdits)return}if(!(ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"))||(t=ro(e,t,!0))){var i=_t&&!n&&function(e,t,n){var i=null;if(e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;!n.readOnly||i&&-1!=W(i,n)||(i||(i=[])).push(n)}}),!i)return null;for(var r=[{from:t,to:n}],o=0;o<i.length;++o)for(var a=i[o],l=a.find(0),s=0;s<r.length;++s){var u=r[s];if(!(et(u.to,l.from)<0||et(u.from,l.to)>0)){var c=[s,1],d=et(u.from,l.from),f=et(u.to,l.to);(d<0||!a.inclusiveLeft&&!d)&&c.push({from:u.from,to:l.from}),(f>0||!a.inclusiveRight&&!f)&&c.push({from:l.to,to:u.to}),r.splice.apply(r,c),s+=c.length-3}}return r}(e,t.from,t.to);if(i)for(var r=i.length-1;r>=0;--r)ao(e,{from:i[r].from,to:i[r].to,text:r?[""]:t.text,origin:t.origin});else ao(e,t)}}function ao(e,t){if(1!=t.text.length||""!=t.text[0]||0!=et(t.from,t.to)){var n=Sr(e,t);Rr(e,t,n,e.cm?e.cm.curOp.id:NaN),uo(e,t,n,Tt(e,t));var i=[];Or(e,function(e,n){n||-1!=W(i,e.history)||(po(e.history,t),i.push(e.history)),uo(e,t,null,Tt(e,t))})}}function lo(e,t,n){var i=e.cm&&e.cm.state.suppressEdits;if(!i||n){for(var r,o=e.history,a=e.sel,l="undo"==t?o.done:o.undone,s="undo"==t?o.undone:o.done,u=0;u<l.length&&(r=l[u],n?!r.ranges||r.equals(e.sel):r.ranges);u++);if(u!=l.length){for(o.lastOrigin=o.lastSelOrigin=null;;){if(!(r=l.pop()).ranges){if(i)return void l.push(r);break}if(Hr(r,s),n&&!r.equals(e.sel))return void Yr(e,r,{clearRedo:!1});a=r}var c=[];Hr(a,s),s.push({changes:c,generation:o.generation}),o.generation=r.generation||++o.maxGeneration;for(var d=ye(e,"beforeChange")||e.cm&&ye(e.cm,"beforeChange"),f=function(n){var i=r.changes[n];if(i.origin=t,d&&!ro(e,i,!1))return l.length=0,{};c.push(Ir(e,i));var o=n?Sr(e,i):Y(l);uo(e,i,o,jr(e,i)),!n&&e.cm&&e.cm.scrollIntoView({from:i.from,to:wr(i)});var a=[];Or(e,function(e,t){t||-1!=W(a,e.history)||(po(e.history,i),a.push(e.history)),uo(e,i,null,jr(e,i))})},h=r.changes.length-1;h>=0;--h){var p=f(h);if(p)return p.v}}}}function so(e,t){if(0!=t&&(e.first+=t,e.sel=new yr(X(e.sel.ranges,function(e){return new br(Je(e.anchor.line+t,e.anchor.ch),Je(e.head.line+t,e.head.ch))}),e.sel.primIndex),e.cm)){si(e.cm,e.first,e.first-t,t);for(var n=e.cm.display,i=n.viewFrom;i<n.viewTo;i++)ui(e.cm,i,"gutter")}}function uo(e,t,n,i){if(e.cm&&!e.cm.curOp)return Xi(e.cm,uo)(e,t,n,i);if(t.to.line<e.first)so(e,t.text.length-1-(t.to.line-t.from.line));else if(!(t.from.line>e.lastLine())){if(t.from.line<e.first){var r=t.text.length-1-(e.first-t.from.line);so(e,r),t={from:Je(e.first,0),to:Je(t.to.line+r,t.to.ch),text:[Y(t.text)],origin:t.origin}}var o=e.lastLine();t.to.line>o&&(t={from:t.from,to:Je(o,Ve(e,o).text.length),text:[t.text[0]],origin:t.origin}),t.removed=Ke(e,t.from,t.to),n||(n=Sr(e,t)),e.cm?function(e,t,n){var i=e.doc,r=e.display,o=t.from,a=t.to,l=!1,s=o.line;e.options.lineWrapping||(s=Ye(Dt(Ve(i,o.line))),i.iter(s,a.line+1,function(e){if(e==r.maxLine)return l=!0,!0})),i.sel.contains(t.from,t.to)>-1&&me(e),Lr(i,t,n,ri(e)),e.options.lineWrapping||(i.iter(s,o.line+t.text.length,function(e){var t=$t(e);t>r.maxLineLength&&(r.maxLine=e,r.maxLineLength=t,r.maxLineChanged=!0,l=!1)}),l&&(e.curOp.updateMaxLine=!0)),function(e,t){if(e.modeFrontier=Math.min(e.modeFrontier,t),!(e.highlightFrontier<t-10)){for(var n=e.first,i=t-1;i>n;i--){var r=Ve(e,i).stateAfter;if(r&&(!(r instanceof st)||i+r.lookAhead<t)){n=i+1;break}}e.highlightFrontier=Math.min(e.highlightFrontier,n)}}(i,o.line),Ji(e,400);var u=t.text.length-(a.line-o.line)-1;t.full?si(e):o.line!=a.line||1!=t.text.length||Mr(e.doc,t)?si(e,o.line,a.line+1,u):ui(e,o.line,"text");var c=ye(e,"changes"),d=ye(e,"change");if(d||c){var f={from:o,to:a,text:t.text,removed:t.removed,origin:t.origin};d&&ln(e,"change",e,f),c&&(e.curOp.changeObjs||(e.curOp.changeObjs=[])).push(f)}e.display.selForContextMenu=null}(e.cm,t,i):Lr(e,t,i),Xr(e,n,$)}}function co(e,t,n,i,r){var o;i||(i=n),et(i,n)<0&&(n=(o=[i,n])[0],i=o[1]),"string"==typeof t&&(t=e.splitLines(t)),oo(e,{from:n,to:i,text:t,origin:r})}function fo(e,t,n,i){n<e.line?e.line+=i:t<e.line&&(e.line=t,e.ch=0)}function ho(e,t,n,i){for(var r=0;r<e.length;++r){var o=e[r],a=!0;if(o.ranges){o.copied||((o=e[r]=o.deepCopy()).copied=!0);for(var l=0;l<o.ranges.length;l++)fo(o.ranges[l].anchor,t,n,i),fo(o.ranges[l].head,t,n,i)}else{for(var s=0;s<o.changes.length;++s){var u=o.changes[s];if(n<u.from.line)u.from=Je(u.from.line+i,u.from.ch),u.to=Je(u.to.line+i,u.to.ch);else if(t<=u.to.line){a=!1;break}}a||(e.splice(0,r+1),r=0)}}}function po(e,t){var n=t.from.line,i=t.to.line,r=t.text.length-(i-n)-1;ho(e.done,n,i,r),ho(e.undone,n,i,r)}function go(e,t,n,i){var r=t,o=t;return"number"==typeof t?o=Ve(e,ot(e,t)):r=Ye(t),null==r?null:(i(o,r)&&e.cm&&ui(e.cm,r,n),o)}function vo(e){this.lines=e,this.parent=null;for(var t=0,n=0;n<e.length;++n)e[n].parent=this,t+=e[n].height;this.height=t}function mo(e){this.children=e;for(var t=0,n=0,i=0;i<e.length;++i){var r=e[i];t+=r.chunkSize(),n+=r.height,r.parent=this}this.size=t,this.height=n,this.parent=null}br.prototype.from=function(){return rt(this.anchor,this.head)},br.prototype.to=function(){return it(this.anchor,this.head)},br.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},vo.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,i=e+t;n<i;++n){var r=this.lines[n];this.height-=r.height,Kt(r),ln(r,"delete")}this.lines.splice(e,t)},collapse:function(e){e.push.apply(e,this.lines)},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var i=0;i<t.length;++i)t[i].parent=this},iterN:function(e,t,n){for(var i=e+t;e<i;++e)if(n(this.lines[e]))return!0}},mo.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var i=this.children[n],r=i.chunkSize();if(e<r){var o=Math.min(t,r-e),a=i.height;if(i.removeInner(e,o),this.height-=a-i.height,r==o&&(this.children.splice(n--,1),i.parent=null),0==(t-=o))break;e=0}else e-=r}if(this.size-t<25&&(this.children.length>1||!(this.children[0]instanceof vo))){var l=[];this.collapse(l),this.children=[new vo(l)],this.children[0].parent=this}},collapse:function(e){for(var t=0;t<this.children.length;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<=o){if(r.insertInner(e,t,n),r.lines&&r.lines.length>50){for(var a=r.lines.length%25+25,l=a;l<r.lines.length;){var s=new vo(r.lines.slice(l,l+=25));r.height-=s.height,this.children.splice(++i,0,s),s.parent=this}r.lines=r.lines.slice(0,a),this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new mo(t);if(e.parent){e.size-=n.size,e.height-=n.height;var i=W(e.parent.children,e);e.parent.children.splice(i+1,0,n)}else{var r=new mo(e.children);r.parent=e,e.children=[r,n],e=r}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iterN:function(e,t,n){for(var i=0;i<this.children.length;++i){var r=this.children[i],o=r.chunkSize();if(e<o){var a=Math.min(t,o-e);if(r.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=o}}};var yo=function(e,t,n){if(n)for(var i in n)n.hasOwnProperty(i)&&(this[i]=n[i]);this.doc=e,this.node=t};function bo(e,t,n){Ut(t)<(e.curOp&&e.curOp.scrollTop||e.doc.scrollTop)&&xi(e,n)}yo.prototype.clear=function(){var e=this.doc.cm,t=this.line.widgets,n=this.line,i=Ye(n);if(null!=i&&t){for(var r=0;r<t.length;++r)t[r]==this&&t.splice(r--,1);t.length||(n.widgets=null);var o=_n(this);Ge(n,Math.max(0,n.height-o)),e&&(Yi(e,function(){bo(e,n,-o),ui(e,i,"widget")}),ln(e,"lineWidgetCleared",e,this,i))}},yo.prototype.changed=function(){var e=this,t=this.height,n=this.doc.cm,i=this.line;this.height=null;var r=_n(this)-t;r&&(Wt(this.doc,i)||Ge(i,i.height+r),n&&Yi(n,function(){n.curOp.forceUpdate=!0,bo(n,i,r),ln(n,"lineWidgetChanged",n,e,Ye(i))}))},be(yo);var _o=0,ko=function(e,t){this.lines=[],this.type=t,this.doc=e,this.id=++_o};function wo(e,t,n,i,r){if(i&&i.shared)return function(e,t,n,i,r){(i=D(i)).shared=!1;var o=[wo(e,t,n,i,r)],a=o[0],l=i.widgetNode;return Or(e,function(e){l&&(i.widgetNode=l.cloneNode(!0)),o.push(wo(e,at(e,t),at(e,n),i,r));for(var s=0;s<e.linked.length;++s)if(e.linked[s].isParent)return;a=Y(o)}),new Co(o,a)}(e,t,n,i,r);if(e.cm&&!e.cm.curOp)return Xi(e.cm,wo)(e,t,n,i,r);var o=new ko(e,r),a=et(t,n);if(i&&D(i,o,!1),a>0||0==a&&!1!==o.clearWhenEmpty)return o;if(o.replacedWith&&(o.collapsed=!0,o.widgetNode=O("span",[o.replacedWith],"CodeMirror-widget"),i.handleMouseEvents||o.widgetNode.setAttribute("cm-ignore-events","true"),i.insertLeft&&(o.widgetNode.insertLeft=!0)),o.collapsed){if(Rt(e,t.line,t,n,o)||t.line!=n.line&&Rt(e,n.line,t,n,o))throw new Error("Inserting collapsed marker partially overlapping an existing one");kt=!0}o.addToHistory&&Rr(e,{from:t,to:n,origin:"markText"},e.sel,NaN);var l,s=t.line,u=e.cm;if(e.iter(s,n.line+1,function(e){u&&o.collapsed&&!u.options.lineWrapping&&Dt(e)==u.display.maxLine&&(l=!0),o.collapsed&&s!=t.line&&Ge(e,0),function(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}(e,new wt(o,s==t.line?t.ch:null,s==n.line?n.ch:null)),++s}),o.collapsed&&e.iter(t.line,n.line+1,function(t){Wt(e,t)&&Ge(t,0)}),o.clearOnEnter&&fe(o,"beforeCursorEnter",function(){return o.clear()}),o.readOnly&&(_t=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory()),o.collapsed&&(o.id=++_o,o.atomic=!0),u){if(l&&(u.curOp.updateMaxLine=!0),o.collapsed)si(u,t.line,n.line+1);else if(o.className||o.startStyle||o.endStyle||o.css||o.attributes||o.title)for(var c=t.line;c<=n.line;c++)ui(u,c,"text");o.atomic&&Qr(u.doc),ln(u,"markerAdded",u,o)}return o}ko.prototype.clear=function(){if(!this.explicitlyCleared){var e=this.doc.cm,t=e&&!e.curOp;if(t&&$i(e),ye(this,"clear")){var n=this.find();n&&ln(this,"clear",n.from,n.to)}for(var i=null,r=null,o=0;o<this.lines.length;++o){var a=this.lines[o],l=Ct(a.markedSpans,this);e&&!this.collapsed?ui(e,Ye(a),"text"):e&&(null!=l.to&&(r=Ye(a)),null!=l.from&&(i=Ye(a))),a.markedSpans=St(a.markedSpans,l),null==l.from&&this.collapsed&&!Wt(this.doc,a)&&e&&Ge(a,ei(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var u=Dt(this.lines[s]),c=$t(u);c>e.display.maxLineLength&&(e.display.maxLine=u,e.display.maxLineLength=c,e.display.maxLineChanged=!0)}null!=i&&e&&this.collapsed&&si(e,i,r+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&Qr(e.doc)),e&&ln(e,"markerCleared",e,this,i,r),t&&zi(e),this.parent&&this.parent.clear()}},ko.prototype.find=function(e,t){var n,i;null==e&&"bookmark"==this.type&&(e=1);for(var r=0;r<this.lines.length;++r){var o=this.lines[r],a=Ct(o.markedSpans,this);if(null!=a.from&&(n=Je(t?o:Ye(o),a.from),-1==e))return n;if(null!=a.to&&(i=Je(t?o:Ye(o),a.to),1==e))return i}return n&&{from:n,to:i}},ko.prototype.changed=function(){var e=this,t=this.find(-1,!0),n=this,i=this.doc.cm;t&&i&&Yi(i,function(){var r=t.line,o=Ye(t.line),a=On(i,o);if(a&&(Dn(a),i.curOp.selectionChanged=i.curOp.forceUpdate=!0),i.curOp.updateMaxLine=!0,!Wt(n.doc,r)&&null!=n.height){var l=n.height;n.height=null;var s=_n(n)-l;s&&Ge(r,r.height+s)}ln(i,"markerChanged",i,e)})},ko.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;t.maybeHiddenMarkers&&-1!=W(t.maybeHiddenMarkers,this)||(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},ko.prototype.detachLine=function(e){if(this.lines.splice(W(this.lines,e),1),!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},be(ko);var Co=function(e,t){this.markers=e,this.primary=t;for(var n=0;n<e.length;++n)e[n].parent=this};function So(e){return e.findMarks(Je(e.first,0),e.clipPos(Je(e.lastLine())),function(e){return e.parent})}function To(e){for(var t=function(t){var n=e[t],i=[n.primary.doc];Or(n.primary.doc,function(e){return i.push(e)});for(var r=0;r<n.markers.length;r++){var o=n.markers[r];-1==W(i,o.doc)&&(o.parent=null,n.markers.splice(r--,1))}},n=0;n<e.length;n++)t(n)}Co.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();ln(this,"clear")}},Co.prototype.find=function(e,t){return this.primary.find(e,t)},be(Co);var Eo=0,xo=function e(t,n,i,r,o){if(!(this instanceof e))return new e(t,n,i,r,o);null==i&&(i=0),mo.call(this,[new vo([new Vt("",null)])]),this.first=i,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=i;var a=Je(i,0);this.sel=kr(a),this.history=new Pr(null),this.id=++Eo,this.modeOption=n,this.lineSep=r,this.direction="rtl"==o?"rtl":"ltr",this.extend=!1,"string"==typeof t&&(t=this.splitLines(t)),Lr(this,{from:a,to:a,text:t}),Yr(this,kr(a),$)};xo.prototype=Q(mo.prototype,{constructor:xo,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){for(var n=0,i=0;i<t.length;++i)n+=t[i].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=qe(this,this.first,this.first+this.size);return!1===e?t:t.join(e||this.lineSeparator())},setValue:Qi(function(e){var t=Je(this.first,0),n=this.first+this.size-1;oo(this,{from:t,to:Je(n,Ve(this,n).text.length),text:this.splitLines(e),origin:"setValue",full:!0},!0),this.cm&&Li(this.cm,0,0),Yr(this,kr(t),$)}),replaceRange:function(e,t,n,i){t=at(this,t),n=n?at(this,n):t,co(this,e,t,n,i)},getRange:function(e,t,n){var i=Ke(this,at(this,e),at(this,t));return!1===n?i:i.join(n||this.lineSeparator())},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},getLineHandle:function(e){if(Ze(this,e))return Ve(this,e)},getLineNumber:function(e){return Ye(e)},getLineHandleVisualStart:function(e){return"number"==typeof e&&(e=Ve(this,e)),Dt(e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return at(this,e)},getCursor:function(e){var t=this.sel.primary();return null==e||"head"==e?t.head:"anchor"==e?t.anchor:"end"==e||"to"==e||!1===e?t.to():t.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:Qi(function(e,t,n){qr(this,at(this,"number"==typeof e?Je(e,t||0):e),null,n)}),setSelection:Qi(function(e,t,n){qr(this,at(this,e),at(this,t||e),n)}),extendSelection:Qi(function(e,t,n){zr(this,at(this,e),t&&at(this,t),n)}),extendSelections:Qi(function(e,t){Vr(this,lt(this,e),t)}),extendSelectionsBy:Qi(function(e,t){var n=X(this.sel.ranges,e);Vr(this,lt(this,n),t)}),setSelections:Qi(function(e,t,n){if(e.length){for(var i=[],r=0;r<e.length;r++)i[r]=new br(at(this,e[r].anchor),at(this,e[r].head));null==t&&(t=Math.min(e.length-1,this.sel.primIndex)),Yr(this,_r(this.cm,i,t),n)}}),addSelection:Qi(function(e,t,n){var i=this.sel.ranges.slice(0);i.push(new br(at(this,e),at(this,t||e))),Yr(this,_r(this.cm,i,i.length-1),n)}),getSelection:function(e){for(var t,n=this.sel.ranges,i=0;i<n.length;i++){var r=Ke(this,n[i].from(),n[i].to());t=t?t.concat(r):r}return!1===e?t:t.join(e||this.lineSeparator())},getSelections:function(e){for(var t=[],n=this.sel.ranges,i=0;i<n.length;i++){var r=Ke(this,n[i].from(),n[i].to());!1!==e&&(r=r.join(e||this.lineSeparator())),t[i]=r}return t},replaceSelection:function(e,t,n){for(var i=[],r=0;r<this.sel.ranges.length;r++)i[r]=e;this.replaceSelections(i,t,n||"+input")},replaceSelections:Qi(function(e,t,n){for(var i=[],r=this.sel,o=0;o<r.ranges.length;o++){var a=r.ranges[o];i[o]={from:a.from(),to:a.to(),text:this.splitLines(e[o]),origin:n}}for(var l=t&&"end"!=t&&function(e,t,n){for(var i=[],r=Je(e.first,0),o=r,a=0;a<t.length;a++){var l=t[a],s=Tr(l.from,r,o),u=Tr(wr(l),r,o);if(r=l.to,o=u,"around"==n){var c=e.sel.ranges[a],d=et(c.head,c.anchor)<0;i[a]=new br(d?u:s,d?s:u)}else i[a]=new br(s,s)}return new yr(i,e.sel.primIndex)}(this,i,t),s=i.length-1;s>=0;s--)oo(this,i[s]);l?Gr(this,l):this.cm&&Mi(this.cm)}),undo:Qi(function(){lo(this,"undo")}),redo:Qi(function(){lo(this,"redo")}),undoSelection:Qi(function(){lo(this,"undo",!0)}),redoSelection:Qi(function(){lo(this,"redo",!0)}),setExtending:function(e){this.extend=e},getExtending:function(){return this.extend},historySize:function(){for(var e=this.history,t=0,n=0,i=0;i<e.done.length;i++)e.done[i].ranges||++t;for(var r=0;r<e.undone.length;r++)e.undone[r].ranges||++n;return{undo:t,redo:n}},clearHistory:function(){this.history=new Pr(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(e){return e&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ur(this.history.done),undone:Ur(this.history.undone)}},setHistory:function(e){var t=this.history=new Pr(this.history.maxGeneration);t.done=Ur(e.done.slice(0),null,!0),t.undone=Ur(e.undone.slice(0),null,!0)},setGutterMarker:Qi(function(e,t,n){return go(this,e,"gutter",function(e){var i=e.gutterMarkers||(e.gutterMarkers={});return i[t]=n,!n&&ne(i)&&(e.gutterMarkers=null),!0})}),clearGutter:Qi(function(e){var t=this;this.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&go(t,n,"gutter",function(){return n.gutterMarkers[e]=null,ne(n.gutterMarkers)&&(n.gutterMarkers=null),!0})})}),lineInfo:function(e){var t;if("number"==typeof e){if(!Ze(this,e))return null;if(t=e,!(e=Ve(this,e)))return null}else if(null==(t=Ye(e)))return null;return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},addLineClass:Qi(function(e,t,n){return go(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass";if(e[i]){if(S(n).test(e[i]))return!1;e[i]+=" "+n}else e[i]=n;return!0})}),removeLineClass:Qi(function(e,t,n){return go(this,e,"gutter"==t?"gutter":"class",function(e){var i="text"==t?"textClass":"background"==t?"bgClass":"gutter"==t?"gutterClass":"wrapClass",r=e[i];if(!r)return!1;if(null==n)e[i]=null;else{var o=r.match(S(n));if(!o)return!1;var a=o.index+o[0].length;e[i]=r.slice(0,o.index)+(o.index&&a!=r.length?" ":"")+r.slice(a)||null}return!0})}),addLineWidget:Qi(function(e,t,n){return function(e,t,n,i){var r=new yo(e,n,i),o=e.cm;return o&&r.noHScroll&&(o.display.alignWidgets=!0),go(e,t,"widget",function(t){var n=t.widgets||(t.widgets=[]);if(null==r.insertAt?n.push(r):n.splice(Math.min(n.length-1,Math.max(0,r.insertAt)),0,r),r.line=t,o&&!Wt(e,t)){var i=Ut(t)<e.scrollTop;Ge(t,t.height+_n(r)),i&&xi(o,r.height),o.curOp.forceUpdate=!0}return!0}),o&&ln(o,"lineWidgetAdded",o,r,"number"==typeof t?t:Ye(t)),r}(this,e,t,n)}),removeLineWidget:function(e){e.clear()},markText:function(e,t,n){return wo(this,at(this,e),at(this,t),n,n&&n.type||"range")},setBookmark:function(e,t){var n={replacedWith:t&&(null==t.nodeType?t.widget:t),insertLeft:t&&t.insertLeft,clearWhenEmpty:!1,shared:t&&t.shared,handleMouseEvents:t&&t.handleMouseEvents};return wo(this,e=at(this,e),e,n,"bookmark")},findMarksAt:function(e){e=at(this,e);var t=[],n=Ve(this,e.line).markedSpans;if(n)for(var i=0;i<n.length;++i){var r=n[i];(null==r.from||r.from<=e.ch)&&(null==r.to||r.to>=e.ch)&&t.push(r.marker.parent||r.marker)}return t},findMarks:function(e,t,n){e=at(this,e),t=at(this,t);var i=[],r=e.line;return this.iter(e.line,t.line+1,function(o){var a=o.markedSpans;if(a)for(var l=0;l<a.length;l++){var s=a[l];null!=s.to&&r==e.line&&e.ch>=s.to||null==s.from&&r!=e.line||null!=s.from&&r==t.line&&s.from>=t.ch||n&&!n(s.marker)||i.push(s.marker.parent||s.marker)}++r}),i},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var i=0;i<n.length;++i)null!=n[i].from&&e.push(n[i].marker)}),e},posFromIndex:function(e){var t,n=this.first,i=this.lineSeparator().length;return this.iter(function(r){var o=r.text.length+i;if(o>e)return t=e,!0;e-=o,++n}),at(this,Je(n,t))},indexFromPos:function(e){var t=(e=at(this,e)).ch;if(e.line<this.first||e.ch<0)return 0;var n=this.lineSeparator().length;return this.iter(this.first,e.line,function(e){t+=e.text.length+n}),t},copy:function(e){var t=new xo(qe(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel=this.sel,t.extend=!1,e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;null!=e.from&&e.from>t&&(t=e.from),null!=e.to&&e.to<n&&(n=e.to);var i=new xo(qe(this,t,n),e.mode||this.modeOption,t,this.lineSep,this.direction);return e.sharedHist&&(i.history=this.history),(this.linked||(this.linked=[])).push({doc:i,sharedHist:e.sharedHist}),i.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],function(e,t){for(var n=0;n<t.length;n++){var i=t[n],r=i.find(),o=e.clipPos(r.from),a=e.clipPos(r.to);if(et(o,a)){var l=wo(e,o,a,i.primary,i.primary.type);i.markers.push(l),l.parent=i}}}(i,So(this)),i},unlinkDoc:function(e){if(e instanceof Ca&&(e=e.doc),this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc==e){this.linked.splice(t,1),e.unlinkDoc(this),To(So(this));break}}if(e.history==this.history){var i=[e.id];Or(e,function(e){return i.push(e.id)},!0),e.history=new Pr(null),e.history.done=Ur(this.history.done,i),e.history.undone=Ur(this.history.undone,i)}},iterLinkedDocs:function(e){Or(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(e){return this.lineSep?e.split(this.lineSep):Ne(e)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:Qi(function(e){var t;"rtl"!=e&&(e="ltr"),e!=this.direction&&(this.direction=e,this.iter(function(e){return e.order=null}),this.cm&&Yi(t=this.cm,function(){Ar(t),si(t)}))})}),xo.prototype.eachLine=xo.prototype.iter;var Mo=0;function Lo(e){var t=this;if(Oo(t),!ve(t,e)&&!kn(t.display,e)){_e(e),a&&(Mo=+new Date);var n=ai(t,e,!0),i=e.dataTransfer.files;if(n&&!t.isReadOnly())if(i&&i.length&&window.FileReader&&window.File)for(var r=i.length,o=Array(r),l=0,s=function(e,i){if(!t.options.allowDropFileTypes||-1!=W(t.options.allowDropFileTypes,e.type)){var a=new FileReader;a.onload=Xi(t,function(){var e=a.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(e)&&(e=""),o[i]=e,++l==r){var s={from:n=at(t.doc,n),to:n,text:t.doc.splitLines(o.join(t.doc.lineSeparator())),origin:"paste"};oo(t.doc,s),Gr(t.doc,kr(n,wr(s)))}}),a.readAsText(e)}},u=0;u<r;++u)s(i[u],u);else{if(t.state.draggingText&&t.doc.sel.contains(n)>-1)return t.state.draggingText(e),void setTimeout(function(){return t.display.input.focus()},20);try{var c=e.dataTransfer.getData("Text");if(c){var d;if(t.state.draggingText&&!t.state.draggingText.copy&&(d=t.listSelections()),Xr(t.doc,kr(n,n)),d)for(var f=0;f<d.length;++f)co(t.doc,"",d[f].anchor,d[f].head,"drag");t.replaceSelection(c,"around","paste"),t.display.input.focus()}}catch(e){}}}}function Oo(e){e.display.dragCursor&&(e.display.lineSpace.removeChild(e.display.dragCursor),e.display.dragCursor=null)}function No(e){if(document.getElementsByClassName){for(var t=document.getElementsByClassName("CodeMirror"),n=[],i=0;i<t.length;i++){var r=t[i].CodeMirror;r&&n.push(r)}n.length&&n[0].operation(function(){for(var t=0;t<n.length;t++)e(n[t])})}}var Ao=!1;function Po(){Ao||(function(){var e;fe(window,"resize",function(){null==e&&(e=setTimeout(function(){e=null,No(Io)},100))}),fe(window,"blur",function(){return No(wi)})}(),Ao=!0)}function Io(e){var t=e.display;t.cachedCharWidth=t.cachedTextHeight=t.cachedPaddingH=null,t.scrollbarsClipped=!1,e.setSize()}for(var Bo={3:"Pause",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",145:"ScrollLock",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Ro=0;Ro<10;Ro++)Bo[Ro+48]=Bo[Ro+96]=String(Ro);for(var Do=65;Do<=90;Do++)Bo[Do]=String.fromCharCode(Do);for(var Ho=1;Ho<=12;Ho++)Bo[Ho+111]=Bo[Ho+63235]="F"+Ho;var Fo={};function Wo(e){var t,n,i,r,o=e.split(/-(?!$)/);e=o[o.length-1];for(var a=0;a<o.length-1;a++){var l=o[a];if(/^(cmd|meta|m)$/i.test(l))r=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))n=!0;else{if(!/^s(hift)?$/i.test(l))throw new Error("Unrecognized modifier name: "+l);i=!0}}return t&&(e="Alt-"+e),n&&(e="Ctrl-"+e),r&&(e="Cmd-"+e),i&&(e="Shift-"+e),e}function jo(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];if(/^(name|fallthrough|(de|at)tach)$/.test(n))continue;if("..."==i){delete e[n];continue}for(var r=X(n.split(" "),Wo),o=0;o<r.length;o++){var a=void 0,l=void 0;o==r.length-1?(l=r.join(" "),a=i):(l=r.slice(0,o+1).join(" "),a="...");var s=t[l];if(s){if(s!=a)throw new Error("Inconsistent bindings for "+l)}else t[l]=a}delete e[n]}for(var u in t)e[u]=t[u];return e}function Uo(e,t,n,i){var r=(t=Ko(t)).call?t.call(e,i):t[e];if(!1===r)return"nothing";if("..."===r)return"multi";if(null!=r&&n(r))return"handled";if(t.fallthrough){if("[object Array]"!=Object.prototype.toString.call(t.fallthrough))return Uo(e,t.fallthrough,n,i);for(var o=0;o<t.fallthrough.length;o++){var a=Uo(e,t.fallthrough[o],n,i);if(a)return a}}}function $o(e){var t="string"==typeof e?e:Bo[e.keyCode];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function zo(e,t,n){var i=e;return t.altKey&&"Alt"!=i&&(e="Alt-"+e),(w?t.metaKey:t.ctrlKey)&&"Ctrl"!=i&&(e="Ctrl-"+e),(w?t.ctrlKey:t.metaKey)&&"Cmd"!=i&&(e="Cmd-"+e),!n&&t.shiftKey&&"Shift"!=i&&(e="Shift-"+e),e}function Vo(e,t){if(d&&34==e.keyCode&&e.char)return!1;var n=Bo[e.keyCode];return null!=n&&!e.altGraphKey&&(3==e.keyCode&&e.code&&(n=e.code),zo(n,e,t))}function Ko(e){return"string"==typeof e?Fo[e]:e}function qo(e,t){for(var n=e.doc.sel.ranges,i=[],r=0;r<n.length;r++){for(var o=t(n[r]);i.length&&et(o.from,Y(i).to)<=0;){var a=i.pop();if(et(a.from,o.from)<0){o.from=a.from;break}}i.push(o)}Yi(e,function(){for(var t=i.length-1;t>=0;t--)co(e.doc,"",i[t].from,i[t].to,"+delete");Mi(e)})}function Go(e,t,n){var i=oe(e.text,t+n,n);return i<0||i>e.text.length?null:i}function Yo(e,t,n){var i=Go(e,t.ch,n);return null==i?null:new Je(t.line,i,n<0?"after":"before")}function Xo(e,t,n,i,r){if(e){var o=ce(n,t.doc.direction);if(o){var a,l=r<0?Y(o):o[0],s=r<0==(1==l.level),u=s?"after":"before";if(l.level>0||"rtl"==t.doc.direction){var c=Nn(t,n);a=r<0?n.text.length-1:0;var d=An(t,c,a).top;a=ae(function(e){return An(t,c,e).top==d},r<0==(1==l.level)?l.from:l.to-1,a),"before"==u&&(a=Go(n,a,1))}else a=r<0?l.to:l.from;return new Je(i,a,u)}}return new Je(i,r<0?n.text.length:0,r<0?"before":"after")}Fo.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Fo.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Fo.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Fo.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Fo.default=y?Fo.macDefault:Fo.pcDefault;var Zo={selectAll:io,singleSelection:function(e){return e.setSelection(e.getCursor("anchor"),e.getCursor("head"),$)},killLine:function(e){return qo(e,function(t){if(t.empty()){var n=Ve(e.doc,t.head.line).text.length;return t.head.ch==n&&t.head.line<e.lastLine()?{from:t.head,to:Je(t.head.line+1,0)}:{from:t.head,to:Je(t.head.line,n)}}return{from:t.from(),to:t.to()}})},deleteLine:function(e){return qo(e,function(t){return{from:Je(t.from().line,0),to:at(e.doc,Je(t.to().line+1,0))}})},delLineLeft:function(e){return qo(e,function(e){return{from:Je(e.from().line,0),to:e.from()}})},delWrappedLineLeft:function(e){return qo(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return{from:i,to:t.from()}})},delWrappedLineRight:function(e){return qo(e,function(t){var n=e.charCoords(t.head,"div").top+5,i=e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div");return{from:t.from(),to:i}})},undo:function(e){return e.undo()},redo:function(e){return e.redo()},undoSelection:function(e){return e.undoSelection()},redoSelection:function(e){return e.redoSelection()},goDocStart:function(e){return e.extendSelection(Je(e.firstLine(),0))},goDocEnd:function(e){return e.extendSelection(Je(e.lastLine()))},goLineStart:function(e){return e.extendSelectionsBy(function(t){return Qo(e,t.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(e){return e.extendSelectionsBy(function(t){return Jo(e,t.head)},{origin:"+move",bias:1})},goLineEnd:function(e){return e.extendSelectionsBy(function(t){return function(e,t){var n=Ve(e.doc,t),i=function(e){for(var t;t=It(e);)e=t.find(1,!0).line;return e}(n);return i!=n&&(t=Ye(i)),Xo(!0,e,n,t,-1)}(e,t.head.line)},{origin:"+move",bias:-1})},goLineRight:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:n},"div")},V)},goLineLeft:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5;return e.coordsChar({left:0,top:n},"div")},V)},goLineLeftSmart:function(e){return e.extendSelectionsBy(function(t){var n=e.cursorCoords(t.head,"div").top+5,i=e.coordsChar({left:0,top:n},"div");return i.ch<e.getLine(i.line).search(/\S/)?Jo(e,t.head):i},V)},goLineUp:function(e){return e.moveV(-1,"line")},goLineDown:function(e){return e.moveV(1,"line")},goPageUp:function(e){return e.moveV(-1,"page")},goPageDown:function(e){return e.moveV(1,"page")},goCharLeft:function(e){return e.moveH(-1,"char")},goCharRight:function(e){return e.moveH(1,"char")},goColumnLeft:function(e){return e.moveH(-1,"column")},goColumnRight:function(e){return e.moveH(1,"column")},goWordLeft:function(e){return e.moveH(-1,"word")},goGroupRight:function(e){return e.moveH(1,"group")},goGroupLeft:function(e){return e.moveH(-1,"group")},goWordRight:function(e){return e.moveH(1,"word")},delCharBefore:function(e){return e.deleteH(-1,"char")},delCharAfter:function(e){return e.deleteH(1,"char")},delWordBefore:function(e){return e.deleteH(-1,"word")},delWordAfter:function(e){return e.deleteH(1,"word")},delGroupBefore:function(e){return e.deleteH(-1,"group")},delGroupAfter:function(e){return e.deleteH(1,"group")},indentAuto:function(e){return e.indentSelection("smart")},indentMore:function(e){return e.indentSelection("add")},indentLess:function(e){return e.indentSelection("subtract")},insertTab:function(e){return e.replaceSelection("\t")},insertSoftTab:function(e){for(var t=[],n=e.listSelections(),i=e.options.tabSize,r=0;r<n.length;r++){var o=n[r].from(),a=H(e.getLine(o.line),o.ch,i);t.push(G(i-a%i))}e.replaceSelections(t)},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.execCommand("insertTab")},transposeChars:function(e){return Yi(e,function(){for(var t=e.listSelections(),n=[],i=0;i<t.length;i++)if(t[i].empty()){var r=t[i].head,o=Ve(e.doc,r.line).text;if(o)if(r.ch==o.length&&(r=new Je(r.line,r.ch-1)),r.ch>0)r=new Je(r.line,r.ch+1),e.replaceRange(o.charAt(r.ch-1)+o.charAt(r.ch-2),Je(r.line,r.ch-2),r,"+transpose");else if(r.line>e.doc.first){var a=Ve(e.doc,r.line-1).text;a&&(r=new Je(r.line,1),e.replaceRange(o.charAt(0)+e.doc.lineSeparator()+a.charAt(a.length-1),Je(r.line-1,a.length-1),r,"+transpose"))}n.push(new br(r,r))}e.setSelections(n)})},newlineAndIndent:function(e){return Yi(e,function(){for(var t=e.listSelections(),n=t.length-1;n>=0;n--)e.replaceRange(e.doc.lineSeparator(),t[n].anchor,t[n].head,"+input");t=e.listSelections();for(var i=0;i<t.length;i++)e.indentLine(t[i].from().line,null,!0);Mi(e)})},openLine:function(e){return e.replaceSelection("\n","start")},toggleOverwrite:function(e){return e.toggleOverwrite()}};function Qo(e,t){var n=Ve(e.doc,t),i=Dt(n);return i!=n&&(t=Ye(i)),Xo(!0,e,i,t,1)}function Jo(e,t){var n=Qo(e,t.line),i=Ve(e.doc,n.line),r=ce(i,e.doc.direction);if(!r||0==r[0].level){var o=Math.max(0,i.text.search(/\S/)),a=t.line==n.line&&t.ch<=o&&t.ch;return Je(n.line,a?0:o,n.sticky)}return n}function ea(e,t,n){if("string"==typeof t&&!(t=Zo[t]))return!1;e.display.input.ensurePolled();var i=e.display.shift,r=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),n&&(e.display.shift=!1),r=t(e)!=U}finally{e.display.shift=i,e.state.suppressEdits=!1}return r}var ta=new F;function na(e,t,n,i){var r=e.state.keySeq;if(r){if($o(t))return"handled";if(/\'$/.test(t)?e.state.keySeq=null:ta.set(50,function(){e.state.keySeq==r&&(e.state.keySeq=null,e.display.input.reset())}),ia(e,r+" "+t,n,i))return!0}return ia(e,t,n,i)}function ia(e,t,n,i){var r=function(e,t,n){for(var i=0;i<e.state.keyMaps.length;i++){var r=Uo(t,e.state.keyMaps[i],n,e);if(r)return r}return e.options.extraKeys&&Uo(t,e.options.extraKeys,n,e)||Uo(t,e.options.keyMap,n,e)}(e,t,i);return"multi"==r&&(e.state.keySeq=t),"handled"==r&&ln(e,"keyHandled",e,t,n),"handled"!=r&&"multi"!=r||(_e(n),yi(e)),!!r}function ra(e,t){var n=Vo(t,!0);return!!n&&(t.shiftKey&&!e.state.keySeq?na(e,"Shift-"+n,t,function(t){return ea(e,t,!0)})||na(e,n,t,function(t){if("string"==typeof t?/^go[A-Z]/.test(t):t.motion)return ea(e,t)}):na(e,n,t,function(t){return ea(e,t)}))}var oa=null;function aa(e){var t=this;if(t.curOp.focus=A(),!ve(t,e)){a&&l<11&&27==e.keyCode&&(e.returnValue=!1);var n=e.keyCode;t.display.shift=16==n||e.shiftKey;var i=ra(t,e);d&&(oa=i?n:null,!i&&88==n&&!Pe&&(y?e.metaKey:e.ctrlKey)&&t.replaceSelection("",null,"cut")),18!=n||/\bCodeMirror-crosshair\b/.test(t.display.lineDiv.className)||function(e){var t=e.display.lineDiv;function n(e){18!=e.keyCode&&e.altKey||(E(t,"CodeMirror-crosshair"),pe(document,"keyup",n),pe(document,"mouseover",n))}P(t,"CodeMirror-crosshair"),fe(document,"keyup",n),fe(document,"mouseover",n)}(t)}}function la(e){16==e.keyCode&&(this.doc.sel.shift=!1),ve(this,e)}function sa(e){var t=this;if(!(kn(t.display,e)||ve(t,e)||e.ctrlKey&&!e.altKey||y&&e.metaKey)){var n=e.keyCode,i=e.charCode;if(d&&n==oa)return oa=null,void _e(e);if(!d||e.which&&!(e.which<10)||!ra(t,e)){var r=String.fromCharCode(null==i?n:i);"\b"!=r&&(function(e,t,n){return na(e,"'"+n+"'",t,function(t){return ea(e,t,!0)})}(t,e,r)||t.display.input.onKeyPress(e))}}}var ua,ca,da=function(e,t,n){this.time=e,this.pos=t,this.button=n};function fa(e){var t=this,n=t.display;if(!(ve(t,e)||n.activeTouch&&n.input.supportsTouch()))if(n.input.ensurePolled(),n.shift=e.shiftKey,kn(n,e))s||(n.scroller.draggable=!1,setTimeout(function(){return n.scroller.draggable=!0},100));else if(!ga(t,e)){var i=ai(t,e),r=Te(e),o=i?function(e,t){var n=+new Date;return ca&&ca.compare(n,e,t)?(ua=ca=null,"triple"):ua&&ua.compare(n,e,t)?(ca=new da(n,e,t),ua=null,"double"):(ua=new da(n,e,t),ca=null,"single")}(i,r):"single";window.focus(),1==r&&t.state.selectingText&&t.state.selectingText(e),i&&function(e,t,n,i,r){var o="Click";return"double"==i?o="Double"+o:"triple"==i&&(o="Triple"+o),na(e,zo(o=(1==t?"Left":2==t?"Middle":"Right")+o,r),r,function(t){if("string"==typeof t&&(t=Zo[t]),!t)return!1;var i=!1;try{e.isReadOnly()&&(e.state.suppressEdits=!0),i=t(e,n)!=U}finally{e.state.suppressEdits=!1}return i})}(t,r,i,o,e)||(1==r?i?function(e,t,n,i){a?setTimeout(R(bi,e),0):e.curOp.focus=A();var r,o=function(e,t,n){var i=e.getOption("configureMouse"),r=i?i(e,t,n):{};if(null==r.unit){var o=b?n.shiftKey&&n.metaKey:n.altKey;r.unit=o?"rectangle":"single"==t?"char":"double"==t?"word":"line"}return(null==r.extend||e.doc.extend)&&(r.extend=e.doc.extend||n.shiftKey),null==r.addNew&&(r.addNew=y?n.metaKey:n.ctrlKey),null==r.moveOnDrag&&(r.moveOnDrag=!(y?n.altKey:n.ctrlKey)),r}(e,n,i),u=e.doc.sel;e.options.dragDrop&&Me&&!e.isReadOnly()&&"single"==n&&(r=u.contains(t))>-1&&(et((r=u.ranges[r]).from(),t)<0||t.xRel>0)&&(et(r.to(),t)>0||t.xRel<0)?function(e,t,n,i){var r=e.display,o=!1,u=Xi(e,function(t){s&&(r.scroller.draggable=!1),e.state.draggingText=!1,pe(r.wrapper.ownerDocument,"mouseup",u),pe(r.wrapper.ownerDocument,"mousemove",c),pe(r.scroller,"dragstart",d),pe(r.scroller,"drop",u),o||(_e(t),i.addNew||zr(e.doc,n,null,null,i.extend),s||a&&9==l?setTimeout(function(){r.wrapper.ownerDocument.body.focus(),r.input.focus()},20):r.input.focus())}),c=function(e){o=o||Math.abs(t.clientX-e.clientX)+Math.abs(t.clientY-e.clientY)>=10},d=function(){return o=!0};s&&(r.scroller.draggable=!0),e.state.draggingText=u,u.copy=!i.moveOnDrag,r.scroller.dragDrop&&r.scroller.dragDrop(),fe(r.wrapper.ownerDocument,"mouseup",u),fe(r.wrapper.ownerDocument,"mousemove",c),fe(r.scroller,"dragstart",d),fe(r.scroller,"drop",u),_i(e),setTimeout(function(){return r.input.focus()},20)}(e,i,t,o):function(e,t,n,i){var r=e.display,o=e.doc;_e(t);var a,l,s=o.sel,u=s.ranges;if(i.addNew&&!i.extend?(l=o.sel.contains(n),a=l>-1?u[l]:new br(n,n)):(a=o.sel.primary(),l=o.sel.primIndex),"rectangle"==i.unit)i.addNew||(a=new br(n,n)),n=ai(e,t,!0,!0),l=-1;else{var c=ha(e,n,i.unit);a=i.extend?$r(a,c.anchor,c.head,i.extend):c}i.addNew?-1==l?(l=u.length,Yr(o,_r(e,u.concat([a]),l),{scroll:!1,origin:"*mouse"})):u.length>1&&u[l].empty()&&"char"==i.unit&&!i.extend?(Yr(o,_r(e,u.slice(0,l).concat(u.slice(l+1)),0),{scroll:!1,origin:"*mouse"}),s=o.sel):Kr(o,l,a,z):(l=0,Yr(o,new yr([a],0),z),s=o.sel);var d=n;function f(t){if(0!=et(d,t))if(d=t,"rectangle"==i.unit){for(var r=[],u=e.options.tabSize,c=H(Ve(o,n.line).text,n.ch,u),f=H(Ve(o,t.line).text,t.ch,u),h=Math.min(c,f),p=Math.max(c,f),g=Math.min(n.line,t.line),v=Math.min(e.lastLine(),Math.max(n.line,t.line));g<=v;g++){var m=Ve(o,g).text,y=K(m,h,u);h==p?r.push(new br(Je(g,y),Je(g,y))):m.length>y&&r.push(new br(Je(g,y),Je(g,K(m,p,u))))}r.length||r.push(new br(n,n)),Yr(o,_r(e,s.ranges.slice(0,l).concat(r),l),{origin:"*mouse",scroll:!1}),e.scrollIntoView(t)}else{var b,_=a,k=ha(e,t,i.unit),w=_.anchor;et(k.anchor,w)>0?(b=k.head,w=rt(_.from(),k.anchor)):(b=k.anchor,w=it(_.to(),k.head));var C=s.ranges.slice(0);C[l]=function(e,t){var n=t.anchor,i=t.head,r=Ve(e.doc,n.line);if(0==et(n,i)&&n.sticky==i.sticky)return t;var o=ce(r);if(!o)return t;var a=se(o,n.ch,n.sticky),l=o[a];if(l.from!=n.ch&&l.to!=n.ch)return t;var s,u=a+(l.from==n.ch==(1!=l.level)?0:1);if(0==u||u==o.length)return t;if(i.line!=n.line)s=(i.line-n.line)*("ltr"==e.doc.direction?1:-1)>0;else{var c=se(o,i.ch,i.sticky),d=c-a||(i.ch-n.ch)*(1==l.level?-1:1);s=c==u-1||c==u?d<0:d>0}var f=o[u+(s?-1:0)],h=s==(1==f.level),p=h?f.from:f.to,g=h?"after":"before";return n.ch==p&&n.sticky==g?t:new br(new Je(n.line,p,g),i)}(e,new br(at(o,w),b)),Yr(o,_r(e,C,l),z)}}var h=r.wrapper.getBoundingClientRect(),p=0;function g(t){e.state.selectingText=!1,p=1/0,t&&(_e(t),r.input.focus()),pe(r.wrapper.ownerDocument,"mousemove",v),pe(r.wrapper.ownerDocument,"mouseup",m),o.history.lastSelOrigin=null}var v=Xi(e,function(t){0!==t.buttons&&Te(t)?function t(n){var a=++p,l=ai(e,n,!0,"rectangle"==i.unit);if(l)if(0!=et(l,d)){e.curOp.focus=A(),f(l);var s=Ti(r,o);(l.line>=s.to||l.line<s.from)&&setTimeout(Xi(e,function(){p==a&&t(n)}),150)}else{var u=n.clientY<h.top?-20:n.clientY>h.bottom?20:0;u&&setTimeout(Xi(e,function(){p==a&&(r.scroller.scrollTop+=u,t(n))}),50)}}(t):g(t)}),m=Xi(e,g);e.state.selectingText=m,fe(r.wrapper.ownerDocument,"mousemove",v),fe(r.wrapper.ownerDocument,"mouseup",m)}(e,i,t,o)}(t,i,o,e):Se(e)==n.scroller&&_e(e):2==r?(i&&zr(t.doc,i),setTimeout(function(){return n.input.focus()},20)):3==r&&(C?t.display.input.onContextMenu(e):_i(t)))}}function ha(e,t,n){if("char"==n)return new br(t,t);if("word"==n)return e.findWordAt(t);if("line"==n)return new br(Je(t.line,0),at(e.doc,Je(t.line+1,0)));var i=n(e,t);return new br(i.from,i.to)}function pa(e,t,n,i){var r,o;if(t.touches)r=t.touches[0].clientX,o=t.touches[0].clientY;else try{r=t.clientX,o=t.clientY}catch(t){return!1}if(r>=Math.floor(e.display.gutters.getBoundingClientRect().right))return!1;i&&_e(t);var a=e.display,l=a.lineDiv.getBoundingClientRect();if(o>l.bottom||!ye(e,n))return we(t);o-=l.top-a.viewOffset;for(var s=0;s<e.display.gutterSpecs.length;++s){var u=a.gutters.childNodes[s];if(u&&u.getBoundingClientRect().right>=r){var c=Xe(e.doc,o),d=e.display.gutterSpecs[s];return ge(e,n,e,c,d.className,t),we(t)}}}function ga(e,t){return pa(e,t,"gutterClick",!0)}function va(e,t){kn(e.display,t)||function(e,t){return!!ye(e,"gutterContextMenu")&&pa(e,t,"gutterContextMenu",!1)}(e,t)||ve(e,t,"contextmenu")||C||e.display.input.onContextMenu(t)}function ma(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),Fn(e)}da.prototype.compare=function(e,t,n){return this.time+400>e&&0==et(t,this.pos)&&n==this.button};var ya={toString:function(){return"CodeMirror.Init"}},ba={},_a={};function ka(e,t,n){var i=n&&n!=ya;if(!t!=!i){var r=e.display.dragFunctions,o=t?fe:pe;o(e.display.scroller,"dragstart",r.start),o(e.display.scroller,"dragenter",r.enter),o(e.display.scroller,"dragover",r.over),o(e.display.scroller,"dragleave",r.leave),o(e.display.scroller,"drop",r.drop)}}function wa(e){e.options.lineWrapping?(P(e.display.wrapper,"CodeMirror-wrap"),e.display.sizer.style.minWidth="",e.display.sizerWidth=null):(E(e.display.wrapper,"CodeMirror-wrap"),zt(e)),oi(e),si(e),Fn(e),setTimeout(function(){return Hi(e)},100)}function Ca(e,t){var n=this;if(!(this instanceof Ca))return new Ca(e,t);this.options=t=t?D(t):{},D(ba,t,!1);var i=t.value;"string"==typeof i?i=new xo(i,t.mode,null,t.lineSeparator,t.direction):t.mode&&(i.modeOption=t.mode),this.doc=i;var r=new Ca.inputStyles[t.inputStyle](this),o=this.display=new fr(e,i,r,t);for(var u in o.wrapper.CodeMirror=this,ma(this),t.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),ji(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:-1,cutIncoming:-1,selectingText:!1,draggingText:!1,highlight:new F,keySeq:null,specialChars:null},t.autofocus&&!m&&o.input.focus(),a&&l<11&&setTimeout(function(){return n.display.input.reset(!0)},20),function(e){var t=e.display;fe(t.scroller,"mousedown",Xi(e,fa)),fe(t.scroller,"dblclick",a&&l<11?Xi(e,function(t){if(!ve(e,t)){var n=ai(e,t);if(n&&!ga(e,t)&&!kn(e.display,t)){_e(t);var i=e.findWordAt(n);zr(e.doc,i.anchor,i.head)}}}):function(t){return ve(e,t)||_e(t)}),fe(t.scroller,"contextmenu",function(t){return va(e,t)});var n,i={end:0};function r(){t.activeTouch&&(n=setTimeout(function(){return t.activeTouch=null},1e3),(i=t.activeTouch).end=+new Date)}function o(e,t){if(null==t.left)return!0;var n=t.left-e.left,i=t.top-e.top;return n*n+i*i>400}fe(t.scroller,"touchstart",function(r){if(!ve(e,r)&&!function(e){if(1!=e.touches.length)return!1;var t=e.touches[0];return t.radiusX<=1&&t.radiusY<=1}(r)&&!ga(e,r)){t.input.ensurePolled(),clearTimeout(n);var o=+new Date;t.activeTouch={start:o,moved:!1,prev:o-i.end<=300?i:null},1==r.touches.length&&(t.activeTouch.left=r.touches[0].pageX,t.activeTouch.top=r.touches[0].pageY)}}),fe(t.scroller,"touchmove",function(){t.activeTouch&&(t.activeTouch.moved=!0)}),fe(t.scroller,"touchend",function(n){var i=t.activeTouch;if(i&&!kn(t,n)&&null!=i.left&&!i.moved&&new Date-i.start<300){var a,l=e.coordsChar(t.activeTouch,"page");a=!i.prev||o(i,i.prev)?new br(l,l):!i.prev.prev||o(i,i.prev.prev)?e.findWordAt(l):new br(Je(l.line,0),at(e.doc,Je(l.line+1,0))),e.setSelection(a.anchor,a.head),e.focus(),_e(n)}r()}),fe(t.scroller,"touchcancel",r),fe(t.scroller,"scroll",function(){t.scroller.clientHeight&&(Ai(e,t.scroller.scrollTop),Ii(e,t.scroller.scrollLeft,!0),ge(e,"scroll",e))}),fe(t.scroller,"mousewheel",function(t){return mr(e,t)}),fe(t.scroller,"DOMMouseScroll",function(t){return mr(e,t)}),fe(t.wrapper,"scroll",function(){return t.wrapper.scrollTop=t.wrapper.scrollLeft=0}),t.dragFunctions={enter:function(t){ve(e,t)||Ce(t)},over:function(t){ve(e,t)||(function(e,t){var n=ai(e,t);if(n){var i=document.createDocumentFragment();gi(e,n,i),e.display.dragCursor||(e.display.dragCursor=L("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),e.display.lineSpace.insertBefore(e.display.dragCursor,e.display.cursorDiv)),M(e.display.dragCursor,i)}}(e,t),Ce(t))},start:function(t){return function(e,t){if(a&&(!e.state.draggingText||+new Date-Mo<100))Ce(t);else if(!ve(e,t)&&!kn(e.display,t)&&(t.dataTransfer.setData("Text",e.getSelection()),t.dataTransfer.effectAllowed="copyMove",t.dataTransfer.setDragImage&&!f)){var n=L("img",null,null,"position: fixed; left: 0; top: 0;");n.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d&&(n.width=n.height=1,e.display.wrapper.appendChild(n),n._top=n.offsetTop),t.dataTransfer.setDragImage(n,0,0),d&&n.parentNode.removeChild(n)}}(e,t)},drop:Xi(e,Lo),leave:function(t){ve(e,t)||Oo(e)}};var s=t.input.getField();fe(s,"keyup",function(t){return la.call(e,t)}),fe(s,"keydown",Xi(e,aa)),fe(s,"keypress",Xi(e,sa)),fe(s,"focus",function(t){return ki(e,t)}),fe(s,"blur",function(t){return wi(e,t)})}(this),Po(),$i(this),this.curOp.forceUpdate=!0,Nr(this,i),t.autofocus&&!m||this.hasFocus()?setTimeout(R(ki,this),20):wi(this),_a)_a.hasOwnProperty(u)&&_a[u](n,t[u],ya);sr(this),t.finishInit&&t.finishInit(this);for(var c=0;c<Sa.length;++c)Sa[c](n);zi(this),s&&t.lineWrapping&&"optimizelegibility"==getComputedStyle(o.lineDiv).textRendering&&(o.lineDiv.style.textRendering="auto")}Ca.defaults=ba,Ca.optionHandlers=_a;var Sa=[];function Ta(e,t,n,i){var r,o=e.doc;null==n&&(n="add"),"smart"==n&&(o.mode.indent?r=ft(e,t).state:n="prev");var a=e.options.tabSize,l=Ve(o,t),s=H(l.text,null,a);l.stateAfter&&(l.stateAfter=null);var u,c=l.text.match(/^\s*/)[0];if(i||/\S/.test(l.text)){if("smart"==n&&((u=o.mode.indent(r,l.text.slice(c.length),l.text))==U||u>150)){if(!i)return;n="prev"}}else u=0,n="not";"prev"==n?u=t>o.first?H(Ve(o,t-1).text,null,a):0:"add"==n?u=s+e.options.indentUnit:"subtract"==n?u=s-e.options.indentUnit:"number"==typeof n&&(u=s+n),u=Math.max(0,u);var d="",f=0;if(e.options.indentWithTabs)for(var h=Math.floor(u/a);h;--h)f+=a,d+="\t";if(f<u&&(d+=G(u-f)),d!=c)return co(o,d,Je(t,0),Je(t,c.length),"+input"),l.stateAfter=null,!0;for(var p=0;p<o.sel.ranges.length;p++){var g=o.sel.ranges[p];if(g.head.line==t&&g.head.ch<c.length){var v=Je(t,c.length);Kr(o,p,new br(v,v));break}}}Ca.defineInitHook=function(e){return Sa.push(e)};var Ea=null;function xa(e){Ea=e}function Ma(e,t,n,i,r){var o=e.doc;e.display.shift=!1,i||(i=o.sel);var a=+new Date-200,l="paste"==r||e.state.pasteIncoming>a,s=Ne(t),u=null;if(l&&i.ranges.length>1)if(Ea&&Ea.text.join("\n")==t){if(i.ranges.length%Ea.text.length==0){u=[];for(var c=0;c<Ea.text.length;c++)u.push(o.splitLines(Ea.text[c]))}}else s.length==i.ranges.length&&e.options.pasteLinesPerSelection&&(u=X(s,function(e){return[e]}));for(var d=e.curOp.updateInput,f=i.ranges.length-1;f>=0;f--){var h=i.ranges[f],p=h.from(),g=h.to();h.empty()&&(n&&n>0?p=Je(p.line,p.ch-n):e.state.overwrite&&!l?g=Je(g.line,Math.min(Ve(o,g.line).text.length,g.ch+Y(s).length)):l&&Ea&&Ea.lineWise&&Ea.text.join("\n")==t&&(p=g=Je(p.line,0)));var v={from:p,to:g,text:u?u[f%u.length]:s,origin:r||(l?"paste":e.state.cutIncoming>a?"cut":"+input")};oo(e.doc,v),ln(e,"inputRead",e,v)}t&&!l&&Oa(e,t),Mi(e),e.curOp.updateInput<2&&(e.curOp.updateInput=d),e.curOp.typing=!0,e.state.pasteIncoming=e.state.cutIncoming=-1}function La(e,t){var n=e.clipboardData&&e.clipboardData.getData("Text");if(n)return e.preventDefault(),t.isReadOnly()||t.options.disableInput||Yi(t,function(){return Ma(t,n,0,null,"paste")}),!0}function Oa(e,t){if(e.options.electricChars&&e.options.smartIndent)for(var n=e.doc.sel,i=n.ranges.length-1;i>=0;i--){var r=n.ranges[i];if(!(r.head.ch>100||i&&n.ranges[i-1].head.line==r.head.line)){var o=e.getModeAt(r.head),a=!1;if(o.electricChars){for(var l=0;l<o.electricChars.length;l++)if(t.indexOf(o.electricChars.charAt(l))>-1){a=Ta(e,r.head.line,"smart");break}}else o.electricInput&&o.electricInput.test(Ve(e.doc,r.head.line).text.slice(0,r.head.ch))&&(a=Ta(e,r.head.line,"smart"));a&&ln(e,"electricInput",e,r.head.line)}}}function Na(e){for(var t=[],n=[],i=0;i<e.doc.sel.ranges.length;i++){var r=e.doc.sel.ranges[i].head.line,o={anchor:Je(r,0),head:Je(r+1,0)};n.push(o),t.push(e.getRange(o.anchor,o.head))}return{text:t,ranges:n}}function Aa(e,t,n,i){e.setAttribute("autocorrect",n?"":"off"),e.setAttribute("autocapitalize",i?"":"off"),e.setAttribute("spellcheck",!!t)}function Pa(){var e=L("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),t=L("div",[e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return s?e.style.width="1000px":e.setAttribute("wrap","off"),g&&(e.style.border="1px solid black"),Aa(e),t}function Ia(e,t,n,i,r){var o=t,a=n,l=Ve(e,t.line);function s(i){var o;if(null==(o=r?function(e,t,n,i){var r=ce(t,e.doc.direction);if(!r)return Yo(t,n,i);n.ch>=t.text.length?(n.ch=t.text.length,n.sticky="before"):n.ch<=0&&(n.ch=0,n.sticky="after");var o=se(r,n.ch,n.sticky),a=r[o];if("ltr"==e.doc.direction&&a.level%2==0&&(i>0?a.to>n.ch:a.from<n.ch))return Yo(t,n,i);var l,s=function(e,n){return Go(t,e instanceof Je?e.ch:e,n)},u=function(n){return e.options.lineWrapping?(l=l||Nn(e,t),Zn(e,t,l,n)):{begin:0,end:t.text.length}},c=u("before"==n.sticky?s(n,-1):n.ch);if("rtl"==e.doc.direction||1==a.level){var d=1==a.level==i<0,f=s(n,d?1:-1);if(null!=f&&(d?f<=a.to&&f<=c.end:f>=a.from&&f>=c.begin)){var h=d?"before":"after";return new Je(n.line,f,h)}}var p=function(e,t,i){for(var o=function(e,t){return t?new Je(n.line,s(e,1),"before"):new Je(n.line,e,"after")};e>=0&&e<r.length;e+=t){var a=r[e],l=t>0==(1!=a.level),u=l?i.begin:s(i.end,-1);if(a.from<=u&&u<a.to)return o(u,l);if(u=l?a.from:s(a.to,-1),i.begin<=u&&u<i.end)return o(u,l)}},g=p(o+i,i,c);if(g)return g;var v=i>0?c.end:s(c.begin,-1);return null==v||i>0&&v==t.text.length||!(g=p(i>0?0:r.length-1,i,u(v)))?null:g}(e.cm,l,t,n):Yo(l,t,n))){if(i||!function(){var i=t.line+n;return!(i<e.first||i>=e.first+e.size)&&(t=new Je(i,t.ch,t.sticky),l=Ve(e,i))}())return!1;t=Xo(r,e.cm,l,t.line,n)}else t=o;return!0}if("char"==i)s();else if("column"==i)s(!0);else if("word"==i||"group"==i)for(var u=null,c="group"==i,d=e.cm&&e.cm.getHelper(t,"wordChars"),f=!0;!(n<0)||s(!f);f=!1){var h=l.text.charAt(t.ch)||"\n",p=te(h,d)?"w":c&&"\n"==h?"n":!c||/\s/.test(h)?null:"p";if(!c||f||p||(p="s"),u&&u!=p){n<0&&(n=1,s(),t.sticky="after");break}if(p&&(u=p),n>0&&!s(!f))break}var g=to(e,t,o,a,!0);return tt(o,g)&&(g.hitSide=!0),g}function Ba(e,t,n,i){var r,o,a=e.doc,l=t.left;if("page"==i){var s=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),u=Math.max(s-.5*ei(e.display),3);r=(n>0?t.bottom:t.top)+n*u}else"line"==i&&(r=n>0?t.bottom+3:t.top-3);for(;(o=Yn(e,l,r)).outside;){if(n<0?r<=0:r>=a.height){o.hitSide=!0;break}r+=5*n}return o}var Ra=function(e){this.cm=e,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new F,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};function Da(e,t){var n=On(e,t.line);if(!n||n.hidden)return null;var i=Ve(e.doc,t.line),r=Mn(n,i,t.line),o=ce(i,e.doc.direction),a="left";if(o){var l=se(o,t.ch);a=l%2?"right":"left"}var s=Bn(r.map,t.ch,a);return s.offset="right"==s.collapse?s.end:s.start,s}function Ha(e,t){return t&&(e.bad=!0),e}function Fa(e,t,n){var i;if(t==e.display.lineDiv){if(!(i=e.display.lineDiv.childNodes[n]))return Ha(e.clipPos(Je(e.display.viewTo-1)),!0);t=null,n=0}else for(i=t;;i=i.parentNode){if(!i||i==e.display.lineDiv)return null;if(i.parentNode&&i.parentNode==e.display.lineDiv)break}for(var r=0;r<e.display.view.length;r++){var o=e.display.view[r];if(o.node==i)return Wa(o,t,n)}}function Wa(e,t,n){var i=e.text.firstChild,r=!1;if(!t||!N(i,t))return Ha(Je(Ye(e.line),0),!0);if(t==i&&(r=!0,t=i.childNodes[n],n=0,!t)){var o=e.rest?Y(e.rest):e.line;return Ha(Je(Ye(o),o.text.length),r)}var a=3==t.nodeType?t:null,l=t;for(a||1!=t.childNodes.length||3!=t.firstChild.nodeType||(a=t.firstChild,n&&(n=a.nodeValue.length));l.parentNode!=i;)l=l.parentNode;var s=e.measure,u=s.maps;function c(t,n,i){for(var r=-1;r<(u?u.length:0);r++)for(var o=r<0?s.map:u[r],a=0;a<o.length;a+=3){var l=o[a+2];if(l==t||l==n){var c=Ye(r<0?e.line:e.rest[r]),d=o[a]+i;return(i<0||l!=t)&&(d=o[a+(i?1:0)]),Je(c,d)}}}var d=c(a,l,n);if(d)return Ha(d,r);for(var f=l.nextSibling,h=a?a.nodeValue.length-n:0;f;f=f.nextSibling){if(d=c(f,f.firstChild,0))return Ha(Je(d.line,d.ch-h),r);h+=f.textContent.length}for(var p=l.previousSibling,g=n;p;p=p.previousSibling){if(d=c(p,p.firstChild,-1))return Ha(Je(d.line,d.ch+g),r);g+=p.textContent.length}}Ra.prototype.init=function(e){var t=this,n=this,i=n.cm,r=n.div=e.lineDiv;function o(e){if(!ve(i,e)){if(i.somethingSelected())xa({lineWise:!1,text:i.getSelections()}),"cut"==e.type&&i.replaceSelection("",null,"cut");else{if(!i.options.lineWiseCopyCut)return;var t=Na(i);xa({lineWise:!0,text:t.text}),"cut"==e.type&&i.operation(function(){i.setSelections(t.ranges,0,$),i.replaceSelection("",null,"cut")})}if(e.clipboardData){e.clipboardData.clearData();var o=Ea.text.join("\n");if(e.clipboardData.setData("Text",o),e.clipboardData.getData("Text")==o)return void e.preventDefault()}var a=Pa(),l=a.firstChild;i.display.lineSpace.insertBefore(a,i.display.lineSpace.firstChild),l.value=Ea.text.join("\n");var s=document.activeElement;B(l),setTimeout(function(){i.display.lineSpace.removeChild(a),s.focus(),s==r&&n.showPrimarySelection()},50)}}Aa(r,i.options.spellcheck,i.options.autocorrect,i.options.autocapitalize),fe(r,"paste",function(e){ve(i,e)||La(e,i)||l<=11&&setTimeout(Xi(i,function(){return t.updateFromDOM()}),20)}),fe(r,"compositionstart",function(e){t.composing={data:e.data,done:!1}}),fe(r,"compositionupdate",function(e){t.composing||(t.composing={data:e.data,done:!1})}),fe(r,"compositionend",function(e){t.composing&&(e.data!=t.composing.data&&t.readFromDOMSoon(),t.composing.done=!0)}),fe(r,"touchstart",function(){return n.forceCompositionEnd()}),fe(r,"input",function(){t.composing||t.readFromDOMSoon()}),fe(r,"copy",o),fe(r,"cut",o)},Ra.prototype.prepareSelection=function(){var e=pi(this.cm,!1);return e.focus=this.cm.state.focused,e},Ra.prototype.showSelection=function(e,t){e&&this.cm.display.view.length&&((e.focus||t)&&this.showPrimarySelection(),this.showMultipleSelections(e))},Ra.prototype.getSelection=function(){return this.cm.display.wrapper.ownerDocument.getSelection()},Ra.prototype.showPrimarySelection=function(){var e=this.getSelection(),t=this.cm,i=t.doc.sel.primary(),r=i.from(),o=i.to();if(t.display.viewTo==t.display.viewFrom||r.line>=t.display.viewTo||o.line<t.display.viewFrom)e.removeAllRanges();else{var a=Fa(t,e.anchorNode,e.anchorOffset),l=Fa(t,e.focusNode,e.focusOffset);if(!a||a.bad||!l||l.bad||0!=et(rt(a,l),r)||0!=et(it(a,l),o)){var s=t.display.view,u=r.line>=t.display.viewFrom&&Da(t,r)||{node:s[0].measure.map[2],offset:0},c=o.line<t.display.viewTo&&Da(t,o);if(!c){var d=s[s.length-1].measure,f=d.maps?d.maps[d.maps.length-1]:d.map;c={node:f[f.length-1],offset:f[f.length-2]-f[f.length-3]}}if(u&&c){var h,p=e.rangeCount&&e.getRangeAt(0);try{h=T(u.node,u.offset,c.offset,c.node)}catch(g){}h&&(!n&&t.state.focused?(e.collapse(u.node,u.offset),h.collapsed||(e.removeAllRanges(),e.addRange(h))):(e.removeAllRanges(),e.addRange(h)),p&&null==e.anchorNode?e.addRange(p):n&&this.startGracePeriod()),this.rememberSelection()}else e.removeAllRanges()}}},Ra.prototype.startGracePeriod=function(){var e=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){e.gracePeriod=!1,e.selectionChanged()&&e.cm.operation(function(){return e.cm.curOp.selectionChanged=!0})},20)},Ra.prototype.showMultipleSelections=function(e){M(this.cm.display.cursorDiv,e.cursors),M(this.cm.display.selectionDiv,e.selection)},Ra.prototype.rememberSelection=function(){var e=this.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastFocusNode=e.focusNode,this.lastFocusOffset=e.focusOffset},Ra.prototype.selectionInEditor=function(){var e=this.getSelection();if(!e.rangeCount)return!1;var t=e.getRangeAt(0).commonAncestorContainer;return N(this.div,t)},Ra.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},Ra.prototype.blur=function(){this.div.blur()},Ra.prototype.getField=function(){return this.div},Ra.prototype.supportsTouch=function(){return!0},Ra.prototype.receivedFocus=function(){var e=this;this.selectionInEditor()?this.pollSelection():Yi(this.cm,function(){return e.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function t(){e.cm.state.focused&&(e.pollSelection(),e.polling.set(e.cm.options.pollInterval,t))})},Ra.prototype.selectionChanged=function(){var e=this.getSelection();return e.anchorNode!=this.lastAnchorNode||e.anchorOffset!=this.lastAnchorOffset||e.focusNode!=this.lastFocusNode||e.focusOffset!=this.lastFocusOffset},Ra.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var e=this.getSelection(),t=this.cm;if(v&&c&&this.cm.display.gutterSpecs.length&&function(e){for(var t=e;t;t=t.parentNode)if(/CodeMirror-gutter-wrapper/.test(t.className))return!0;return!1}(e.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var n=Fa(t,e.anchorNode,e.anchorOffset),i=Fa(t,e.focusNode,e.focusOffset);n&&i&&Yi(t,function(){Yr(t.doc,kr(n,i),$),(n.bad||i.bad)&&(t.curOp.selectionChanged=!0)})}}},Ra.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var e,t,n,i=this.cm,r=i.display,o=i.doc.sel.primary(),a=o.from(),l=o.to();if(0==a.ch&&a.line>i.firstLine()&&(a=Je(a.line-1,Ve(i.doc,a.line-1).length)),l.ch==Ve(i.doc,l.line).text.length&&l.line<i.lastLine()&&(l=Je(l.line+1,0)),a.line<r.viewFrom||l.line>r.viewTo-1)return!1;a.line==r.viewFrom||0==(e=li(i,a.line))?(t=Ye(r.view[0].line),n=r.view[0].node):(t=Ye(r.view[e].line),n=r.view[e-1].node.nextSibling);var s,u,c=li(i,l.line);if(c==r.view.length-1?(s=r.viewTo-1,u=r.lineDiv.lastChild):(s=Ye(r.view[c+1].line)-1,u=r.view[c+1].node.previousSibling),!n)return!1;for(var d=i.doc.splitLines(function(e,t,n,i,r){var o="",a=!1,l=e.doc.lineSeparator(),s=!1;function u(){a&&(o+=l,s&&(o+=l),a=s=!1)}function c(e){e&&(u(),o+=e)}function d(t){if(1==t.nodeType){var n=t.getAttribute("cm-text");if(n)return void c(n);var o,f=t.getAttribute("cm-marker");if(f){var h=e.findMarks(Je(i,0),Je(r+1,0),(v=+f,function(e){return e.id==v}));return void(h.length&&(o=h[0].find(0))&&c(Ke(e.doc,o.from,o.to).join(l)))}if("false"==t.getAttribute("contenteditable"))return;var p=/^(pre|div|p|li|table|br)$/i.test(t.nodeName);if(!/^br$/i.test(t.nodeName)&&0==t.textContent.length)return;p&&u();for(var g=0;g<t.childNodes.length;g++)d(t.childNodes[g]);/^(pre|p)$/i.test(t.nodeName)&&(s=!0),p&&(a=!0)}else 3==t.nodeType&&c(t.nodeValue.replace(/\u200b/g,"").replace(/\u00a0/g," "));var v}for(;d(t),t!=n;)t=t.nextSibling,s=!1;return o}(i,n,u,t,s)),f=Ke(i.doc,Je(t,0),Je(s,Ve(i.doc,s).text.length));d.length>1&&f.length>1;)if(Y(d)==Y(f))d.pop(),f.pop(),s--;else{if(d[0]!=f[0])break;d.shift(),f.shift(),t++}for(var h=0,p=0,g=d[0],v=f[0],m=Math.min(g.length,v.length);h<m&&g.charCodeAt(h)==v.charCodeAt(h);)++h;for(var y=Y(d),b=Y(f),_=Math.min(y.length-(1==d.length?h:0),b.length-(1==f.length?h:0));p<_&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)++p;if(1==d.length&&1==f.length&&t==a.line)for(;h&&h>a.ch&&y.charCodeAt(y.length-p-1)==b.charCodeAt(b.length-p-1);)h--,p++;d[d.length-1]=y.slice(0,y.length-p).replace(/^\u200b+/,""),d[0]=d[0].slice(h).replace(/\u200b+$/,"");var k=Je(t,h),w=Je(s,f.length?Y(f).length-p:0);return d.length>1||d[0]||et(k,w)?(co(i.doc,d,k,w,"+input"),!0):void 0},Ra.prototype.ensurePolled=function(){this.forceCompositionEnd()},Ra.prototype.reset=function(){this.forceCompositionEnd()},Ra.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},Ra.prototype.readFromDOMSoon=function(){var e=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(e.readDOMTimeout=null,e.composing){if(!e.composing.done)return;e.composing=null}e.updateFromDOM()},80))},Ra.prototype.updateFromDOM=function(){var e=this;!this.cm.isReadOnly()&&this.pollContent()||Yi(this.cm,function(){return si(e.cm)})},Ra.prototype.setUneditable=function(e){e.contentEditable="false"},Ra.prototype.onKeyPress=function(e){0==e.charCode||this.composing||(e.preventDefault(),this.cm.isReadOnly()||Xi(this.cm,Ma)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0))},Ra.prototype.readOnlyChanged=function(e){this.div.contentEditable=String("nocursor"!=e)},Ra.prototype.onContextMenu=function(){},Ra.prototype.resetPosition=function(){},Ra.prototype.needsContentAttribute=!0;var ja=function(e){this.cm=e,this.prevInput="",this.pollingFast=!1,this.polling=new F,this.hasSelection=!1,this.composing=null};ja.prototype.init=function(e){var t=this,n=this,i=this.cm;this.createField(e);var r=this.textarea;function o(e){if(!ve(i,e)){if(i.somethingSelected())xa({lineWise:!1,text:i.getSelections()});else{if(!i.options.lineWiseCopyCut)return;var t=Na(i);xa({lineWise:!0,text:t.text}),"cut"==e.type?i.setSelections(t.ranges,null,$):(n.prevInput="",r.value=t.text.join("\n"),B(r))}"cut"==e.type&&(i.state.cutIncoming=+new Date)}}e.wrapper.insertBefore(this.wrapper,e.wrapper.firstChild),g&&(r.style.width="0px"),fe(r,"input",function(){a&&l>=9&&t.hasSelection&&(t.hasSelection=null),n.poll()}),fe(r,"paste",function(e){ve(i,e)||La(e,i)||(i.state.pasteIncoming=+new Date,n.fastPoll())}),fe(r,"cut",o),fe(r,"copy",o),fe(e.scroller,"paste",function(t){if(!kn(e,t)&&!ve(i,t)){if(!r.dispatchEvent)return i.state.pasteIncoming=+new Date,void n.focus();var o=new Event("paste");o.clipboardData=t.clipboardData,r.dispatchEvent(o)}}),fe(e.lineSpace,"selectstart",function(t){kn(e,t)||_e(t)}),fe(r,"compositionstart",function(){var e=i.getCursor("from");n.composing&&n.composing.range.clear(),n.composing={start:e,range:i.markText(e,i.getCursor("to"),{className:"CodeMirror-composing"})}}),fe(r,"compositionend",function(){n.composing&&(n.poll(),n.composing.range.clear(),n.composing=null)})},ja.prototype.createField=function(e){this.wrapper=Pa(),this.textarea=this.wrapper.firstChild},ja.prototype.prepareSelection=function(){var e=this.cm,t=e.display,n=e.doc,i=pi(e);if(e.options.moveInputWithCursor){var r=Kn(e,n.sel.primary().head,"div"),o=t.wrapper.getBoundingClientRect(),a=t.lineDiv.getBoundingClientRect();i.teTop=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+a.top-o.top)),i.teLeft=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+a.left-o.left))}return i},ja.prototype.showSelection=function(e){var t=this.cm,n=t.display;M(n.cursorDiv,e.cursors),M(n.selectionDiv,e.selection),null!=e.teTop&&(this.wrapper.style.top=e.teTop+"px",this.wrapper.style.left=e.teLeft+"px")},ja.prototype.reset=function(e){if(!this.contextMenuPending&&!this.composing){var t=this.cm;if(t.somethingSelected()){this.prevInput="";var n=t.getSelection();this.textarea.value=n,t.state.focused&&B(this.textarea),a&&l>=9&&(this.hasSelection=n)}else e||(this.prevInput=this.textarea.value="",a&&l>=9&&(this.hasSelection=null))}},ja.prototype.getField=function(){return this.textarea},ja.prototype.supportsTouch=function(){return!1},ja.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!m||A()!=this.textarea))try{this.textarea.focus()}catch(e){}},ja.prototype.blur=function(){this.textarea.blur()},ja.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},ja.prototype.receivedFocus=function(){this.slowPoll()},ja.prototype.slowPoll=function(){var e=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){e.poll(),e.cm.state.focused&&e.slowPoll()})},ja.prototype.fastPoll=function(){var e=!1,t=this;t.pollingFast=!0,t.polling.set(20,function n(){var i=t.poll();i||e?(t.pollingFast=!1,t.slowPoll()):(e=!0,t.polling.set(60,n))})},ja.prototype.poll=function(){var e=this,t=this.cm,n=this.textarea,i=this.prevInput;if(this.contextMenuPending||!t.state.focused||Ae(n)&&!i&&!this.composing||t.isReadOnly()||t.options.disableInput||t.state.keySeq)return!1;var r=n.value;if(r==i&&!t.somethingSelected())return!1;if(a&&l>=9&&this.hasSelection===r||y&&/[\uf700-\uf7ff]/.test(r))return t.display.input.reset(),!1;if(t.doc.sel==t.display.selForContextMenu){var o=r.charCodeAt(0);if(8203!=o||i||(i="\u200b"),8666==o)return this.reset(),this.cm.execCommand("undo")}for(var s=0,u=Math.min(i.length,r.length);s<u&&i.charCodeAt(s)==r.charCodeAt(s);)++s;return Yi(t,function(){Ma(t,r.slice(s),i.length-s,null,e.composing?"*compose":null),r.length>1e3||r.indexOf("\n")>-1?n.value=e.prevInput="":e.prevInput=r,e.composing&&(e.composing.range.clear(),e.composing.range=t.markText(e.composing.start,t.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ja.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},ja.prototype.onKeyPress=function(){a&&l>=9&&(this.hasSelection=null),this.fastPoll()},ja.prototype.onContextMenu=function(e){var t=this,n=t.cm,i=n.display,r=t.textarea;t.contextMenuPending&&t.contextMenuPending();var o=ai(n,e),u=i.scroller.scrollTop;if(o&&!d){var c=n.options.resetSelectionOnContextMenu;c&&-1==n.doc.sel.contains(o)&&Xi(n,Yr)(n.doc,kr(o),$);var f,h=r.style.cssText,p=t.wrapper.style.cssText,g=t.wrapper.offsetParent.getBoundingClientRect();t.wrapper.style.cssText="position: static",r.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(e.clientY-g.top-5)+"px; left: "+(e.clientX-g.left-5)+"px;\n      z-index: 1000; background: "+(a?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",s&&(f=window.scrollY),i.input.focus(),s&&window.scrollTo(null,f),i.input.reset(),n.somethingSelected()||(r.value=t.prevInput=" "),t.contextMenuPending=m,i.selForContextMenu=n.doc.sel,clearTimeout(i.detectingSelectAll),a&&l>=9&&v(),C?(Ce(e),fe(window,"mouseup",function e(){pe(window,"mouseup",e),setTimeout(m,20)})):setTimeout(m,50)}function v(){if(null!=r.selectionStart){var e=n.somethingSelected(),o="\u200b"+(e?r.value:"");r.value="\u21da",r.value=o,t.prevInput=e?"":"\u200b",r.selectionStart=1,r.selectionEnd=o.length,i.selForContextMenu=n.doc.sel}}function m(){if(t.contextMenuPending==m&&(t.contextMenuPending=!1,t.wrapper.style.cssText=p,r.style.cssText=h,a&&l<9&&i.scrollbars.setScrollTop(i.scroller.scrollTop=u),null!=r.selectionStart)){(!a||a&&l<9)&&v();var e=0;i.detectingSelectAll=setTimeout(function o(){i.selForContextMenu==n.doc.sel&&0==r.selectionStart&&r.selectionEnd>0&&"\u200b"==t.prevInput?Xi(n,io)(n):e++<10?i.detectingSelectAll=setTimeout(o,500):(i.selForContextMenu=null,i.input.reset())},200)}}},ja.prototype.readOnlyChanged=function(e){e||this.reset(),this.textarea.disabled="nocursor"==e},ja.prototype.setUneditable=function(){},ja.prototype.needsContentAttribute=!1,function(e){var t=e.optionHandlers;function n(n,i,r,o){e.defaults[n]=i,r&&(t[n]=o?function(e,t,n){n!=ya&&r(e,t,n)}:r)}e.defineOption=n,e.Init=ya,n("value","",function(e,t){return e.setValue(t)},!0),n("mode",null,function(e,t){e.doc.modeOption=t,Er(e)},!0),n("indentUnit",2,Er,!0),n("indentWithTabs",!1),n("smartIndent",!0),n("tabSize",4,function(e){xr(e),Fn(e),si(e)},!0),n("lineSeparator",null,function(e,t){if(e.doc.lineSep=t,t){var n=[],i=e.doc.first;e.doc.iter(function(e){for(var r=0;;){var o=e.text.indexOf(t,r);if(-1==o)break;r=o+t.length,n.push(Je(i,o))}i++});for(var r=n.length-1;r>=0;r--)co(e.doc,t,n[r],Je(n[r].line,n[r].ch+t.length))}}),n("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/g,function(e,t,n){e.state.specialChars=new RegExp(t.source+(t.test("\t")?"":"|\t"),"g"),n!=ya&&e.refresh()}),n("specialCharPlaceholder",Zt,function(e){return e.refresh()},!0),n("electricChars",!0),n("inputStyle",m?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),n("spellcheck",!1,function(e,t){return e.getInputField().spellcheck=t},!0),n("autocorrect",!1,function(e,t){return e.getInputField().autocorrect=t},!0),n("autocapitalize",!1,function(e,t){return e.getInputField().autocapitalize=t},!0),n("rtlMoveVisually",!_),n("wholeLineUpdateBefore",!0),n("theme","default",function(e){ma(e),dr(e)},!0),n("keyMap","default",function(e,t,n){var i=Ko(t),r=n!=ya&&Ko(n);r&&r.detach&&r.detach(e,i),i.attach&&i.attach(e,r||null)}),n("extraKeys",null),n("configureMouse",null),n("lineWrapping",!1,wa,!0),n("gutters",[],function(e,t){e.display.gutterSpecs=ur(t,e.options.lineNumbers),dr(e)},!0),n("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?ii(e.display)+"px":"0",e.refresh()},!0),n("coverGutterNextToScrollbar",!1,function(e){return Hi(e)},!0),n("scrollbarStyle","native",function(e){ji(e),Hi(e),e.display.scrollbars.setScrollTop(e.doc.scrollTop),e.display.scrollbars.setScrollLeft(e.doc.scrollLeft)},!0),n("lineNumbers",!1,function(e,t){e.display.gutterSpecs=ur(e.options.gutters,t),dr(e)},!0),n("firstLineNumber",1,dr,!0),n("lineNumberFormatter",function(e){return e},dr,!0),n("showCursorWhenSelecting",!1,hi,!0),n("resetSelectionOnContextMenu",!0),n("lineWiseCopyCut",!0),n("pasteLinesPerSelection",!0),n("selectionsMayTouch",!1),n("readOnly",!1,function(e,t){"nocursor"==t&&(wi(e),e.display.input.blur()),e.display.input.readOnlyChanged(t)}),n("disableInput",!1,function(e,t){t||e.display.input.reset()},!0),n("dragDrop",!0,ka),n("allowDropFileTypes",null),n("cursorBlinkRate",530),n("cursorScrollMargin",0),n("cursorHeight",1,hi,!0),n("singleCursorHeightPerLine",!0,hi,!0),n("workTime",100),n("workDelay",100),n("flattenSpans",!0,xr,!0),n("addModeClass",!1,xr,!0),n("pollInterval",100),n("undoDepth",200,function(e,t){return e.doc.history.undoDepth=t}),n("historyEventDelay",1250),n("viewportMargin",10,function(e){return e.refresh()},!0),n("maxHighlightLength",1e4,xr,!0),n("moveInputWithCursor",!0,function(e,t){t||e.display.input.resetPosition()}),n("tabindex",null,function(e,t){return e.display.input.getField().tabIndex=t||""}),n("autofocus",null),n("direction","ltr",function(e,t){return e.doc.setDirection(t)},!0),n("phrases",null)}(Ca),function(e){var t=e.optionHandlers,n=e.helpers={};e.prototype={constructor:e,focus:function(){window.focus(),this.display.input.focus()},setOption:function(e,n){var i=this.options,r=i[e];i[e]==n&&"mode"!=e||(i[e]=n,t.hasOwnProperty(e)&&Xi(this,t[e])(this,n,r),ge(this,"optionChange",this,e))},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](Ko(e))},removeKeyMap:function(e){for(var t=this.state.keyMaps,n=0;n<t.length;++n)if(t[n]==e||t[n].name==e)return t.splice(n,1),!0},addOverlay:Zi(function(t,n){var i=t.token?t:e.getMode(this.options,t);if(i.startState)throw new Error("Overlays may not be stateful.");!function(e,t,n){for(var i=0,r=n(t);i<e.length&&n(e[i])<=r;)i++;e.splice(i,0,t)}(this.state.overlays,{mode:i,modeSpec:t,opaque:n&&n.opaque,priority:n&&n.priority||0},function(e){return e.priority}),this.state.modeGen++,si(this)}),removeOverlay:Zi(function(e){for(var t=this.state.overlays,n=0;n<t.length;++n){var i=t[n].modeSpec;if(i==e||"string"==typeof e&&i.name==e)return t.splice(n,1),this.state.modeGen++,void si(this)}}),indentLine:Zi(function(e,t,n){"string"!=typeof t&&"number"!=typeof t&&(t=null==t?this.options.smartIndent?"smart":"prev":t?"add":"subtract"),Ze(this.doc,e)&&Ta(this,e,t,n)}),indentSelection:Zi(function(e){for(var t=this.doc.sel.ranges,n=-1,i=0;i<t.length;i++){var r=t[i];if(r.empty())r.head.line>n&&(Ta(this,r.head.line,e,!0),n=r.head.line,i==this.doc.sel.primIndex&&Mi(this));else{var o=r.from(),a=r.to(),l=Math.max(n,o.line);n=Math.min(this.lastLine(),a.line-(a.ch?0:1))+1;for(var s=l;s<n;++s)Ta(this,s,e);var u=this.doc.sel.ranges;0==o.ch&&t.length==u.length&&u[i].from().ch>0&&Kr(this.doc,i,new br(o,u[i].to()),$)}}}),getTokenAt:function(e,t){return mt(this,e,t)},getLineTokens:function(e,t){return mt(this,Je(e),t,!0)},getTokenTypeAt:function(e){e=at(this.doc,e);var t,n=dt(this,Ve(this.doc,e.line)),i=0,r=(n.length-1)/2,o=e.ch;if(0==o)t=n[2];else for(;;){var a=i+r>>1;if((a?n[2*a-1]:0)>=o)r=a;else{if(!(n[2*a+1]<o)){t=n[2*a+2];break}i=a+1}}var l=t?t.indexOf("overlay "):-1;return l<0?t:0==l?null:t.slice(0,l-1)},getModeAt:function(t){var n=this.doc.mode;return n.innerMode?e.innerMode(n,this.getTokenAt(t).state).mode:n},getHelper:function(e,t){return this.getHelpers(e,t)[0]},getHelpers:function(e,t){var i=[];if(!n.hasOwnProperty(t))return i;var r=n[t],o=this.getModeAt(e);if("string"==typeof o[t])r[o[t]]&&i.push(r[o[t]]);else if(o[t])for(var a=0;a<o[t].length;a++){var l=r[o[t][a]];l&&i.push(l)}else o.helperType&&r[o.helperType]?i.push(r[o.helperType]):r[o.name]&&i.push(r[o.name]);for(var s=0;s<r._global.length;s++){var u=r._global[s];u.pred(o,this)&&-1==W(i,u.val)&&i.push(u.val)}return i},getStateAfter:function(e,t){var n=this.doc;return ft(this,(e=ot(n,null==e?n.first+n.size-1:e))+1,t).state},cursorCoords:function(e,t){var n=this.doc.sel.primary();return Kn(this,null==e?n.head:"object"==typeof e?at(this.doc,e):e?n.from():n.to(),t||"page")},charCoords:function(e,t){return Vn(this,at(this.doc,e),t||"page")},coordsChar:function(e,t){return Yn(this,(e=zn(this,e,t||"page")).left,e.top)},lineAtHeight:function(e,t){return e=zn(this,{top:e,left:0},t||"page").top,Xe(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t,n){var i,r=!1;if("number"==typeof e){var o=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>o&&(e=o,r=!0),i=Ve(this.doc,e)}else i=e;return $n(this,i,{top:0,left:0},t||"page",n||r).top+(r?this.doc.height-Ut(i):0)},defaultTextHeight:function(){return ei(this.display)},defaultCharWidth:function(){return ti(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(e,t,n,i,r){var o=this.display,a=(e=Kn(this,at(this.doc,e))).bottom,l=e.left;if(t.style.position="absolute",t.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(t),o.sizer.appendChild(t),"over"==i)a=e.top;else if("above"==i||"near"==i){var s=Math.max(o.wrapper.clientHeight,this.doc.height),u=Math.max(o.sizer.clientWidth,o.lineSpace.clientWidth);("above"==i||e.bottom+t.offsetHeight>s)&&e.top>t.offsetHeight?a=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=s&&(a=e.bottom),l+t.offsetWidth>u&&(l=u-t.offsetWidth)}t.style.top=a+"px",t.style.left=t.style.right="","right"==r?(l=o.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==r?l=0:"middle"==r&&(l=(o.sizer.clientWidth-t.offsetWidth)/2),t.style.left=l+"px"),n&&function(e,t){var n=Ei(e,t);null!=n.scrollTop&&Ai(e,n.scrollTop),null!=n.scrollLeft&&Ii(e,n.scrollLeft)}(this,{left:l,top:a,right:l+t.offsetWidth,bottom:a+t.offsetHeight})},triggerOnKeyDown:Zi(aa),triggerOnKeyPress:Zi(sa),triggerOnKeyUp:la,triggerOnMouseDown:Zi(fa),execCommand:function(e){if(Zo.hasOwnProperty(e))return Zo[e].call(null,this)},triggerElectric:Zi(function(e){Oa(this,e)}),findPosH:function(e,t,n,i){var r=1;t<0&&(r=-1,t=-t);for(var o=at(this.doc,e),a=0;a<t&&!(o=Ia(this.doc,o,r,n,i)).hitSide;++a);return o},moveH:Zi(function(e,t){var n=this;this.extendSelectionsBy(function(i){return n.display.shift||n.doc.extend||i.empty()?Ia(n.doc,i.head,e,t,n.options.rtlMoveVisually):e<0?i.from():i.to()},V)}),deleteH:Zi(function(e,t){var n=this.doc.sel,i=this.doc;n.somethingSelected()?i.replaceSelection("",null,"+delete"):qo(this,function(n){var r=Ia(i,n.head,e,t,!1);return e<0?{from:r,to:n.head}:{from:n.head,to:r}})}),findPosV:function(e,t,n,i){var r=1,o=i;t<0&&(r=-1,t=-t);for(var a=at(this.doc,e),l=0;l<t;++l){var s=Kn(this,a,"div");if(null==o?o=s.left:s.left=o,(a=Ba(this,s,r,n)).hitSide)break}return a},moveV:Zi(function(e,t){var n=this,i=this.doc,r=[],o=!this.display.shift&&!i.extend&&i.sel.somethingSelected();if(i.extendSelectionsBy(function(a){if(o)return e<0?a.from():a.to();var l=Kn(n,a.head,"div");null!=a.goalColumn&&(l.left=a.goalColumn),r.push(l.left);var s=Ba(n,l,e,t);return"page"==t&&a==i.sel.primary()&&xi(n,Vn(n,s,"div").top-l.top),s},V),r.length)for(var a=0;a<i.sel.ranges.length;a++)i.sel.ranges[a].goalColumn=r[a]}),findWordAt:function(e){var t=this.doc,n=Ve(t,e.line).text,i=e.ch,r=e.ch;if(n){var o=this.getHelper(e,"wordChars");"before"!=e.sticky&&r!=n.length||!i?++r:--i;for(var a=n.charAt(i),l=te(a,o)?function(e){return te(e,o)}:/\s/.test(a)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!te(e)};i>0&&l(n.charAt(i-1));)--i;for(;r<n.length&&l(n.charAt(r));)++r}return new br(Je(e.line,i),Je(e.line,r))},toggleOverwrite:function(e){null!=e&&e==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?P(this.display.cursorDiv,"CodeMirror-overwrite"):E(this.display.cursorDiv,"CodeMirror-overwrite"),ge(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==A()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:Zi(function(e,t){Li(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-Tn(this)-this.display.barHeight,width:e.scrollWidth-Tn(this)-this.display.barWidth,clientHeight:xn(this),clientWidth:En(this)}},scrollIntoView:Zi(function(e,t){null==e?(e={from:this.doc.sel.primary().head,to:null},null==t&&(t=this.options.cursorScrollMargin)):"number"==typeof e?e={from:Je(e,0),to:null}:null==e.from&&(e={from:e,to:null}),e.to||(e.to=e.from),e.margin=t||0,null!=e.from.line?function(e,t){Oi(e),e.curOp.scrollToPos=t}(this,e):Ni(this,e.from,e.to,e.margin)}),setSize:Zi(function(e,t){var n=this,i=function(e){return"number"==typeof e||/^\d+$/.test(String(e))?e+"px":e};null!=e&&(this.display.wrapper.style.width=i(e)),null!=t&&(this.display.wrapper.style.height=i(t)),this.options.lineWrapping&&Hn(this);var r=this.display.viewFrom;this.doc.iter(r,this.display.viewTo,function(e){if(e.widgets)for(var t=0;t<e.widgets.length;t++)if(e.widgets[t].noHScroll){ui(n,r,"widget");break}++r}),this.curOp.forceUpdate=!0,ge(this,"refresh",this)}),operation:function(e){return Yi(this,e)},startOperation:function(){return $i(this)},endOperation:function(){return zi(this)},refresh:Zi(function(){var e=this.display.cachedTextHeight;si(this),this.curOp.forceUpdate=!0,Fn(this),Li(this,this.doc.scrollLeft,this.doc.scrollTop),or(this.display),(null==e||Math.abs(e-ei(this.display))>.5)&&oi(this),ge(this,"refresh",this)}),swapDoc:Zi(function(e){var t=this.doc;return t.cm=null,this.state.selectingText&&this.state.selectingText(),Nr(this,e),Fn(this),this.display.input.reset(),Li(this,e.scrollLeft,e.scrollTop),this.curOp.forceScroll=!0,ln(this,"swapDoc",this,t),t}),phrase:function(e){var t=this.options.phrases;return t&&Object.prototype.hasOwnProperty.call(t,e)?t[e]:e},getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},be(e),e.registerHelper=function(t,i,r){n.hasOwnProperty(t)||(n[t]=e[t]={_global:[]}),n[t][i]=r},e.registerGlobalHelper=function(t,i,r,o){e.registerHelper(t,i,o),n[t]._global.push({pred:r,val:o})}}(Ca);var Ua="iter insert remove copy getEditor constructor".split(" ");for(var $a in xo.prototype)xo.prototype.hasOwnProperty($a)&&W(Ua,$a)<0&&(Ca.prototype[$a]=function(e){return function(){return e.apply(this.doc,arguments)}}(xo.prototype[$a]));return be(xo),Ca.inputStyles={textarea:ja,contenteditable:Ra},Ca.defineMode=function(e){Ca.defaults.mode||"null"==e||(Ca.defaults.mode=e),function(e,t){arguments.length>2&&(t.dependencies=Array.prototype.slice.call(arguments,2)),Be[e]=t}.apply(this,arguments)},Ca.defineMIME=function(e,t){Re[e]=t},Ca.defineMode("null",function(){return{token:function(e){return e.skipToEnd()}}}),Ca.defineMIME("text/plain","null"),Ca.defineExtension=function(e,t){Ca.prototype[e]=t},Ca.defineDocExtension=function(e,t){xo.prototype[e]=t},Ca.fromTextArea=function(e,t){if((t=t?D(t):{}).value=e.value,!t.tabindex&&e.tabIndex&&(t.tabindex=e.tabIndex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder),null==t.autofocus){var n=A();t.autofocus=n==e||null!=e.getAttribute("autofocus")&&n==document.body}function i(){e.value=l.getValue()}var r;if(e.form&&(fe(e.form,"submit",i),!t.leaveSubmitMethodAlone)){var o=e.form;r=o.submit;try{var a=o.submit=function(){i(),o.submit=r,o.submit(),o.submit=a}}catch(s){}}t.finishInit=function(t){t.save=i,t.getTextArea=function(){return e},t.toTextArea=function(){t.toTextArea=isNaN,i(),e.parentNode.removeChild(t.getWrapperElement()),e.style.display="",e.form&&(pe(e.form,"submit",i),"function"==typeof e.form.submit&&(e.form.submit=r))}},e.style.display="none";var l=Ca(function(t){return e.parentNode.insertBefore(t,e.nextSibling)},t);return l},function(e){e.off=pe,e.on=fe,e.wheelEventPixels=vr,e.Doc=xo,e.splitLines=Ne,e.countColumn=H,e.findColumn=K,e.isWordChar=ee,e.Pass=U,e.signal=ge,e.Line=Vt,e.changeEnd=wr,e.scrollbarModel=Wi,e.Pos=Je,e.cmpPos=et,e.modes=Be,e.mimeModes=Re,e.resolveMode=De,e.getMode=He,e.modeExtensions=Fe,e.extendMode=We,e.copyState=je,e.startState=$e,e.innerMode=Ue,e.commands=Zo,e.keyMap=Fo,e.keyName=Vo,e.isModifierKey=$o,e.lookupKey=Uo,e.normalizeKeyMap=jo,e.StringStream=ze,e.SharedTextMarker=Co,e.TextMarker=ko,e.LineWidget=yo,e.e_preventDefault=_e,e.e_stopPropagation=ke,e.e_stop=Ce,e.addClass=P,e.contains=N,e.rmClass=E,e.keyNames=Bo}(Ca),Ca.version="5.48.2",Ca}()}}]);
//# sourceMappingURL=5.e2846780.chunk.js.map